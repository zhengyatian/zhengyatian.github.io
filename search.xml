<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hexo + GitHub Pages 404</title>
    <url>/2017/10/02/GitHub%20Pages%20404/</url>
    <content><![CDATA[<p>å¦‚ä½•é…ç½®GitHub Pagesç½‘ä¸Šèµ„æ–™å¾ˆå¤šï¼Œè¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œæˆ‘ä»¬è¡¥å……ä¸€ä¸ªé—®é¢˜çš„è§£å†³æ–¹å¼ã€‚å¾ˆå¤šäººéƒ½å‡ºä¼šå‡ºç°ï¼ŒHexoé¡¹ç›®ä¼ åˆ° GitHub çš„ä»“åº“åï¼Œè®¿é—® <code>username.github.io</code> åŸŸåï¼Œç»“æœæ˜¯404</p>
<p>æˆ‘æœé›†åˆ°çš„è§£å†³åŠæ³•å¤§æ¦‚æœ‰ä¸‰ä¸ªï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ ï¼š</p>
<p>â€‹        <a id="more"></a></p>
<h4 id="1ã€Git-ä»“åº“çš„ä»“åº“åå’Œ-GitHub-Pages-çš„åŸŸåï¼ŒæŒ‰ç…§GitHubçš„è¦æ±‚ï¼Œé…ç½®æˆï¼š"><a href="#1ã€Git-ä»“åº“çš„ä»“åº“åå’Œ-GitHub-Pages-çš„åŸŸåï¼ŒæŒ‰ç…§GitHubçš„è¦æ±‚ï¼Œé…ç½®æˆï¼š" class="headerlink" title="1ã€Git ä»“åº“çš„ä»“åº“åå’Œ GitHub Pages çš„åŸŸåï¼ŒæŒ‰ç…§GitHubçš„è¦æ±‚ï¼Œé…ç½®æˆï¼š"></a>1ã€Git ä»“åº“çš„ä»“åº“åå’Œ GitHub Pages çš„åŸŸåï¼ŒæŒ‰ç…§GitHubçš„è¦æ±‚ï¼Œé…ç½®æˆï¼š</h4><p>&lt;githubè´¦å·å&gt;.github.io</p>
<p>åƒæˆ‘å°±æ˜¯ zhengyatian.github.io</p>
<h4 id="2ã€æ£€æŸ¥-Hexo-ç«™ç‚¹çš„é…ç½®æ–‡ä»¶-condig-yml-ä¸­å…³äº-Git-çš„è®¾ç½®æ˜¯å¦æœ‰é—®é¢˜"><a href="#2ã€æ£€æŸ¥-Hexo-ç«™ç‚¹çš„é…ç½®æ–‡ä»¶-condig-yml-ä¸­å…³äº-Git-çš„è®¾ç½®æ˜¯å¦æœ‰é—®é¢˜" class="headerlink" title="2ã€æ£€æŸ¥ Hexo ç«™ç‚¹çš„é…ç½®æ–‡ä»¶ _condig.yml ä¸­å…³äº Git çš„è®¾ç½®æ˜¯å¦æœ‰é—®é¢˜"></a>2ã€æ£€æŸ¥ Hexo ç«™ç‚¹çš„é…ç½®æ–‡ä»¶ _condig.yml ä¸­å…³äº Git çš„è®¾ç½®æ˜¯å¦æœ‰é—®é¢˜</h4><figure class="highlight yaml"><table><tr><td class="code"><pre><code class="hljs yaml"><span class="hljs-comment"># Deployment</span><br><span class="hljs-comment">## Docs: https://hexo.io/docs/deployment.html</span><br><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:zhengyatian/zhengyatian.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure>

<p>çœ‹ä¸‹ repo å’Œ branch æ˜¯å¦å†™é”™äº†ï¼Œå¦‚æœä½ æ˜¯ä»ç½‘ä¸Šå¤åˆ¶çš„è¿™ä¸€ç«¯é…ç½®ï¼Œé¡ºä¾¿æ£€æŸ¥ä¸€ä¸‹yml æ ¼å¼æ˜¯ä¸æ˜¯é”™äº†ï¼Œå¤šäº†ä¸€ä¸ªç©ºæ ¼ä¹‹ç±»çš„å‘€ï¼Œå“ˆå“ˆå“ˆã€‚</p>
<h4 id="3ã€ç¼ºå°‘-index-html-æ–‡ä»¶ï¼Œæˆ–è€…è¯´â€é¦–é¡µæ²¡äº†â€ï¼Œè¿™ä¸ªæ˜¯æˆ‘å½“æ—¶é‡åˆ°çš„é—®é¢˜"><a href="#3ã€ç¼ºå°‘-index-html-æ–‡ä»¶ï¼Œæˆ–è€…è¯´â€é¦–é¡µæ²¡äº†â€ï¼Œè¿™ä¸ªæ˜¯æˆ‘å½“æ—¶é‡åˆ°çš„é—®é¢˜" class="headerlink" title="3ã€ç¼ºå°‘ index.html æ–‡ä»¶ï¼Œæˆ–è€…è¯´â€é¦–é¡µæ²¡äº†â€ï¼Œè¿™ä¸ªæ˜¯æˆ‘å½“æ—¶é‡åˆ°çš„é—®é¢˜"></a>3ã€ç¼ºå°‘ index.html æ–‡ä»¶ï¼Œæˆ–è€…è¯´â€é¦–é¡µæ²¡äº†â€ï¼Œè¿™ä¸ªæ˜¯æˆ‘å½“æ—¶é‡åˆ°çš„é—®é¢˜</h4><figure class="highlight shell"><table><tr><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">åœ¨ç«™ç‚¹ç›®å½•ä¸‹ï¼ŒGit Bash ä¸­ æ‰§è¡Œ</span><br>npm install hexo-generator-index --save<br></code></pre></td></tr></table></figure>

<p>ä¹‹åå°±ç”Ÿæˆ index.html æ–‡ä»¶äº†ï¼Œç„¶åé‡æ–°æ‰§è¡Œä¸Šä¼  <code>hexo clean</code> <code>hexo g -d</code> è¯•è¯•ï¼Œåæ­£æˆ‘çš„æ˜¯å¯ä»¥äº†ã€‚æˆ‘æ˜¯åšç§»åŠ¨ç«¯å¼€å‘çš„ï¼Œwebå‰ç«¯ç€å®æœ‰ç‚¹è¿·â€¦â€¦ä¹Ÿéƒ½æ˜¯ä¸œæ‹¼è¥¿å‡‘çš„èµ„æ–™ã€‚</p>
<p>éœ€è¦è”ç³»çš„ï¼Œå» â€œå…³äº(About)â€ ä¸­æ‰¾åˆ°æˆ‘å§ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>Mac ä¸‹ IDEA æ— æ³•å¯åŠ¨çš„é—®é¢˜</title>
    <url>/2019/01/24/Mac%E4%B8%8BIDEA%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<p>è¦ä½¿ç”¨IDEAï¼Œçªç„¶æç¤ºæ‰“ä¸å¼€ï¼Œä¸è¦æ…Œï¼Œé—®é¢˜ä¸å¤§ï¼ŒæŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤è¯•è¯•å…ˆï¼Ÿ</p>
<blockquote>
<p>æ‰“å¼€finder-&gt;åº”ç”¨ç¨‹åº-&gt;idea.app-&gt;å³é”®-&gt;æ˜¾ç¤ºåŒ…å†…å®¹-&gt;ç„¶åMaxOS-&gt;åŒå‡»shellè„šæœ¬ï¼ˆideaï¼‰</p>
</blockquote>
<a id="more"></a>

<p>è¿™æ ·æ˜¯é€šè¿‡å‘½ä»¤è¡Œçš„æ–¹å¼æ¥å¯åŠ¨IDEAã€‚<br>ä»”ç»†çœ‹é‡Œé¢çš„æç¤ºï¼Œå°¤å…¶Errorå¼€å¤´çš„ä¿¡æ¯ï¼Œåº”è¯¥ä¼šæœ‰å…·ä½“åŸå› ã€‚</p>
<p>æˆ‘çš„IDEA ä½¿ç”¨çš„â€œç ´è§£ç‰ˆâ€â€¦â€¦you knowï¼Ÿ ç„¶å<code>JetbrainsCrack-3.1-release-enc.jar</code> è¢«æˆ‘ä¸å°å¿ƒåˆ äº†ï¼Œæ”¾å›åŸä½å°±å¥½äº†â€¦â€¦</p>
]]></content>
  </entry>
  <entry>
    <title>Hexo æ–‡å­—ä¸­å¦‚ä½•æ’å…¥å›¾ç‰‡</title>
    <url>/2018/02/22/Hexo%E6%96%87%E5%AD%97%E4%B8%AD%E5%A6%82%E4%BD%95%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87/</url>
    <content><![CDATA[<p>åœ¨Hexo çš„æ–‡ç« ä¸­åŠ å…¥å›¾ç‰‡ï¼Œå¾ˆç®€å•çš„ï¼Œæ¥è¯•è¯•å…ˆï¼š</p>
<a id="more"></a>

<ul>
<li><p><strong>è®¾ç½®ç«™ç‚¹é…ç½®_config.yml</strong>:</p>
<p>å°† <code>post_asset_folder: false</code> æ”¹ä¸º <code>post_asset_folder: true</code></p>
</li>
<li><p><strong>å®‰è£…æ’ä»¶</strong>:</p>
<p> <code>npm install https://github.com/CodeFalling/hexo-asset-image -- save</code></p>
</li>
<li><p><strong>è¿è¡Œ</strong>:</p>
<p> <code>hexo n &quot;XXXXXX&quot;</code></p>
<p>ç”Ÿæˆ XXXXX.md åšæ–‡æ—¶å°±ä¼šåœ¨ <code>/source/_posts</code> ç›®å½•ä¸‹ç”Ÿæˆ XXXXXX çš„æ–‡ä»¶å¤¹ï¼Œå°†ä½ æƒ³åœ¨XXXXXæ–‡ç« ä¸­æ’å…¥çš„ç…§ç‰‡æ”¾ç½®åˆ°è¿™ä¸ªåŒåæ–‡ä»¶å¤¹ä¸­å³å¯ï¼Œå›¾ç‰‡çš„å‘½åéšæ„ã€‚</p>
</li>
<li><p><strong>æ·»åŠ å›¾ç‰‡</strong>:</p>
<p>åœ¨æƒ³æ·»åŠ çš„ä½ç½®å†™å…¥<code>![](å›¾ç‰‡åå­—.å›¾ç‰‡æ ¼å¼)</code>ï¼Œä¾‹å¦‚<code>![](1.png)</code></p>
</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>Warning! PATH is not properly set up, &#39;/Users/***/.rvm/gems/ruby-2.4.0/bin&#39; is not at first place.</title>
    <url>/2018/12/27/Warning!PATH-is/</url>
    <content><![CDATA[<p>å¿½ç„¶æœ‰ä¸€å¤©ã€‚ã€‚ã€‚ä½¿ç”¨ <code>cocoapods</code> å®‰è£…ä¸‰æ–¹åº“ä¸å¥½ä½¿äº†ï¼ŒæŠ¥äº†å¥½é•¿çš„é”™ã€‚ã€‚ã€‚</p>
<a id="more"></a>

<p>å‰<br>æ–¹<br>æœ‰<br>è¶…<br>é•¿<br>å›¾<br>ç‰‡<br>ï¼Œ<br>æ…<br>ç‚¹<br>ã€‚<br><img src="/2018/12/27/Warning!PATH-is/1.png" alt="error"></p>
<blockquote>
<p>æŒ‰ç…§é‡Œé¢çš„æç¤ºå»githubæœç´¢äº†cocoapodsä½¿ç”¨ä¸­çš„é—®é¢˜ï¼Œå¤šæ•°éƒ½æ˜¯è¯´ï¼Œé‡è£…gemã€‚ç¬”è€…ä¸æ˜¯å¾ˆæ‡‚è¿™äº›ï¼Œgemï¼Œrubyï¼Œcocoapodsï¼Œå…¨éƒ½æ›´æ–°äº†ä¸€éã€‚ä¾æ—§æ˜¯è¿™ä¸ªé—®é¢˜ã€‚</p>
</blockquote>
<p>ç¡äº†ä¸€è§‰é†’æ¥åï¼Œç¬”è€…è®¤çœŸçœ‹äº†çœ‹é”™è¯¯æç¤ºï¼Œæ³¨æ„åˆ°è¿™å¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">### Command<br><br>&#x2F;Users&#x2F;æˆ‘&#x2F;.rvm&#x2F;gems&#x2F;ruby-2.4.0&#x2F;bin&#x2F;pod install<br></code></pre></td></tr></table></figure>

<p>æ—¢ç„¶å‘½ä»¤æ‰§è¡Œæ–‡ä»¶åœ¨è¿™ä¸ªè·¯å¾„ä¸‹ï¼Œå¯èƒ½æ˜¯rvmå‡ºäº†é—®é¢˜ï¼Œæ‰§è¡Œ <code>rvm list</code>æŸ¥çœ‹rubyç‰ˆæœ¬<br><img src="/2018/12/27/Warning!PATH-is/2.png" alt="rvm list"></p>
<p>æ³¨æ„åˆ°é‡Œé¢æœ‰ä¸ª <code>Warningï¼</code> å’Œå‡ ä¸ªå»ºè®®çš„æ“ä½œï¼ˆåšäº†ä¹Ÿæ²¡ç”¨ï¼Œæ˜¯çš„ï¼Œæˆ‘è¯•è¿‡äº†ï¼‰ğŸ˜Œ</p>
<blockquote>
<p>Warning! PATH is not properly set up, â€˜/Users/***/.rvm/gems/ruby-2.4.0/binâ€™ is not at first place.<br>ä»¿ä½›æ˜¯åœ¨è¯´ï¼Œrubyä¸åœ¨æœ€åˆï¼Ÿé¦–å…ˆï¼Ÿç¬¬ä¸€ä¸ªä½ç½®ï¼Ÿ<br>æ€»ä¹‹æŸäº›ä¸œè¥¿è¢«æ”¹äº†ï¼ˆä½†æˆ‘çœŸçš„æ²¡åŠ¨ï¼‰</p>
</blockquote>
<p>æœ¬äººè„¾æ°”æš´èºï¼Œæ‰€ä»¥æƒ³ç€ï¼Œæ—¢ç„¶åŠ¨äº†ï¼Œé‚£å°±æš´åŠ›è¿˜åŸå§ï¼Œæ‰§è¡Œ <code>rvm -h</code> æŸ¥çœ‹rvm çš„ç¥æ“ä½œä»¬<br><img src="/2018/12/27/Warning!PATH-is/3.png" alt="rvm -h"></p>
<p>æ³¨æ„åˆ°äº†å›¾ä¸­çš„è¿™å‡ ä¸ªå‘½ä»¤ï¼š<code>rvm maintenance</code> rvm çš„ç»´æŠ¤ï¼Ÿäºæ˜¯ä¹è¯•äº†ä¸€ä¸‹<br><code>rvm reset</code><br><code>rvm reset</code><br><code>rvm reset</code><br><code>rvm reset</code><br><code>rvm reset</code><br>é‡è¦çš„ äº‹æƒ…è¯´äº”éã€‚<br>commandé‡Œå¹¶æ²¡æœ‰ä»€ä¹ˆè¾“å‡ºï¼Œä»¿ä½›ç§˜å¯†åšäº†ä¸€äº›äº‹æƒ…ï¼Œç„¶åå†è¯•äº†ä¸‹ <code>pod install</code> å°±ğŸ‘Œäº†ã€‚<br>çœ‹åˆ°äº†ä¹…è¿çš„ç»¿è‰²ï¼Œæ”¾å¿ƒäº†ã€‚<br><img src="/2018/12/27/Warning!PATH-is/4.png" alt="ç»¿è‰²èµ°ä¸€æ³¢"></p>
]]></content>
  </entry>
  <entry>
    <title>mailcore 2 iOS  ä¹‹äºŒ SMTP</title>
    <url>/2018/12/12/mailcore2-iOS%E4%B9%8B%E4%BA%8CSMTP/</url>
    <content><![CDATA[<p>èµ·æºè§ <a href="http://zhengyatian.github.io/2018/02/02/2018-02-02-mailcore-2-iOS-%E4%B9%8B%E4%B8%80-IMAP/">mailcore2-ios  ä¹‹ä¸€ IMAP</a></p>
<p>ä¸Šä¸€ç¯‡å¤§è‡´è¯´äº†ä¸‹IMAPåè®®ä¸­çš„ç®€å•ä½¿ç”¨ï¼Œçœ‹åˆ°æ–‡ç« æœ‰äººçœ‹ï¼Œä¸ºäº†æˆ‘çš„<code>ä¸‰ä¸ª</code>ğŸ‘¨â€ğŸ’»â€ğŸ‘¨â€ğŸ’»â€ğŸ‘¨â€ğŸ’»â€ç²‰ä¸ï¼Œé‚£æˆ‘ç»§ç»­æ›´æ–°ä¸€ä¸‹ï¼Œå¸Œæœ›å¯¹ä½ ä»¬æœ‰å¸®åŠ©ï¼Œä¹Ÿåšä¸ªæ²Ÿé€šäº¤æµã€‚</p>
<ul>
<li><p>IMAP <a href="http://zhengyatian.github.io/2018/02/02/2018-02-02-mailcore-2-iOS-%E4%B9%8B%E4%B8%80-IMAP/">mailcore2-ios  ä¹‹ä¸€ IMAP</a></p>
</li>
<li><p>SMTP</p>
  <a id="more"></a>

<ul>
<li>ç™»å½•/ç”¨æˆ·éªŒè¯</li>
<li>åˆ›å»ºé‚®ä»¶ä½“</li>
<li>é™„ä»¶æ·»åŠ </li>
<li>å‘é€</li>
<li>å‘é€æˆåŠŸå<code>æ‰‹åŠ¨</code>æ·»åŠ åˆ°<code>â€œå·²å‘é€â€</code>æ–‡ä»¶å¤¹</li>
</ul>
</li>
</ul>
<h5 id="SMTP"><a href="#SMTP" class="headerlink" title="SMTP"></a>SMTP</h5><h6 id="1ã€ç™»å½•-ç”¨æˆ·éªŒè¯"><a href="#1ã€ç™»å½•-ç”¨æˆ·éªŒè¯" class="headerlink" title="1ã€ç™»å½•/ç”¨æˆ·éªŒè¯"></a>1ã€ç™»å½•/ç”¨æˆ·éªŒè¯</h6><p>â€‹    ä¸è®ºå“ªç§åè®®ï¼Œéƒ½éœ€è¦å…ˆéªŒè¯é‚®ç®±åœ°å€/æœåŠ¡å™¨ã€å¯†ç ã€ç«¯å£ç­‰ï¼ŒSMTPä¹Ÿä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥ä¸éªŒè¯ï¼Œå¤§ä¸äº†å°±æ˜¯å‘ä¸å‡ºå»é‚®ä»¶ã€‚ã€‚ã€‚ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“ğŸ¤“</p>
<p>åˆ›å»ºsessionï¼Œéƒ½ç±»ä¼¼çš„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">self.smtpSession.hostname &#x3D; session.smtpHost;&#x2F;&#x2F;smtp.***.com<br>self.smtpSession.username &#x3D; session.username;&#x2F;&#x2F;littlecat@xxx.com.cn<br>self.smtpSession.password &#x3D; session.password;&#x2F;&#x2F;password<br>self.smtpSession.port     &#x3D; (unsigned int)session.smtpPort;&#x2F;&#x2F;25ã€465ã€587ï¼Ÿ<br>self.smtpSession.connectionType &#x3D; session.smtpIsSSL ? MCOConnectionTypeTLS: MCOConnectionTypeClear;&#x2F;&#x2F;å–å†³äºä½ çš„é‚®ä»¶æœåŠ¡å™¨æ˜¯ä¸æ˜¯SSLçš„ï¼›<br>self.smtpSession.authType &#x3D; MCOAuthTypeSASLLogin;&#x2F;&#x2F;sessionæ ¡éªŒçš„ç±»å‹ï¼Œè¿™é‡Œé€‰çš„ç™»å½•ï¼Œå…¶ä»–è¿˜æ²¡ææ˜ç™½(æ²¡çœ‹ã€‚ã€‚)ğŸ˜Œ<br></code></pre></td></tr></table></figure>

<p>æ ¡éªŒé‚®ç®±ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">MCOSMTPOperation *smtpOperation &#x3D; [smtpSession loginOperation];<br>[smtpOperation start:^(NSError * error) &#123;<br>    NSLog(@&quot;finished checking SMTP account.&quot;);<br>    if (error &#x3D;&#x3D; nil) &#123;<br>        &#x2F;&#x2F;now ,you can send email.<br>    &#125; else &#123;<br>        NSLog(@&quot;error check smtp account: %@&quot;, error);<br>    &#125;<br>&#125;];<br></code></pre></td></tr></table></figure>
<h6 id="2ã€åˆ›å»ºé‚®ä»¶"><a href="#2ã€åˆ›å»ºé‚®ä»¶" class="headerlink" title="2ã€åˆ›å»ºé‚®ä»¶"></a>2ã€åˆ›å»ºé‚®ä»¶</h6><ul>
<li>create message builder;</li>
<li>set sender(from)ã€receiverï¼ˆtoï¼‰ã€cc and bcc;</li>
<li>set body (html body  or  plain text body);</li>
</ul>
<p>æ‡’å¾—æ­£ç»æ‰“å­—äº†ï¼Œbite meï¼ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">- (void)messageBuildFrom:(NSString *)displayName &#x2F;&#x2F; å‘ä»¶äººæ˜µç§°ï¼Œå¯ä»¥ä¸è®¾ç½®ï¼›<br>                 mailBox:(NSString *)mail  &#x2F;&#x2F;å‘ä»¶äººé‚®ç®±åœ°å€ï¼›<br>                      to:(NSArray *)to  &#x2F;&#x2F;æ”¶ä»¶äººï¼ˆé‚®ç®±åœ°å€å­—ç¬¦ä¸²æ ¼å¼ï¼Œä¸‹åŒï¼‰ï¼›<br>                      cc:(NSArray *)cc  &#x2F;&#x2F;æŠ„é€äººï¼›<br>                     bcc:(NSArray *)bcc  &#x2F;&#x2F;å¯†é€äººï¼›<br>                 subject:(NSString *)subject  &#x2F;&#x2F;é‚®ä»¶ä¸»é¢˜ï¼›<br>                textBody:(NSString *)body  &#x2F;&#x2F;é‚®ä»¶æ­£æ–‡ï¼Œæˆ‘è¿™é‡Œæ˜¯å¸¦æ ‡ç­¾çš„htmlæ–‡æœ¬ï¼›<br>                 attachs:(NSDictionary *)attachs  &#x2F;&#x2F;é™„ä»¶sï¼ˆæ–‡ä»¶åç§°å’ŒNSDataæ ¼å¼æ•°æ®ï¼‰ï¼›<br>                htmlBody:(MCOAbstractMessage *)msgParser  &#x2F;&#x2F;è½¬å‘æ—¶çš„åŸé‚®ä»¶ï¼›<br>         completeHandler:(void(^)())complete<br>                   error:(void(^)(NSError *error))fail<br>&#123;<br>    MCOMessageBuilder *msgBuilder &#x3D; [[MCOMessageBuilder alloc] init];<br><br>    &#x2F;&#x2F;header;<br>    if (displayName !&#x3D; nil) &#123;<br>        msgBuilder.header.from &#x3D; [MCOAddress addressWithDisplayName:displayName mailbox:mail];<br>    &#125;else&#123;<br>        msgBuilder.header.from &#x3D; [MCOAddress addressWithMailbox:mail];<br>    &#125;<br>    msgBuilder.header.to      &#x3D; [self mailStringToMCOAddress:to];&#x2F;&#x2F;å­—ç¬¦ä¸²æ ¼å¼çš„é‚®ç®±åœ°å€ï¼Œè¦è½¬æˆaddressç±»ï¼›<br>    msgBuilder.header.cc      &#x3D; [self mailStringToMCOAddress:cc];<br>    msgBuilder.header.bcc     &#x3D; [self mailStringToMCOAddress:bcc];<br>    msgBuilder.header.subject &#x3D; subject;<br><br>    &#x2F;&#x2F;body<br>    [msgBuilder setHTMLBody:body];<br>    <br>    &#x2F;&#x2F;------è§ä¸‹<br>&#125;<br><br>- (NSArray *)mailStringToMCOAddress:(NSArray *)arr<br>&#123;<br>    NSMutableArray *temp &#x3D; [NSMutableArray array];<br>    for (NSString *str in arr) &#123;<br>        MCOAddress *add &#x3D; [MCOAddress addressWithMailbox:str];<br>        [temp addObject:add];<br>    &#125;<br>    return temp.copy;<br>&#125;<br></code></pre></td></tr></table></figure>
<h6 id="3ã€é™„ä»¶å¤„ç†"><a href="#3ã€é™„ä»¶å¤„ç†" class="headerlink" title="3ã€é™„ä»¶å¤„ç†"></a>3ã€é™„ä»¶å¤„ç†</h6><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">- (void)messageBuildFrom:(NSString *)displayName<br>                 mailBox:(NSString *)mail<br>                      to:(NSArray *)to<br>                      cc:(NSArray *)cc<br>                     bcc:(NSArray *)bcc<br>                 subject:(NSString *)subject<br>                textBody:(NSString *)body<br>                 attachs:(NSDictionary *)attachs<br>                htmlBody:(MCOAbstractMessage *)msgParser<br>         completeHandler:(void(^)())complete<br>                   error:(void(^)(NSError *error))fail<br>&#123;<br>    MCOMessageBuilder *msgBuilder &#x3D; [[MCOMessageBuilder alloc] init];<br><br>    &#x2F;&#x2F; -------è§ä¸Š ã€‚ã€‚ã€‚ ------&#x2F;&#x2F;<br>    if (msgParser !&#x3D; nil) &#123;<br>        &#x2F;&#x2F;é™„åŠ èµ„æºï¼Œ<br>        NSArray *inAttach &#x3D; msgParser.htmlInlineAttachments;<br>        for (MCOAttachment *attach in inAttach) &#123;<br>            NSString * path &#x3D; [NSTemporaryDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@&quot;%@_%@&quot;,msgParser.header.messageID,attach.filename]];<br>            NSData *data &#x3D; [NSData dataWithContentsOfFile:path];<br>            if (data) &#123;<br>                MCOAttachment *temp &#x3D; [MCOAttachment attachmentWithData:data filename:attach.filename];<br>                temp.inlineAttachment &#x3D; YES;<br>                [msgBuilder addRelatedAttachment:temp];<br>            &#125;<br>        &#125;<br>    &#125;<br>    &#x2F;&#x2F;çœ‹æ¥å£æ–‡æ¡£çš„æ„æ€ï¼Œä¸Šé¢æ˜¯æŠŠè½¬å‘çš„é‚®ä»¶ä¸­çš„é™„ä»¶æ·»åŠ ä¸Šï¼Œ<br>    &#x2F;&#x2F;å¯æ˜¯å¹¶ä¸èµ·ä½œç”¨ã€‚ã€‚ã€‚é‡‡å–çš„æ–¹æ³•æ˜¯ï¼Œä¸‹é¢å¾ªç¯å†æ·»åŠ ä¸€æ¬¡ã€‚ã€‚ã€‚ã€‚ğŸ¤§ğŸ¤§ğŸ¤§ğŸ¤§ğŸ¤§<br><br>    &#x2F;&#x2F;é™„ä»¶<br>    if (attachs) &#123;<br>        for (NSString *name in attachs.allKeys) &#123;<br>            MCOAttachment *attach &#x3D; [MCOAttachment attachmentWithData:[attachs objectForKey:name] filename:name];<br>            [msgBuilder addAttachment:attach];<br>        &#125;<br>    &#125;<br><br>    &#x2F;&#x2F;send<br>    &#x2F;&#x2F;--------è§ä¸‹<br>&#125;<br></code></pre></td></tr></table></figure>

<h6 id="4ã€å‘é€é‚®ä»¶"><a href="#4ã€å‘é€é‚®ä»¶" class="headerlink" title="4ã€å‘é€é‚®ä»¶"></a>4ã€å‘é€é‚®ä»¶</h6><p>é‚®ä»¶ä¹Ÿåˆ›å»ºäº†ï¼Œé™„ä»¶æ·»åŠ å®Œï¼Œç»ˆäºè¦å‘é€äº†ï¼Œä½†æ˜¯è¦æ³¨æ„çš„æ˜¯<code>å‘é€æ“ä½œæˆåŠŸå®Œæˆåï¼Œå¯¹æ–¹ç¡®å®å¯ä»¥æˆåŠŸæ”¶åˆ°ï¼Œä½†æ˜¯åœ¨å‘é€æ–¹çš„â€œå·²å‘é€â€æ˜¯æ²¡æœ‰çš„ï¼Œéœ€è¦æ‰‹åŠ¨appendä¸€ä»½è¿‡å»</code>ã€‚<br>æ‰§è¡Œappendæ“ä½œï¼Œéœ€è¦ç”¨<code>imapSession</code>çš„ï¼Œä¸è¦æé”™äº†ã€‚ğŸ˜…<br> â€œå·²å‘é€â€æ–‡ä»¶å¤¹çš„filepathï¼Œå¯èƒ½æ˜¯ <code>Sentã€Sent Messages</code>ç­‰ç­‰ï¼Œå…·ä½“çœ‹ä½ è§£æçš„é‚®ç®±æœåŠ¡å™¨ï¼Œä¸ä¸€å®šéƒ½æ˜¯Sent å“¦ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F;send<br>NSData *rfc822 &#x3D; [msgBuilder data];<br>MCOSMTPSendOperation *send &#x3D; [smtpSession sendOperationWithData:rfc822];<br>[send start:^(NSError * _Nullable error) &#123;<br>    if (error) &#123;<br>        fail(error);<br>    &#125;else &#123;<br>        &#x2F;&#x2F;å‘é€æˆåŠŸåï¼Œæ‰‹åŠ¨æ·»åŠ åˆ°â€œå·²å‘é€â€ï¼›<br>        MCOIMAPAppendMessageOperation *op &#x3D; [imapSession appendMessageOperationWithFolder:[MMIMAPTool getVirtualNameFor:@&quot;Sent&quot;] messageData:rfc822 flags:MCOMessageFlagMDNSent];<br>        [op start:^(NSError *error, uint32_t createdUID) &#123;<br>            NSLog(@&quot;create sent message :%@\nerror:%@&quot;, @(createdUID), error);<br>        &#125;];<br>        complete();<br>    &#125;<br>&#125;];<br></code></pre></td></tr></table></figure>
<p>æ³¨ï¼šä¸Šä¸€ç¯‡IMAPä½¿ç”¨ä¸­æåˆ°è¿‡ï¼Œåˆ›å»ºè‰ç¨¿ï¼Œè¿‡ç¨‹å’Œè¿™ä¸ªç±»ä¼¼ï¼Œä¸è¿‡æœ€åæ‰§è¡Œappend æ˜¯ æ”¾åˆ° <code>è‰ç¨¿ç®±</code>ï¼Œä¸æ˜¯<code>å·²å‘é€</code>äº†ã€‚</p>
<h5 id="POP-è¿˜æ²¡å†™"><a href="#POP-è¿˜æ²¡å†™" class="headerlink" title="POP è¿˜æ²¡å†™"></a>POP <a href>è¿˜æ²¡å†™</a></h5>]]></content>
  </entry>
  <entry>
    <title>åƒé¥­å•¦</title>
    <url>/2020/05/22/%E5%90%83%E9%A5%AD%E5%95%A6/</url>
    <content><![CDATA[<p><img src="/2020/05/22/%E5%90%83%E9%A5%AD%E5%95%A6/0522lunch.jpg" alt></p>
<p>å°±ç®—ä¸€ä¸ªäººåœ¨å®¶æ¬¡é¥­ï¼Œä¹Ÿè¦å…ƒæ°”æ»¡æ»¡çš„å“¦ï¼Œä»‹ç»ä¸€ä¸‹è¿™ä¸ªå°èœå•å§ï¼Œå“ˆå“ˆï¼š</p>
<p>ğŸŸğŸŸğŸŸğŸŸæ¸…çƒ¤å¤šæ˜¥é±¼</p>
<blockquote>
<p>äº¬éƒ½å¤šæ˜¥é›¨ï¼Œå›é¦–å¤šæ˜¥å…‰ã€‚å…¬å­å¤šæ˜¥æƒ…ï¼Œç»¿è‰å¤šæ˜¥èŠ³ã€‚å…«è½½å¤šæ˜¥ä¼¤ï¼Œæ©™å­å¤šæ˜¥é±¼ã€‚</p>
</blockquote>
<a id="more"></a>

<p>â€‹    å¤šæ˜¥é±¼çš„åå­—èµ·å¾—å¯ä»¥è¯´éå¸¸è´´åˆ‡ï¼Œå››å­£å¤šå­ï¼Œæ»¡è…¹é±¼å­ï¼Œåƒèµ·æ¥Qå¼¹åˆæœ‰è¥å…»ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">æ‹”æ‰é±¼é³ƒå’Œå†…è„<br>åŠ ä¸€äº›æ–™é…’å‘€ã€ç”Ÿå§œå‘€ã€èƒ¡æ¤’ç²‰ è…Œ10åˆ†é’Ÿå°±å¯ä»¥å–½<br>çƒ¤ç®±ä¸Šä¸‹220é¢„çƒ­5åˆ†é’Ÿï¼Œçƒ˜çƒ¤æ—¶é—´è®¾ç½®ä¸º15åˆ†é’Ÿ<br>é¢„çƒ­æœŸé—´å¯ä»¥å‡†å¤‡åˆ·æ²¹äº†ï¼Œè½»è½»åˆ·ä¸€ç‚¹å°±å¥½äº†ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯æ¸…çƒ¤å˜›ï¼Œå˜»å˜»~~<br></code></pre></td></tr></table></figure>



<p>ğŸ†æ¸…è’¸èŒ„å­</p>
<p>æ¸…è’¸èŒ„å­æ˜¯æˆ‘å¤å¤©æœ€å–œæ¬¢åƒçš„ä¸€é“èœï¼Œçˆ½å£åˆæ²¡æœ‰çƒ­é‡ğŸ˜³</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">èŒ„å­æ´—å‡€åˆ‡ç‰‡ï¼Œä¸Šé”…è’¸<br>å‡†å¤‡è’œå’Œé¦™æ²¹ï¼Œè’œåˆ‡æœ«å¤‡ç”¨ï¼Œçœ‹è‡ªå·±å–œå¥½æ”¾å¤šå°‘å§<br>èŒ„å­æ•´å¥½ä»¥åï¼Œæ”¾åœ¨å®¹å™¨ä¸­ï¼ŒåŠ å…¥ç›ã€è’œæœ«ã€é¦™æ²¹å‡ æ»´<br>å¯ä»¥å¼€åŠ¨äº†ï¼Œé¦™å–·å–·ç¾æ»‹æ»‹å‘€<br></code></pre></td></tr></table></figure>

<p>PSï¼šæˆ‘ä¸ªäººå¾ˆå–œæ¬¢åœ¨èœé‡Œæ”¾å¤§è’œï¼Œå› ä¸ºåƒå¤§è’œå¯ä»¥è®©äººå¿«ä¹ã€‚å“ˆå“ˆã€‚</p>
<p>ğŸŒ²å¦ä¸€ä¸ªèœå«ä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å…¶å®æˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œå“ˆå“ˆï¼ŒåœŸè±†ã€é’æ¤’ã€æ´‹è‘±å¤§æ‚çƒ©ï¼Œåˆ‡æˆå°ç‰‡ï¼Œä¸€èµ·ç¿»ç‚’ï¼Œå–œæ¬¢åƒè‚‰å¯ä»¥æ”¾ç‚¹è‚‰ç²’ï¼Œæˆ‘ä¸å–œæ¬¢ï¼Œæ‰€ä»¥æ˜¯ç´ ç‚’çš„ã€‚</p>
<p>ğŸšæœ€åé…ä¸Šä¸€ç¢—ç™½ç±³é¥­ï¼Œå¯ä»¥å¼€åŠ¨å•¦<del>~</del></p>
<p>å•èº«ç‹—ä»¬çœ‹å®Œä¼šä¸ä¼šè§‰å¾—å¾ˆéº»çƒ¦å‘¢ï¼Œä¸€ä¸ªäººåšè¿™ä¹ˆå¤šè¦å¤šä¹…å‘€ï¼Œå¥½çƒ¦ã€‚å‘ï¼Œæ—¶é—´ç®¡ç†å¤§å¸ˆè¯´è¿‡(ä¸æ˜¯ç½—å¿—ç¥¥ğŸ™…â€â™‚ï¸)ï¼Œæ‰€æœ‰çš„ä»»åŠ¡è¦åŒºåˆ†å¥½ï¼Œå¹¶è¡Œå’Œä¸²è¡Œï¼æ‹¿æˆ‘ä»¬è¿™æ¬¡çš„åˆé¤ä¸¾ä¾‹ï¼š</p>
<blockquote>
<p>è’¸ğŸš -&gt; å¤„ç†ğŸ† -&gt; ä¸Šé”…è’¸ -&gt; å¤„ç†ğŸŸ + åˆ‡åœŸè±†ç­‰ç­‰ -&gt; ğŸŸè¿›çƒ¤ç®± -&gt; ğŸ†å‡ºé”… -&gt; ç‚’å¤§æ‚çƒ© = åƒé¥­å•¦<del>~</del></p>
</blockquote>
<p>ä¸ºä»€ä¹ˆåˆ†äº«ç¾é£Ÿå‘¢ï¼Œå…¶å®æˆ‘å°±æ˜¯è¯•ä¸€ä¸‹å›¾ç‰‡ä¸ºä»€ä¹ˆåŠ ä¸è¿›å»äº†ï¼Œç°åœ¨å¥½äº†<del>~</del>QTQ</p>
]]></content>
  </entry>
  <entry>
    <title>å»æ‰UIWebViewåº•éƒ¨çš„é»‘æ¡</title>
    <url>/2018/12/13/%E5%8E%BB%E6%8E%89UIWebView%E5%BA%95%E9%83%A8%E7%9A%84%E9%BB%91%E6%9D%A1/</url>
    <content><![CDATA[<p>webview åœ¨å¤šæ¬¡åˆ·æ–°å†…å®¹åï¼Œæ­£æ–‡çš„ä¸‹é¢æœ‰ä¸€å—è«åå…¶å¦™çš„é»‘è‰²åŒºåŸŸï¼Œå¦‚å›¾ä¸€ï¼Œæœ¬ä»¥ä¸ºæ˜¯ç”±äºæˆ‘æ”¹äº†â€œUIWebDocumentViewâ€ çš„åŸå› ï¼Œçœ‹åˆ°è¿™ä¸ªå±æ€§æ”¹äº†ä¸€ä¸‹ï¼Œå‘ç°å±…ç„¶å¥½äº†ã€‚ã€‚ã€‚<br><code>opaque é»˜è®¤æ˜¯YES</code><br>æ”¹ä¸º <code>self.webView.opaque = NO;</code></p>
<a id="more"></a>

<p><img src="/2018/12/13/%E5%8E%BB%E6%8E%89UIWebView%E5%BA%95%E9%83%A8%E7%9A%84%E9%BB%91%E6%9D%A1/1.png" alt="å›¾ä¸€"></p>
<p><img src="/2018/12/13/%E5%8E%BB%E6%8E%89UIWebView%E5%BA%95%E9%83%A8%E7%9A%84%E9%BB%91%E6%9D%A1/2.png" alt="å›¾äºŒ"></p>
<p>çœ‹æ–‡æ¡£é‡Œé¢çš„æ³¨é‡Šï¼Œå‘ç°ï¼Œæˆ‘çš„è‹±æ–‡çœŸçš„ä¸å’‹åœ°ï¼Œè‡ªå·±ç¿»è¯‘å§ã€‚ã€‚ã€‚ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">@property(nonatomic,getter&#x3D;isOpaque) BOOL  opaque;                     <br>&#x2F;&#x2F; default is YES. opaque views must fill their entire bounds or the results are undefined. <br>&#x2F;&#x2F;the active CGContext in drawRect: will not have been cleared and may have non-zeroed pixels<br></code></pre></td></tr></table></figure>
]]></content>
  </entry>
  <entry>
    <title>mailcore 2  iOS  ä¹‹ä¸€ IMAP</title>
    <url>/2018/02/02/mailcore2-iOS%E4%B9%8B%E4%B8%80IMAP/</url>
    <content><![CDATA[<p>å…¬å¸å¼€å‘oaä¸­çš„é‚®ç®±ï¼Œèµ„æºé™åˆ¶ï¼Œæœ€åiOSå¼€å‘é‡‡ç”¨çš„mailcore2-iosæ¡†æ¶ã€‚ç ”ç©¶çš„ä¸æ·±ï¼Œåªå½“åšä¸ªåˆ†äº«ï¼Œå£æ¡ä¸å¥½ï¼Œå‡‘åˆçœ‹å§ã€‚</p>
<h5 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h5><p>æˆ‘ç›´æ¥ç”¨çš„cocoapodsï¼Œéå¸¸æ–¹ä¾¿ï¼Œåªæ˜¯èµ„æºåŒ…å¤§äº†ä¸€ç‚¹ï¼Œè€å¿ƒç­‰å¾…å°±å¥½äº†ï¼Œå…¶ä»–æ–¹å¼æ²¡è¯•è¿‡ã€‚<br><code>pod &#39;mailcore2-ios&#39;</code></p>
<p><a href="https://github.com/MailCore/mailcore2" target="_blank" rel="noopener">https://github.com/MailCore/mailcore2</a> å®˜æ–¹ï¼Œæœ‰é—®é¢˜æissueï¼Œå¼€å‘è€…ä¼šå¾ˆçƒ­å¿ƒå›ç­”çš„ã€‚</p>
<a id="more"></a>

<h5 id="æ›´æ–°-çº é”™æ—¥å¿—"><a href="#æ›´æ–°-çº é”™æ—¥å¿—" class="headerlink" title="æ›´æ–°/çº é”™æ—¥å¿—"></a>æ›´æ–°/çº é”™æ—¥å¿—</h5><ul>
<li>2018-12-11 çº é”™ï¼šIMAP-4.å•å°é‚®ä»¶è·å–å’Œå¤„ç†.æ ¹æ®uidè·å–å•å°é‚®ä»¶ æœ‰è¯¯ï¼Œ<code>rangeçš„èŒƒå›´åº”è¯¥æ˜¯ï¼ˆuid, 0ï¼‰ï¼Œè€Œä¸æ˜¯(uid, 1)ï¼Œè¿™æ ·è·å–åˆ°çš„æ˜¯ä¸¤å°</code>ï¼Œè„‘å­ç§€é€—äº†ã€‚</li>
<li>2018-12-11 æ›´æ–°ï¼šåˆ›å»ºè‰ç¨¿é‚®ä»¶</li>
<li>2018-12-12 æ›´æ–°ï¼šSMTPåè®®</li>
</ul>
<h5 id="å¼€å‘"><a href="#å¼€å‘" class="headerlink" title="å¼€å‘"></a>å¼€å‘</h5><p>ä¸ªäººæ¯”è¾ƒå–œæ¬¢imapåè®®ï¼ŒåŠŸèƒ½æ¯”è¾ƒä¸°å¯Œï¼Œä¸è¿‡ç”¨mailcoreæèµ·æ¥ä¼¼ä¹è´¹åŠ²äº†ä¸€ç‚¹ï¼Œæˆ‘ä¹Ÿåªæ˜¯å®ç°äº†ä¸€äº›åŸºæœ¬åŠŸèƒ½ï¼Œé«˜çº§çš„è¿˜åœ¨ç ”ç©¶ã€‚</p>
<p>è®¡åˆ’åˆ†äº«ä¸€ä¸‹ä¸‹é¢å‡ é¡¹ğŸ¤—ğŸ¤—ğŸ¤—ğŸ¤—ğŸ¤—</p>
<ul>
<li>IMAP<ul>
<li>ç™»å½•</li>
<li>æ–‡ä»¶å¤¹åˆ—è¡¨ã€å‘½åç©ºé—´</li>
<li>é‚®ä»¶åˆ—è¡¨æ‹‰å–</li>
<li>é‚®ä»¶åˆ—è¡¨ä¸­å•å°é‚®ä»¶å†…å®¹è·å–å’Œå¤„ç†</li>
<li>é‚®ä»¶çš„å„ç§æ ‡è®°æ·»åŠ </li>
<li>åˆ é™¤é‚®ä»¶</li>
<li>é™„ä»¶å’Œhtmlå†…å®¹è§£æ</li>
<li>è‰ç¨¿ç®±é‚®ä»¶åˆ›å»º</li>
</ul>
</li>
<li>POP</li>
<li>SMTP<ul>
<li>è§<a href="http://zhengyatian.github.io/2018/12/12/2018-12-12-mailcore-2-iOS-%E4%B9%8B%E4%BA%8C-SMTP/">mailcore2-ios  ä¹‹äºŒ SMTP</a></li>
</ul>
</li>
</ul>
<h5 id="IMAP"><a href="#IMAP" class="headerlink" title="IMAP"></a>IMAP</h5><h6 id="1-ç™»å½•"><a href="#1-ç™»å½•" class="headerlink" title="1.ç™»å½•"></a>1.ç™»å½•</h6><p>é¦–å…ˆè®¾ç½®è´¦å·ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯åˆ›å»ºsessionï¼›ç„¶åæ ¡éªŒï¼›</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">self.imapSession.hostname &#x3D; session.imapHost; &#x2F;&#x2F;imap.xxx.com.cn<br>self.imapSession.username &#x3D; session.username; &#x2F;&#x2F;littlecat@xxx.com.cn<br>self.imapSession.password &#x3D; session.password; &#x2F;&#x2F;password<br>self.imapSession.port     &#x3D; (unsigned int)session.imapPort;&#x2F;&#x2F;143ã€993<br>self.imapSession.connectionType &#x3D; session.imapIsSSL ? MCOConnectionTypeTLS: MCOConnectionTypeClear;&#x2F;&#x2F;å–å†³äºä½ çš„é‚®ä»¶æœåŠ¡å™¨æ˜¯ä¸æ˜¯SSLçš„ï¼›<br></code></pre></td></tr></table></figure>

<p>æ ¡éªŒä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">MCOIMAPOperation *checkOp &#x3D; [session checkAccountOperation];&#x2F;&#x2F;è¿™é‡Œçš„sessionå°±æ˜¯é…ç½®å¸å·ä¿¡æ¯çš„session<br>[checkOp start:^(NSError *error) &#123;<br>     NSLog(@&quot;finished checking account.&quot;);<br>     if (error &#x3D;&#x3D; nil) &#123;<br>         complete(nil);<br>     &#125; else &#123;<br>         err(error);<br>         NSLog(@&quot;error loading account: %@&quot;, [error userInfo][@&quot;NSLocalizedDescription&quot;]);<br>    &#125;<br>&#125;];<br></code></pre></td></tr></table></figure>
<h6 id="2-è·å–æ–‡ä»¶å¤¹ç›®å½•"><a href="#2-è·å–æ–‡ä»¶å¤¹ç›®å½•" class="headerlink" title="2.è·å–æ–‡ä»¶å¤¹ç›®å½•"></a>2.è·å–æ–‡ä»¶å¤¹ç›®å½•</h6><p>å‘½åç©ºé—´ï¼šå®ƒè¿™é‡Œæœ‰ä¸ªnamespaceï¼Œå¯¹äº<code>ä¸­æ–‡åç§°</code>çš„ğŸ“‚åç§°ï¼Œéœ€è¦é€šè¿‡<code>å‘½åç©ºé—´</code>æ¥è§£æï¼Œ<code>ä¸ç„¶å¾ˆå¯èƒ½æ˜¯ğŸ‘‡è¿™ç§ä¹±ç </code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F;è¿™æ˜¯å½“æ—¶è§£æç½‘æ˜“é‚®ç®±çš„ä¹±ç ï¼Œæ‰¾åŸå› æ‰¾äº†å¥½ä¹…ğŸ˜­ğŸ˜­ğŸ˜­ï¼Œåœ¨ä¸€ç¯‡åšå®¢ä¸Šçœ‹åˆ°çš„è§£å†³åŠæ³•ã€‚<br>INBOX<br>&amp;g0l6P3ux-<br>&amp;XfJT0ZAB-<br>&amp;XfJSIJZk-<br>&amp;V4NXPpCuTvY-<br>&amp;dcVr0mWHTvZZOQ-<br>&amp;Xn9USpCuTvY-<br>&amp;i6KWBZCuTvY-<br>Deleted Messages<br>Archive<br>Junk<br></code></pre></td></tr></table></figure>
<p>å…ˆæŠŠæ­£ç¡®çš„æ”¾å‡ºæ¥ï¼Œæ‰¾å›ç‚¹èµ°ä¸‹å»çš„ä¿¡å¿ƒğŸ’”ğŸ’”ğŸ’—ğŸ’–â€¦</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">INBOX<br>è‰ç¨¿ç®±<br>å·²å‘é€<br>å·²åˆ é™¤<br>åƒåœ¾é‚®ä»¶<br>ç—…æ¯’æ–‡ä»¶å¤¹<br>å¹¿å‘Šé‚®ä»¶<br>è®¢é˜…é‚®ä»¶<br>Deleted Messages<br>Archive<br>Junk<br></code></pre></td></tr></table></figure>
<p>å› ä¸º<code>æŸäº›é‚®ç®±çš„sessionè«åå…¶å¦™æ²¡æœ‰è‡ªå¸¦é»˜è®¤çš„å‘½åç©ºé—´</code>ï¼Œæˆ‘é‡‡å–çš„ç¬¨åŠæ³•æ˜¯å…ˆå»è·å–ä¸€ä¸‹namespaceï¼Œä¸è¿‡å˜›ï¼Œï¼Œï¼Œå±…ç„¶è·å–åˆ°çš„ä¹Ÿæ—¶æœ‰æ—¶æ— ğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±ğŸ˜±</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">MCOIMAPSession *session &#x3D; [MMIMAPTool getSession];<br>MCOIMAPFetchNamespaceOperation * op &#x3D; [session fetchNamespaceOperation];<br>[op start:^(NSError * __nullable error, NSDictionary * namespaces) &#123;<br>     MCOIMAPNamespace * namespace &#x3D; (session.defaultNamespace !&#x3D; nil) ? session.defaultNamespace : [namespaces objectForKey:MCOIMAPNamespacePersonal];<br>    if (!namespace) &#123;<br>        &#x2F;&#x2F;æ²¡æœ‰å‘½åç©ºé—´ï¼Œå¾ˆå¯èƒ½æ–‡ä»¶å¤¹çš„åå­—è§£æå‡ºæ¥æ˜¯ä¹±ç ï¼Œè¿™ä¸ªçœ‹ä¸ªäººæ€ä¹ˆå¤„ç†å§ï¼›<br>        return ;<br>    &#125;<br>    &#x2F;&#x2F;å¦‚æœæ‹¿åˆ°äº†namespaceï¼Œå¯ä»¥å®‰å¿ƒè·å–folderlistäº†<br>&#125;];<br></code></pre></td></tr></table></figure>
<p>å…³é”®çš„ä¸€å¥ï¼š<code>NSString *folername = [namespace componentsFromPath:f.path][0];</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">MCOIMAPFetchFoldersOperation * ops &#x3D; [session fetchAllFoldersOperation];<br>[ops start:^(NSError * error,NSArray *folders) &#123;<br>   if (error) &#123;<br>      return ;<br>   &#125;<br>   NSMutableDictionary *dic &#x3D; [NSMutableDictionary dictionary];<br>   for (MCOIMAPFolder *f in folders) &#123;<br>      NSString *folername &#x3D; [namespace componentsFromPath:f.path][0];<br>      [dic setValue:f.path forKey:folername];<br>   &#125;<br>  &#x2F;&#x2F;ç»§ç»­å…¶ä»–å¤„ç†ï¼›<br>&#125;];<br></code></pre></td></tr></table></figure>
<p>è·å–æŸä¸ªæ–‡ä»¶å¤¹çš„mailæ•°ç›®ç­‰ä¿¡æ¯</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">MCOIMAPFolderInfoOperation *folderInfo &#x3D; [session folderInfoOperation:foldername];<br><br>[folderInfo start:^(NSError *error, MCOIMAPFolderInfo *info) &#123;<br>    if (error) &#123;    <br>        return ;<br>     &#125;<br>    complete(info.messageCount);<br>&#125;];<br></code></pre></td></tr></table></figure>

<h6 id="3-æ‹‰å–æŸä¸ªæ–‡ä»¶å¤¹é‚®ä»¶åˆ—è¡¨"><a href="#3-æ‹‰å–æŸä¸ªæ–‡ä»¶å¤¹é‚®ä»¶åˆ—è¡¨" class="headerlink" title="3.æ‹‰å–æŸä¸ªæ–‡ä»¶å¤¹é‚®ä»¶åˆ—è¡¨"></a>3.æ‹‰å–æŸä¸ªæ–‡ä»¶å¤¹é‚®ä»¶åˆ—è¡¨</h6><figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F;è¿™é‡Œçš„kindæˆ‘è§‰å¾—æ˜¯éœ€è¦æ‹‰å–çš„å†…å®¹ä»¬ï¼Œæˆ‘æ˜¯å‡ ä¹å¤§éƒ¨åˆ†éƒ½downäº†ï¼Œå¯ä»¥çœ‹æƒ…å†µè‡ªå·±é€‰æ‹©ï¼›<br>&#x2F;&#x2F;æ‹‰å–èŒƒå›´ï¼Œï¼ˆ0ï¼ŒUINT64_MAXï¼‰å°±æ˜¯éƒ½æ‹‰å–äº†ï¼Œæˆ‘æ˜¯10æ¡10æ¡çš„æ¥çš„ã€‚<br>MCOIMAPMessagesRequestKind requestKind &#x3D; (MCOIMAPMessagesRequestKind)<br>(MCOIMAPMessagesRequestKindHeaders |<br> MCOIMAPMessagesRequestKindStructure |<br> MCOIMAPMessagesRequestKindInternalDate|<br> MCOIMAPMessagesRequestKindHeaderSubject |<br> MCOIMAPMessagesRequestKindFlags);<br><br>MCOIndexSet *uids &#x3D; [MCOIndexSet indexSetWithRange:MCORangeMake(range.location, range.length)];&#x2F;&#x2F;rangeæ§åˆ¶æ‹‰å–çš„é‚®ä»¶çš„èŒƒå›´ï¼ŒUINT64_MAX<br>MCOIMAPFetchMessagesOperation *op &#x3D; [session fetchMessagesOperationWithFolder:foldername requestKind:requestKind uids:uids];<br>[op start:^(NSError * _Nullable error, NSArray * _Nullable messages, MCOIndexSet * _Nullable vanishedMessages) &#123;<br>     NSMutableArray *listArr &#x3D; [NSMutableArray array];<br>     NSInteger count &#x3D; messages.count;<br>     for (int i &#x3D; 0; i &lt; count; i ++) &#123;<br>            MCOIMAPMessage *msg &#x3D; messages[i];<br>            &#x2F;&#x2F;ä¸€å †å±æ€§ï¼Œè‡ªå·±æ‘˜å–å§ï¼Œå¤§å¤šæ˜¯headeré‡Œçš„ï¼Œä¸ºäº†æ˜¾ç¤ºé‚®ä»¶åˆ—è¡¨ï¼Œé‚®ä»¶å†…å®¹æ˜¯å¦å¤–å•ç‹¬è·å–çš„ï¼Œå­˜å‚¨ä¹Ÿåªæ˜¯å­˜å‚¨äº†åˆ—è¡¨ï¼›<br>    &#125;<br><br>    &#x2F;&#x2F;åˆæ‹äº†ä¸€æ¬¡é¡ºåºï¼Œå¥½åƒæœ‰ç‚¹è ¢ğŸ™„ğŸ™„ğŸ™„ğŸ™„ğŸ™„ã€‚ã€‚ã€‚æˆ‘æ˜¯æ ¹æ®uidæ’åºçš„ï¼Œç›®å‰è¿˜æ²¡å‘ç°ä¹±åºä»€ä¹ˆçš„<br>    NSSortDescriptor *sortDescriptor &#x3D; [NSSortDescriptor sortDescriptorWithKey:@&quot;uid&quot; ascending:NO];<br>    [listArr sortUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];<br>&#125;];<br></code></pre></td></tr></table></figure>
<p>è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯å®åœ¨æ²¡å¤ªææ‡‚é‡Œé¢çš„numberå‚æ•°ï¼Œæ–‡æ¡£é‡Œè¯´sequence numberä¸èƒ½æ’åºç”¨ï¼Œæ‰€ä»¥æˆ‘æ²¡é€‰æ‹©è¿™ä¸ªæ–¹æ³•ï¼Œä¸»è¦æ˜¯æ²¡æ‡‚ğŸ‘ºğŸ‘ºğŸ‘ºğŸ‘ºğŸ‘ºğŸ‘ºğŸ‘º</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F;Returns an operation to fetch messages by (sequence) number.<br>- (MCOIMAPFetchMessagesOperation *) fetchMessagesByNumberOperationWithFolder:(NSString *)folder<br>                                                                 requestKind:(MCOIMAPMessagesRequestKind)requestKind<br>                                                                     numbers:(MCOIndexSet *)numbers;<br></code></pre></td></tr></table></figure>
<h6 id="4-å•å°é‚®ä»¶è·å–å’Œå¤„ç†"><a href="#4-å•å°é‚®ä»¶è·å–å’Œå¤„ç†" class="headerlink" title="4.å•å°é‚®ä»¶è·å–å’Œå¤„ç†"></a>4.å•å°é‚®ä»¶è·å–å’Œå¤„ç†</h6><ul>
<li><p>æ ¹æ®uidè·å–å•å°é‚®ä»¶</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F;å’Œè·å–é‚®ä»¶åˆ—è¡¨ä¸€æ ·ï¼Œä¸è¿‡rangeçš„é•¿åº¦æ˜¯0ï¼›<br>MCOIndexSet *uids &#x3D; [MCOIndexSet indexSetWithRange:MCORangeMake(uid, 0)];<br>&#x2F;&#x2F;ä¹‹å‰å†™é”™äº†ï¼Œrangeé•¿åº¦åº”è¯¥æ˜¯0ï¼Œè€Œä¸æ˜¯1ï¼›<br>&#x2F;&#x2F;MCOIndexSet *uids &#x3D; [MCOIndexSet indexSetWithRange:MCORangeMake(uid, 1)];<br></code></pre></td></tr></table></figure>
</li>
<li><p>è·å–é‚®ä»¶çº¯æ–‡æœ¬å†…å®¹ï¼ˆä¸åŒ…æ‹¬htmlæ ·å¼ç­‰ï¼‰</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&#123;<br>     &#x2F;&#x2F;è¿™é‡Œæ˜¯åœ¨ä¸Šä¸€æ­¥è·å–å•ä¸ªé‚®ä»¶çš„å›è°ƒå†…è¿›è¡Œçš„<br>     &#x2F;&#x2F;è¿™ä¸ªæ–¹æ³•æ˜¯è‡ªåŠ¨æŠŠæ–‡æœ¬ä¸­çš„ç©ºè¡Œä¹‹ç±»çš„å»æ‰äº†ï¼Œä¹Ÿæœ‰ä¸å»æ‰å’Œå¯é€‰æ˜¯å¦å»æ‰çš„æ–¹æ³•<br>        MCOIMAPMessage *msg &#x3D; [&#x2F;&#x2F;ä¸Šä¸€æ­¥çš„message];<br>        MCOIMAPMessageRenderingOperation *  messageRenderingOperation &#x3D; [session plainTextBodyRenderingOperationWithMessage:msg folder:foldername];<br>        [messageRenderingOperation start:^(NSString * plainTextBodyString,NSError * error) &#123;<br>            if (error &#x3D;&#x3D; nil) &#123;<br>                complete(plainTextBodyString, msg);<br>            &#125;else&#123;<br>                NSLog(@&quot;fetch plain text error:%@&quot;,error);<br>            &#125;<br>        &#125;];<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">æ–‡æ¡£é‡Œæ³¨é‡Šçš„ä¸èƒ½å†æ¸…æ¥šäº†ï¼Œè‡ªå·±æŸ¥é˜…å§ğŸ˜ˆğŸ˜ˆğŸ˜ˆğŸ˜ˆğŸ˜ˆ<br>&#x2F;&#x2F;Returns an operation to render the plain text version of a message.<br>- (MCOIMAPMessageRenderingOperation *) plainTextRenderingOperationWithMessage:(MCOIMAPMessage *)message<br>                                                                       folder:(NSString *)folder;<br>&#x2F;&#x2F; All end of line will be removed and white spaces cleaned up if requested.<br>- (MCOIMAPMessageRenderingOperation *) plainTextBodyRenderingOperationWithMessage:(MCOIMAPMessage *)message<br>                                                                           folder:(NSString *)folder<br>                                                                  stripWhitespace:(BOOL)stripWhitespace;<br></code></pre></td></tr></table></figure></li>
<li><p>è·å–htmlå†…å®¹ï¼Œæ”¾åœ¨ä¸€ä¸ªwebviewä¸­æ˜¾ç¤ºåŸºæœ¬å†…å®¹åº”è¯¥æ²¡é—®é¢˜äº†</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">MCOIMAPMessage *msg &#x3D; [åŒæ ·æ˜¯ä¸Šä¸€æ­¥çš„message];<br>MCOIMAPMessageRenderingOperation *  messageRenderingOperation &#x3D; [session htmlBodyRenderingOperationWithMessage:msg folder:foldername];<br>[messageRenderingOperation start:^(NSString * _Nullable htmlString, NSError * _Nullable error) &#123;<br>     if (error &#x3D;&#x3D; nil) &#123;<br>         complete(htmlString, msg);<br>     &#125;else&#123;<br>         NSLog(@&quot;fetch plain text error:%@&quot;,error);<br>     &#125;<br>&#125;];<br></code></pre></td></tr></table></figure>


</li>
</ul>
<h6 id="5-æ·»åŠ å„ç§æ ‡è®°"><a href="#5-æ·»åŠ å„ç§æ ‡è®°" class="headerlink" title="5.æ·»åŠ å„ç§æ ‡è®°"></a>5.æ·»åŠ å„ç§æ ‡è®°</h6><p>å·²è¯»æœªè¯»ï¼Œå°çº¢æ——æ ‡è®°ç­‰ç­‰ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>â€œkindâ€åŒºåˆ†æ˜¯æ·»åŠ æ ‡è®°è¿˜æ˜¯ç§»é™¤æ ‡è®°</code>ï¼Œä¾‹å¦‚å·²è¯»â€œMCOMessageFlagSeenâ€æ ‡è®°ï¼Œç§»é™¤å°±æˆäº†æœªè¯»ï¼Œ<code>æ²¡æœ‰â€œunseenâ€ä¹‹ç±»çš„ã€‚ã€‚ã€‚</code></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">- (void)setFlagged:(BOOL)flagged message:(NSInteger)uid folder:(NSString *)folder &#123;<br>    MCOIMAPSession *session &#x3D; &#x2F;&#x2F;imap sessionï¼›<br>    MCOIndexSet *uids &#x3D; [MCOIndexSet indexSetWithIndex:uid];<br>    MCOIMAPOperation *op &#x3D; [session storeFlagsOperationWithFolder:folder<br>                                                             uids:uids<br>                                                             kind:(flagged ? MCOIMAPStoreFlagsRequestKindSet : MCOIMAPStoreFlagsRequestKindRemove)<br>                                                            flags:MCOMessageFlagFlagged];<br>    [op start:^(NSError * _Nullable error) &#123;<br>        NSLog(@&quot;store star flag &#39;s error: %@&quot;,error);<br>    &#125;];<br>&#125;<br><br>&#x2F;&#x2F;å¦‚æœè¦æ‰¹é‡è®¾ç½®æ ‡è®°ï¼Œuidså¯ä»¥é€šè¿‡rangeæ¥åˆ›å»º<br>    MCOIndexSet *uids &#x3D; [MCOIndexSet indexSetWithRange:MCORangeMake(range.location, range.length)];<br></code></pre></td></tr></table></figure>
<h6 id="6-åˆ é™¤é‚®ä»¶"><a href="#6-åˆ é™¤é‚®ä»¶" class="headerlink" title="6.åˆ é™¤é‚®ä»¶"></a>6.åˆ é™¤é‚®ä»¶</h6><p>ä¸ºä»€ä¹ˆå…ˆè¯´çš„æ ‡è®°é‚£éƒ¨åˆ†ï¼Œå› ä¸ºåˆ é™¤é‚®ä»¶ä¹Ÿæ˜¯æ·»åŠ â€œdeleteâ€æ ‡è®°ã€‚è¿™é‡Œéœ€è¦åšä¸€ä¸ªåŒºåˆ†ï¼Œ<code>è¦åˆ é™¤çš„é‚®ä»¶æ˜¯ä¸æ˜¯åœ¨ â€œå·²åˆ é™¤/è‰ç¨¿ç®±â€ è¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹</code>ã€‚</p>
<p>ä¸»è¦æ“ä½œæœ‰ä¸‰ä¸ªï¼š</p>
<ul>
<li>1ã€copyä¸€ä»½åˆ°â€œå·²åˆ é™¤â€</li>
<li>2ã€è®¾ç½®åˆ é™¤æ ‡è®°</li>
<li>3ã€æ‰§è¡Œæ“¦é™¤expungeæ“ä½œ</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F;**å¦‚æœæ˜¯ä¸åœ¨å·²åˆ é™¤ï¼Œè‰ç¨¿ç®±ï¼Œæ‰§è¡Œ1ã€2ã€3<br>&#x2F;&#x2F;**å¦‚æœåœ¨ï¼Œåªæ‰§è¡Œ2ã€3<br>    if (![folder isEqualToString:deleteFolder] &amp;&amp; ![folder isEqualToString:draftFolder]) &#123;<br>        &#x2F;&#x2F;copy ä¸€ä»½åˆ°å·²åˆ é™¤<br>        MCOIMAPCopyMessagesOperation *op &#x3D; [imapSession copyMessagesOperationWithFolder:folder<br>                                                                                                    uids:[MCOIndexSet indexSetWithIndex:uid]<br>                                                                                              destFolder:deleteFolder];<br>        [op start:^(NSError *error, NSDictionary *uidMapping) &#123;<br>            NSLog(@&quot;Error copy message to folder:%@&quot;, error);<br>            [self unturnedDelete:uid folder:folder];<br>        &#125;];<br>    &#125;else &#123;<br>        [self unturnedDelete:uid folder:folder];<br>    &#125;<br><br>- (void)unturnedDelete:(NSInteger)uid folder:(NSString *)folder <br>&#123;<br>    &#x2F;&#x2F;å…ˆæ·»åŠ åˆ é™¤flags<br>    MCOIMAPOperation * op2 &#x3D; [imapSession storeFlagsOperationWithFolder:folder<br>                                                                                    uids:[MCOIndexSet indexSetWithIndex:uid]<br>                                                                                    kind:MCOIMAPStoreFlagsRequestKindSet<br>                                                                                   flags:MCOMessageFlagDeleted];<br>    [op2 start:^(NSError * error) &#123;<br>        &#x2F;&#x2F;æ·»åŠ æˆåŠŸä¹‹åå¯¹å½“å‰æ–‡ä»¶å¤¹è¿›è¡Œexpungeæ“ä½œ<br>        MCOIMAPOperation *deleteOp &#x3D; [imapSession expungeOperation:folder];<br>        [deleteOp start:^(NSError *error) &#123;<br>            if(error) &#123;<br>                NSLog(@&quot;Error expunging folder:%@&quot;, error);<br>            &#125; else &#123;<br>                NSLog(@&quot;Successfully expunged folder&quot;);<br>            &#125;<br>        &#125;];<br>    &#125;];<br>&#125;<br></code></pre></td></tr></table></figure>
<h6 id="7-é™„ä»¶å¤„ç†å’Œhtmlå†…å®¹è§£æ"><a href="#7-é™„ä»¶å¤„ç†å’Œhtmlå†…å®¹è§£æ" class="headerlink" title="7.é™„ä»¶å¤„ç†å’Œhtmlå†…å®¹è§£æ"></a>7.é™„ä»¶å¤„ç†å’Œhtmlå†…å®¹è§£æ</h6><ul>
<li><p>å®˜æ–¹demo<br><a href="https://github.com/MailCore/mailcore2/tree/master/example/ios/iOS%20UI%20Test/iOS%20UI%20Test" target="_blank" rel="noopener">https://github.com/MailCore/mailcore2/tree/master/example/ios/iOS%20UI%20Test/iOS%20UI%20Test</a><br>githubä¸Šä»–ä»¬æœ‰å†™ä¸€ä¸ªdemoï¼Œæˆ‘ç›´æ¥ç”¨äº†é‡Œé¢ä¸¤ä¸ªç±»ï¼ŒmessageViewåˆè‡ªå·±åŠ äº†äº›ä¹±ä¸ƒå…«ç³Ÿçš„é€»è¾‘ã€‚protocolæ–¹ä¾¿è§£æçš„ï¼Œå…·ä½“è®²è§£åç»­æ›´æ–°ã€‚<br><img src="/2018/02/02/mailcore2-iOS%E4%B9%8B%E4%B8%80IMAP/1.png" alt></p>
</li>
<li><p>MCOHTMLRendererIMAPDelegate<br>è¿™ä¸ªåè®®é‡Œé¢ï¼Œæä¾›äº†å¯ä»¥è‡ªä¸»è§£æé™„ä»¶ã€å›¾ç‰‡ã€htmlå†…å®¹ï¼Œä»¥åŠç®€å•ç»™å®šhtmlå±•ç¤ºæ ·å¼çš„æ–¹æ³•ã€‚å…ˆè´´å‡ºheaderã€æ­£æ–‡ã€é™„ä»¶ï¼Œæˆ‘è‡ªå·±å†™çš„ä¸€ä¸ªç®€å•å±•ç¤ºæ¨¡æ¿å§ï¼Œå†…å®¹å¤„ç†è¿™å—ä¸œè¥¿å¤ªå¤šäº†ï¼Œæ•´ç†ä¸€ä¸‹å†ç»§ç»­æ›´æ–°ã€‚<br><a href="https://github.com/zhengyatian/TemplateForMailCore2" target="_blank" rel="noopener">TemplateForAttachment.html</a><br><a href="https://github.com/zhengyatian/TemplateForMailCore2" target="_blank" rel="noopener">TemplateForMessage.html</a><br><a href="https://github.com/zhengyatian/TemplateForMailCore2" target="_blank" rel="noopener">TemplateForMainHeader.html</a></p>
</li>
</ul>
<h6 id="8-åˆ›å»ºè‰ç¨¿ç®±é‚®ä»¶"><a href="#8-åˆ›å»ºè‰ç¨¿ç®±é‚®ä»¶" class="headerlink" title="8.åˆ›å»ºè‰ç¨¿ç®±é‚®ä»¶"></a>8.åˆ›å»ºè‰ç¨¿ç®±é‚®ä»¶</h6><p>â€‹     â€œappendâ€ æ‹¼æ¥çš„æ¦‚å¿µï¼Œå¾€ä¸€ä¸ªæ–‡ä»¶å¤¹å†…æ·»åŠ é‚®ä»¶ï¼›</p>
<ul>
<li>1ã€æ–°å»ºä¸€å°æ–°é‚®ä»¶(SMTPä¸­è®²åˆ›å»ºé‚®ä»¶)</li>
<li>2ã€è·å–ä½ çš„è‰ç¨¿ç®±æ–‡ä»¶å¤¹åç§°</li>
<li>3ã€æ‰§è¡Œappendæ“ä½œ<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain">&#x2F;&#x2F;è¿™é‡Œçš„dataå°±æ˜¯æ–°å»ºçš„é‚®ä»¶ï¼›<br>- (void)createDraft:(NSData *)data block:(void(^)(bool success, uint32_t uid, NSString *folder))block<br>&#123;<br>    if (!imapSession ) &#123;<br>        return;<br>    &#125;<br>    NSString *folder &#x3D; @&quot;Drafts&quot; &#x2F;&#x2F;è‰ç¨¿ç®± ,æˆ–è€…æ˜¯ä½ é‚®ç®±æœåŠ¡å™¨è§£æåˆ°çš„è‰ç¨¿ç®±æ–‡ä»¶å¤¹åç§°ï¼›<br><br>    MCOIMAPAppendMessageOperation *op &#x3D; [imapSession appendMessageOperationWithFolder:folder messageData:data flags:MCOMessageFlagDraft];<br>    [op start:^(NSError *error, uint32_t createdUID) &#123;<br>        &#x2F;&#x2F;do your operation;<br>        NSLog(@&quot;create Draft message :%@&quot;,@(createdUID));<br><br>    &#125;];<br>&#125;<br></code></pre></td></tr></table></figure>


</li>
</ul>
]]></content>
  </entry>
  <entry>
    <title>HTTP çš„ä¸€ç‚¹å„¿å°çŸ¥è¯†</title>
    <url>/2017/10/02/HTTP%20%E7%9A%84%E4%B8%80%E7%82%B9%E5%84%BF%E5%B0%8F%E7%9F%A5%E8%AF%86/</url>
    <content><![CDATA[<h2 id="HTTPè¯·æ±‚"><a href="#HTTPè¯·æ±‚" class="headerlink" title="HTTPè¯·æ±‚"></a>HTTPè¯·æ±‚</h2><h3 id="ä¸€ã€è¶…æ–‡æœ¬ä¼ è¾“åè®®-è¶…æ–‡æœ¬ä¼ è¾“åè®®-Hypertext-Transfer-Protocol"><a href="#ä¸€ã€è¶…æ–‡æœ¬ä¼ è¾“åè®®-è¶…æ–‡æœ¬ä¼ è¾“åè®®-Hypertext-Transfer-Protocol" class="headerlink" title="ä¸€ã€è¶…æ–‡æœ¬ä¼ è¾“åè®® è¶…æ–‡æœ¬ä¼ è¾“åè®®(Hypertext Transfer Protocol)"></a>ä¸€ã€è¶…æ–‡æœ¬ä¼ è¾“åè®® è¶…æ–‡æœ¬ä¼ è¾“åè®®(Hypertext Transfer Protocol)</h3><blockquote>
<p>httpåè®®è§„å®šäº†å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ•°æ®ä¼ è¾“æ ¼å¼ã€‚</p>
<p>httpåè®®æ˜¯åœ¨ç½‘ç»œå¼€å‘ä¸­æœ€å¸¸ç”¨çš„åè®®ï¼Œä¸ç®¡æ˜¯ç§»åŠ¨å®¢æˆ·ç«¯è¿˜æ˜¯PCç«¯,è®¿é—®ç½‘ç»œèµ„æºç»å¸¸ä½¿ç”¨httpåè®®ã€‚</p>
</blockquote>
<p>â€‹        <a id="more"></a></p>
<p>httpä¼˜ç‚¹:</p>
<ul>
<li><strong>ç®€å•å¿«é€Ÿ</strong>ï¼šhttpåè®®ç®€å•,é€šä¿¡é€Ÿåº¦å¾ˆå¿«.</li>
<li><strong>çµæ´»</strong>ï¼šhttpåè®®å…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®.</li>
<li>httpåè®®æ˜¯<strong>çŸ­è¿æ¥</strong>(éæŒç»­æ€§è¿æ¥) (TCP/IP  UDP/IP)ï¼šhttpåè®®é™åˆ¶æ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨å¯¹å®¢æˆ·ç«¯çš„è¯·æ±‚ä½œå‡ºå“åº”åï¼Œé©¬ä¸Šæ–­å¼€è¿æ¥ï¼Œè¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚</li>
</ul>
<h3 id="äºŒã€-httpåè®®çš„ä½¿ç”¨"><a href="#äºŒã€-httpåè®®çš„ä½¿ç”¨" class="headerlink" title="äºŒã€ httpåè®®çš„ä½¿ç”¨"></a>äºŒã€ httpåè®®çš„ä½¿ç”¨</h3><ol>
<li><strong>è¯·æ±‚</strong>ï¼šå®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç´¢è¦æ•°æ®ã€‚</li>
</ol>
<p>â€‹        httpåè®®è§„å®šï¼šä¸€ä¸ªå®Œæ•´çš„httpè¯·æ±‚åŒ…å«<code>è¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“</code>ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p>
<ul>
<li>è¯·æ±‚è¡Œ : åŒ…å«äº†è¯·æ±‚æ–¹æ³•ï¼Œè¯·æ±‚èµ„æºè·¯å¾„ï¼Œhttpåè®®ç‰ˆæœ¬ã€‚</li>
</ul>
<figure class="highlight http"><table><tr><td class="code"><pre><code class="hljs http"><span class="hljs-keyword">GET</span> <span class="hljs-string">/resources/images/</span> HTTP/1.1<br></code></pre></td></tr></table></figure>

<ul>
<li>è¯·æ±‚å¤´ï¼šåŒ…å«äº†å¯¹å®¢æˆ·ç«¯çš„ç¯å¢ƒæè¿°ï¼Œå®¢æˆ·ç«¯è¯·æ±‚çš„ä¸»æœºåœ°å€ç­‰ä¿¡æ¯ã€‚</li>
</ul>
<figure class="highlight http"><table><tr><td class="code"><pre><code class="hljs http">:<br><span class="hljs-attribute">Accept</span>: text/html // å®¢æˆ·ç«¯æ‰€èƒ½æ¥æ”¶çš„æ•°æ®ç±»å‹<br><span class="hljs-attribute">Accept-Language</span>: zh-cn // å®¢æˆ·ç«¯çš„è¯­è¨€ç¯å¢ƒ<br><span class="hljs-attribute">Accept-Encoding</span>: gzip // å®¢æˆ·ç«¯æ”¯æŒçš„æ•°æ®å‹ç¼©æ ¼å¼<br><span class="hljs-attribute">Host</span>: m.baidu.com // å®¢æˆ·ç«¯æƒ³è®¿é—®çš„æœåŠ¡å™¨ä¸»æœºåœ°å€<br><span class="hljs-attribute">User-Agent</span>: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.10; rv:37.0) Gecko/20100101 Firefox/37.0// å®¢æˆ·ç«¯çš„ç±»å‹,å®¢æˆ·ç«¯çš„è½¯ä»¶ç¯å¢ƒ<br></code></pre></td></tr></table></figure>

<ul>
<li>è¯·æ±‚ä½“ï¼šå®¢æˆ·ç«¯å‘ç»™æœåŠ¡å™¨çš„å…·ä½“æ•°æ®ï¼Œæ¯”å¦‚æ–‡ä»¶/å›¾ç‰‡ç­‰ã€‚ </li>
</ul>
<ol start="2">
<li><strong>å“åº”</strong>ï¼šæœåŠ¡å™¨è¿”å›å®¢æˆ·ç«¯æƒ³è¦çš„æ•°æ®ã€‚</li>
</ol>
<p>â€‹        httpåè®®è§„å®šï¼šä¸€ä¸ªå®Œæ•´çš„httpå“åº”åŒ…å« <code>çŠ¶æ€è¡Œã€å“åº”å¤´ã€å®ä½“å†…å®¹</code> ä¸‰ä¸ªéƒ¨åˆ†ã€‚</p>
<ul>
<li>çŠ¶æ€è¡Œï¼šåŒ…å«äº†httpåè®®ç‰ˆæœ¬,çŠ¶æ€å—,çŠ¶æ€è‹±æ–‡åç§°ã€‚</li>
</ul>
<figure class="highlight http"><table><tr><td class="code"><pre><code class="hljs http">HTTP/1.1 <span class="hljs-number">200</span> OK<br></code></pre></td></tr></table></figure>

<ul>
<li>å“åº”å¤´ï¼šåŒ…å«äº†å¯¹æœåŠ¡å™¨çš„æè¿°,å¯¹è¿”å›æ•°æ®çš„æè¿°ã€‚    </li>
</ul>
<figure class="highlight http"><table><tr><td class="code"><pre><code class="hljs http">:<br><span class="hljs-attribute">Content-Encoding</span>: gzip // æœåŠ¡å™¨æ”¯æŒçš„æ•°æ®å‹ç¼©æ ¼å¼<br><span class="hljs-attribute">Content-Length</span>:  1528 // è¿”å›æ•°æ®çš„é•¿åº¦<br><span class="hljs-attribute">Content-Type</span>:  application/xhtml+xml;charset=utf-8// è¿”å›æ•°æ®çš„ç±»å‹<br><span class="hljs-attribute">Date</span>: Mon, 15 Jun 201509:06:46 GMT // å“åº”çš„æ—¶é—´<br><span class="hljs-attribute">Server</span>: apache  // æœåŠ¡å™¨ç±»å‹<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ä½“å†…å®¹ï¼šæœåŠ¡å™¨è¿”å›ç»™å®¢æˆ·ç«¯çš„å…·ä½“æ•°æ®(å›¾ç‰‡/html/æ–‡ä»¶â€¦)ã€‚  </li>
</ul>
<ol start="3">
<li>å‘é€httpè¯·æ±‚</li>
</ol>
<p>â€‹        åœ¨iOSå¼€å‘ä¸­,å‘é€httpè¯·æ±‚çš„æ–¹æ¡ˆæœ‰å¾ˆå¤šï¼Œå¸¸è§çš„æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p>
<ul>
<li>è‹¹æœåŸç”Ÿ:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">NSURLConnection: ç”¨æ³•ç®€å•,å¤è€ç»å…¸çš„ä¸€ç§æ–¹æ¡ˆ.<br>NSURLSession: iOS7ä»¥åæ¨å‡ºçš„æŠ€æœ¯,åŠŸèƒ½æ¯”NSURLConnectionæ›´åŠ å¼ºå¤§.<br>CFNetWork: NSURL çš„åº•å±‚,çº¯Cè¯­è¨€,ä¸€èˆ¬ä¸ç”¨.<br></code></pre></td></tr></table></figure>

<ul>
<li>ç¬¬ä¸‰æ–¹æ¡†æ¶:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">ASIHttpRequest: httpç»ˆç»“è€…,åŠŸèƒ½å¾ˆå¼ºå¤§,å¯æƒœä½œè€…å·²åœæ­¢æ›´æ–°.<br>AFNetWorking: ç®€å•æ˜“ç”¨,æä¾›äº†åŸºæœ¬å¤Ÿç”¨çš„å¸¸ç”¨åŠŸèƒ½,ç»´æŠ¤å’Œä½¿ç”¨è€…å¤š.<br>MKNetWorkKit: ç®€å•æ˜“ç”¨,äº§è‡ªå°åº¦,ç»´æŠ¤å’Œä½¿ç”¨è€…å°‘.<br></code></pre></td></tr></table></figure>

<p>â€‹      </p>
<h3 id="ä¸‰ã€æ–¹æ³•"><a href="#ä¸‰ã€æ–¹æ³•" class="headerlink" title="ä¸‰ã€æ–¹æ³•"></a>ä¸‰ã€æ–¹æ³•</h3><h4 id="1-httpæ–¹æ³•"><a href="#1-httpæ–¹æ³•" class="headerlink" title="1. httpæ–¹æ³•"></a>1. httpæ–¹æ³•</h4><p>â€‹    httpåè®®å®šä¹‰äº†å¾ˆå¤šæ–¹æ³•å¯¹åº”ä¸åŒçš„èµ„æºæ“ä½œ,å…¶ä¸­æœ€å¸¸ç”¨çš„æ˜¯GET å’Œ POST æ–¹æ³•.</p>
<blockquote>
<p>GETã€POSTã€OPTIONSã€HEADã€PUTã€DELETEã€TRACEã€CONNECTã€PATCH</p>
<p>å¢:PUT</p>
<p> åˆ :DELETE</p>
<p>æ”¹:POST</p>
<p>æŸ¥:GET    </p>
</blockquote>
<ul>
<li>OPTIONS</li>
</ul>
<p>è¿”å›æœåŠ¡å™¨é’ˆå¯¹ç‰¹å®šèµ„æºæ‰€æ”¯æŒçš„HTTPè¯·æ±‚æ–¹æ³•ã€‚ä¹Ÿå¯ä»¥åˆ©ç”¨å‘WebæœåŠ¡å™¨å‘é€â€™*â€™çš„è¯·æ±‚æ¥æµ‹è¯•æœåŠ¡å™¨çš„åŠŸèƒ½æ€§ã€‚</p>
<ul>
<li>HEAD</li>
</ul>
<p>å‘æœåŠ¡å™¨ç´¢è¦ä¸GETè¯·æ±‚ç›¸ä¸€è‡´çš„å“åº”ï¼Œåªä¸è¿‡å“åº”ä½“å°†ä¸ä¼šè¢«è¿”å›ã€‚è¿™ä¸€æ–¹æ³•å¯ä»¥åœ¨ä¸å¿…ä¼ è¾“æ•´ä¸ªå“åº”å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥è·å–åŒ…å«åœ¨å“åº”æ¶ˆæ¯å¤´ä¸­çš„å…ƒä¿¡æ¯ã€‚</p>
<ul>
<li>GET</li>
</ul>
<p>å‘ç‰¹å®šçš„èµ„æºå‘å‡ºè¯·æ±‚ã€‚æ³¨æ„ï¼šGETæ–¹æ³•ä¸åº”å½“è¢«ç”¨äºäº§ç”Ÿâ€œå‰¯ä½œç”¨â€çš„æ“ä½œä¸­ã€‚</p>
<ul>
<li>POST</li>
</ul>
<p>å‘æŒ‡å®šèµ„æºæäº¤æ•°æ®è¿›è¡Œå¤„ç†è¯·æ±‚ï¼ˆä¾‹å¦‚æäº¤è¡¨å•æˆ–è€…ä¸Šä¼ æ–‡ä»¶ï¼‰ã€‚æ•°æ®è¢«åŒ…å«åœ¨è¯·æ±‚ä½“ä¸­ã€‚POSTè¯·æ±‚å¯èƒ½ä¼šå¯¼è‡´æ–°çš„èµ„æºçš„å»ºç«‹å’Œ/æˆ–å·²æœ‰èµ„æºçš„ä¿®æ”¹ã€‚</p>
<ul>
<li>PUT</li>
</ul>
<p>å‘æŒ‡å®šèµ„æºä½ç½®ä¸Šä¼ å…¶æœ€æ–°å†…å®¹ã€‚</p>
<ul>
<li>DELETE</li>
</ul>
<p>è¯·æ±‚æœåŠ¡å™¨åˆ é™¤Request-URIæ‰€æ ‡è¯†çš„èµ„æºã€‚</p>
<ul>
<li>TRACE</li>
</ul>
<p>å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­ã€‚</p>
<ul>
<li>CONNECT</li>
</ul>
<p>HTTP/1.1åè®®ä¸­é¢„ç•™ç»™èƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚</p>
<p>â€‹       </p>
<h4 id="2-å‚æ•°"><a href="#2-å‚æ•°" class="headerlink" title="2. å‚æ•°"></a>2. å‚æ•°</h4><p>å› ä¸º GET å’Œ POST å¯ä»¥å®ç°ä¸Šè¿°æ‰€æœ‰æ“ä½œï¼Œæ‰€ä»¥ï¼Œåœ¨ç°å®å¼€å‘ä¸­ï¼Œæˆ‘ä»¬åªè¦ä¼šç”¨GET å’Œ POST æ–¹æ³•å°±å¯ä»¥äº†ã€‚åœ¨ä¸æœåŠ¡å™¨äº¤äº’æ—¶ï¼Œæœ‰æ—¶å€™éœ€è¦ç»™æœåŠ¡å™¨å‘é€ä¸€äº›æ•°æ®ï¼Œæ¯”å¦‚ç™»å½•æ—¶éœ€è¦å‘é€ç”¨æˆ·åå’Œå¯†ç ã€‚</p>
<p><strong>å‚æ•°</strong>:å°±æ˜¯æŒ‡ä¼ é€’ç»™æœåŠ¡å™¨çš„å…·ä½“æ•°æ®.</p>
<h4 id="3-GET-å’Œ-POST-çš„ä¸»è¦åŒºåˆ«è¡¨ç°åœ¨å‚æ•°çš„ä¼ é€’ä¸Š"><a href="#3-GET-å’Œ-POST-çš„ä¸»è¦åŒºåˆ«è¡¨ç°åœ¨å‚æ•°çš„ä¼ é€’ä¸Š" class="headerlink" title="3. GET å’Œ POST çš„ä¸»è¦åŒºåˆ«è¡¨ç°åœ¨å‚æ•°çš„ä¼ é€’ä¸Š"></a>3. GET å’Œ POST çš„ä¸»è¦åŒºåˆ«è¡¨ç°åœ¨å‚æ•°çš„ä¼ é€’ä¸Š</h4><h6 id="GET"><a href="#GET" class="headerlink" title="GET"></a>GET</h6><p>â€‹    GETçš„æœ¬è´¨æ˜¯ä»æœåŠ¡å™¨å¾—åˆ°æ•°æ®ï¼Œæ•ˆç‡æ›´é«˜ï¼Œå¹¶ä¸”GETè¯·æ±‚å¯ä»¥è¢«ç¼“å­˜ã€‚</p>
<p>â€‹    æ³¨æ„ï¼šç½‘ç»œç¼“å­˜æ•°æ®ï¼Œä¿å­˜åœ¨SQLiteçš„æ•°æ®åº“ä¸­(è·¯å¾„ï¼šNSHomeDirectory())ã€‚</p>
<p>â€‹        æŸ¥çœ‹ç¼“å­˜æ•°æ®å‘½ä»¤è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs sqlite">cd æ–‡ä»¶ç›®å½•   (æ‰“å¼€æ–‡ä»¶ç›®å½•)<br>ls   æŸ¥çœ‹å½“å‰æ–‡ä»¶ä¸‹ç›®å½•<br>sqlite3 Cache.db   æ‰“å¼€æ•°æ®åº“<br>.tables    æŸ¥çœ‹æ•°æ®åº“ä¸­çš„è¡¨å•<br>select * from cfurl_cache_response;   æŸ¥çœ‹æœåŠ¡å™¨å“åº”ç¼“å­˜<br>select * from cfurl_cache_receiver_data;   æŸ¥çœ‹æœåŠ¡å™¨è¿”å›çš„æ•°æ®ç¼“å­˜<br></code></pre></td></tr></table></figure>

<p>â€‹    åœ¨è¯·æ±‚ URL åé¢ä»¥ ? çš„å½¢å¼è·Ÿä¸Šå‘ç»™æœåŠ¡å™¨çš„å‚æ•°ï¼Œå‚æ•°ä»¥ â€œå‚æ•°åâ€=â€å‚æ•°å€¼â€ çš„å½¢å¼æ‹¼æ¥ï¼Œå¤šä¸ªå‚æ•°ä¹‹é—´ç”¨ &amp; åˆ†éš”ã€‚</p>
<p>â€‹    æ³¨æ„ï¼šGETçš„é•¿åº¦æ˜¯æœ‰é™åˆ¶çš„ï¼Œä¸åŒçš„æµè§ˆå™¨æœ‰ä¸åŒçš„é•¿åº¦é™åˆ¶ï¼Œä¸€èˆ¬åœ¨2~8Kä¹‹é—´ã€‚         </p>
<h6 id="POST"><a href="#POST" class="headerlink" title="POST"></a>POST</h6><p>â€‹    POSTçš„æœ¬è´¨æ˜¯å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œä¹Ÿå¯ä»¥è·å¾—æœåŠ¡å™¨å¤„ç†ä¹‹åçš„ç»“æœï¼Œæ•ˆç‡ä¸å¦‚GETã€‚POSTè¯·æ±‚ä¸å¯ä»¥è¢«ç¼“å­˜ï¼Œæ¯æ¬¡åˆ·æ–°ä¹‹åéƒ½éœ€è¦é‡æ–°æäº¤è¡¨å•ã€‚å‘é€ç»™æœåŠ¡å™¨çš„å‚æ•°å…¨éƒ¨æ”¾åœ¨ <code>è¯·æ±‚ä½“</code> ä¸­ï¼Œç†è®ºä¸Šï¼ŒPOSTä¼ é€’çš„æ•°æ®é‡æ²¡æœ‰é™åˆ¶ã€‚</p>
<p>â€‹    æ³¨æ„ï¼šæ‰€æœ‰æ¶‰åŠåˆ°ç”¨æˆ·éšç§çš„æ•°æ®(å¯†ç /é“¶è¡Œå¡å·ç­‰â€¦)éƒ½è¦ç”¨POSTçš„æ–¹å¼ä¼ é€’ã€‚    </p>
<h4 id="4-æ³¨æ„-URLä¸­ä¸èƒ½å‡ºç°ç©ºæ ¼ä»¥åŠä¸­æ–‡ç­‰ç‰¹æ®Šç¬¦å·"><a href="#4-æ³¨æ„-URLä¸­ä¸èƒ½å‡ºç°ç©ºæ ¼ä»¥åŠä¸­æ–‡ç­‰ç‰¹æ®Šç¬¦å·" class="headerlink" title="4. æ³¨æ„:URLä¸­ä¸èƒ½å‡ºç°ç©ºæ ¼ä»¥åŠä¸­æ–‡ç­‰ç‰¹æ®Šç¬¦å·"></a>4. æ³¨æ„:URLä¸­ä¸èƒ½å‡ºç°ç©ºæ ¼ä»¥åŠä¸­æ–‡ç­‰ç‰¹æ®Šç¬¦å·</h4><ul>
<li><p>URLä¸­,æ‰€æœ‰çš„å­—ç¬¦éƒ½å¿…é¡»æ˜¯ ASCII ç </p>
</li>
<li><p>URLä¸­ä¸èƒ½å‡ºç°ä¸­æ–‡å’Œç‰¹æ®Šç¬¦å·(å¦‚ç©ºæ ¼)</p>
</li>
</ul>
<p>â€‹    æ‰€ä»¥ï¼Œå¦‚æœ URL ä¸­å‡ºç°äº†ä¸­æ–‡ï¼Œéœ€è¦æ·»åŠ ç™¾åˆ†å·è½¬ä¹‰ã€‚    </p>
<h2 id="URL-ä¸­-äº•å·ï¼ˆé”šç‚¹ï¼‰çš„ç”¨æ³•"><a href="#URL-ä¸­-äº•å·ï¼ˆé”šç‚¹ï¼‰çš„ç”¨æ³•" class="headerlink" title="URL ä¸­ # äº•å·ï¼ˆé”šç‚¹ï¼‰çš„ç”¨æ³•"></a>URL ä¸­ # äº•å·ï¼ˆé”šç‚¹ï¼‰çš„ç”¨æ³•</h2><p>â€‹       æˆ‘ä»¬ç»å¸¸ä½¿ç”¨URL å®šä½ï¼Œä¼ é€’å‚æ•°ç­‰åº”ç”¨ï¼Œæœ€ç»å¸¸ä½¿ç”¨çš„æ˜¯ï¼Ÿ é—®å·ï¼Œä¸€èˆ¬ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œè€Œæˆ‘ä»¬åœ¨æ¥è§¦åˆ°å•é¡µå¼€å‘æ¨¡å¼çš„æ—¶å€™ä¼šæ¥è§¦åˆ°url ä¸­å¤§é‡# äº•å·çš„ä½¿ç”¨ï¼Œæœ‰æ—¶å€™ä¼šå¯¹è¿™ä¸‰ä¸ªå¸¸è§ç¬¦å·æœ‰äº›åˆ†ä¸æ¸…ï¼Œæä¸æ‡‚å…·ä½“å«ä¹‰ã€‚ </p>
<h3 id="æ¶µä¹‰"><a href="#æ¶µä¹‰" class="headerlink" title="# æ¶µä¹‰"></a># æ¶µä¹‰</h3><p> åœ¨url ä¸­ä½¿ç”¨# ä¾‹å¦‚  index.html#product  å«ä¹‰ä¸€èˆ¬æ˜¯å®šä½åˆ°æœ¬é¡µé¢çš„productä½ç½®ï¼Œæ‰€ä»¥# åœ¨url ä¸­ä¸€èˆ¬æ˜¯ä½œä¸ºé¡µé¢å®šä½ä½¿ç”¨ï¼Œé‚£ä¹ˆproduct åˆ°åº•æ˜¯ç”¨ä»€ä¹ˆå®šä½ </p>
<figure class="highlight html"><table><tr><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"product"</span>&gt;</span> <br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"product"</span>&gt;</span><br></code></pre></td></tr></table></figure>

<p>è¿™ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥æŠŠæ»šåŠ¨æ¡å®šä½åˆ°é¡µé¢çš„å“åº”ä½ç½® </p>
<blockquote>
<p>Twitter åœ¨æ”¹ç‰ˆçš„æ—¶å€™æŠŠ æ”¹ç‰ˆå‰çš„ç”¨æˆ·ä¸»é¡µç½‘å€ä¸º<a href="http://twitter.com/usernameæ”¹ç‰ˆåï¼Œå°±å˜æˆäº†http://twitter.com/#!/username" target="_blank" rel="noopener">http://twitter.com/usernameæ”¹ç‰ˆåï¼Œå°±å˜æˆäº†http://twitter.com/#!/username</a> è¿™æ˜¯ä¸»æµç½‘ç«™ç¬¬ä¸€æ¬¡å°†â€#â€å¤§è§„æ¨¡ç”¨äºé‡è¦URLä¸­ã€‚è¿™è¡¨æ˜äº•å·ï¼ˆHashï¼‰çš„ä½œç”¨æ­£åœ¨è¢«é‡æ–°è®¤è¯† </p>
</blockquote>
<h3 id="ç‰¹æ€§1ï¼šHTTP-è¯·æ±‚ä¸­çš„ä½œç”¨"><a href="#ç‰¹æ€§1ï¼šHTTP-è¯·æ±‚ä¸­çš„ä½œç”¨" class="headerlink" title="ç‰¹æ€§1ï¼šHTTP è¯·æ±‚ä¸­çš„ä½œç”¨"></a>ç‰¹æ€§1ï¼šHTTP è¯·æ±‚ä¸­çš„ä½œç”¨</h3><p>â€‹    æ˜¯ç”¨æ¥æŒ‡å¯¼æµè§ˆå™¨åŠ¨ä½œçš„ï¼Œå¯¹æœåŠ¡å™¨ç«¯å®Œå…¨æ— ç”¨ã€‚æ‰€ä»¥ï¼ŒHTTPè¯·æ±‚ä¸­ä¸åŒ…æ‹¬#ã€‚</p>
<p>â€‹    æ¯”å¦‚ï¼Œè®¿é—®ä¸‹é¢çš„ç½‘å€ï¼Œ<a href="http://www.example.com/index.html#printï¼Œæµè§ˆå™¨å®é™…å‘å‡ºçš„è¯·æ±‚æ˜¯è¿™æ ·çš„ï¼š" target="_blank" rel="noopener">http://www.example.com/index.html#printï¼Œæµè§ˆå™¨å®é™…å‘å‡ºçš„è¯·æ±‚æ˜¯è¿™æ ·çš„ï¼š</a></p>
<figure class="highlight http"><table><tr><td class="code"><pre><code class="hljs http">GET /index.html HTTP/1.1 <br><span class="hljs-attribute">Host</span>: www.example.com<br></code></pre></td></tr></table></figure>

<pre><code>åœ¨ç¬¬ä¸€ä¸ª#åé¢å‡ºç°çš„ä»»ä½•å­—ç¬¦ï¼Œéƒ½ä¼šè¢«æµè§ˆå™¨è§£è¯»ä¸ºä½ç½®æ ‡è¯†ç¬¦ã€‚è¿™æ„å‘³ç€ï¼Œè¿™äº›å­—ç¬¦éƒ½ä¸ä¼šè¢«å‘é€åˆ°æœåŠ¡å™¨ç«¯ã€‚</code></pre><p>â€‹    æ¯”å¦‚ï¼Œä¸‹é¢URLçš„åŸæ„æ˜¯æŒ‡å®šä¸€ä¸ªé¢œè‰²å€¼ï¼š<a href="http://www.example.com/?color=#fffï¼Œä½†æ˜¯ï¼Œæµè§ˆå™¨å®é™…å‘å‡ºçš„è¯·æ±‚æ˜¯ï¼š" target="_blank" rel="noopener">http://www.example.com/?color=#fffï¼Œä½†æ˜¯ï¼Œæµè§ˆå™¨å®é™…å‘å‡ºçš„è¯·æ±‚æ˜¯ï¼š</a></p>
<figure class="highlight http"><table><tr><td class="code"><pre><code class="hljs http">GET /?color= HTTP/1.1 <br><span class="hljs-attribute">Host</span>: www.example.com<br></code></pre></td></tr></table></figure>



<h3 id="ç‰¹æ€§2ï¼šæ”¹ç‰ˆ-ä¸ä¼šå¯¼è‡´ç½‘é¡µé‡è½½"><a href="#ç‰¹æ€§2ï¼šæ”¹ç‰ˆ-ä¸ä¼šå¯¼è‡´ç½‘é¡µé‡è½½" class="headerlink" title="ç‰¹æ€§2ï¼šæ”¹ç‰ˆ#ä¸ä¼šå¯¼è‡´ç½‘é¡µé‡è½½"></a>ç‰¹æ€§2ï¼šæ”¹ç‰ˆ#ä¸ä¼šå¯¼è‡´ç½‘é¡µé‡è½½</h3><p>â€‹    å•å•æ”¹å˜#åçš„éƒ¨åˆ†ï¼Œæµè§ˆå™¨åªä¼šæ»šåŠ¨åˆ°ç›¸åº”ä½ç½®ï¼Œä¸ä¼šé‡æ–°åŠ è½½ç½‘é¡µã€‚</p>
<p>â€‹    æ¯”å¦‚ï¼Œä»<a href="http://www.example.com/index.html#location1æ”¹æˆhttp://www.example.com/index.html#location2ï¼Œæµè§ˆå™¨ä¸ä¼šé‡æ–°å‘æœåŠ¡å™¨è¯·æ±‚index.htmlã€‚" target="_blank" rel="noopener">http://www.example.com/index.html#location1æ”¹æˆhttp://www.example.com/index.html#location2ï¼Œæµè§ˆå™¨ä¸ä¼šé‡æ–°å‘æœåŠ¡å™¨è¯·æ±‚index.htmlã€‚</a></p>
<h3 id="ç‰¹æ€§3ï¼šæ”¹ç‰ˆ-åå¯¹history-èŒƒå›´å†å²çš„å½±å“"><a href="#ç‰¹æ€§3ï¼šæ”¹ç‰ˆ-åå¯¹history-èŒƒå›´å†å²çš„å½±å“" class="headerlink" title="ç‰¹æ€§3ï¼šæ”¹ç‰ˆ# åå¯¹history èŒƒå›´å†å²çš„å½±å“"></a>ç‰¹æ€§3ï¼šæ”¹ç‰ˆ# åå¯¹history èŒƒå›´å†å²çš„å½±å“</h3><p>â€‹    æ¯ä¸€æ¬¡æ”¹å˜#åçš„éƒ¨åˆ†ï¼Œéƒ½ä¼šåœ¨æµè§ˆå™¨çš„è®¿é—®å†å²ä¸­å¢åŠ ä¸€ä¸ªè®°å½•ï¼Œä½¿ç”¨â€åé€€â€æŒ‰é’®ï¼Œå°±å¯ä»¥å›åˆ°ä¸Šä¸€ä¸ªä½ç½®ã€‚è¿™å¯¹äºajaxåº”ç”¨ç¨‹åºç‰¹åˆ«æœ‰ç”¨ï¼Œå¯ä»¥ç”¨ä¸åŒçš„#å€¼ï¼Œè¡¨ç¤ºä¸åŒçš„è®¿é—®çŠ¶æ€ï¼Œç„¶åå‘ç”¨æˆ·ç»™å‡ºå¯ä»¥è®¿é—®æŸä¸ªçŠ¶æ€çš„é“¾æ¥ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸Šè¿°è§„åˆ™å¯¹IE 6å’ŒIE 7ä¸æˆç«‹ï¼Œå®ƒä»¬ä¸ä¼šå› ä¸º#çš„æ”¹å˜è€Œå¢åŠ å†å²è®°å½•ã€‚</p>
<p>â€‹    é‰´äºç‰¹æ€§2ã€3 å®ç°äº†åœ¨å•é¡µä¸‹view çš„è·¯ç”±å’Œå†å²å›é€€ï¼Œç›®å‰h5æ‰‹æœºå¼€å‘æ‰€é‡‡ç”¨çš„å•é¡µæ¨¡å¼çš„åŸºç¡€ã€‚</p>
<h3 id="ç‰¹æ€§4ï¼šwindow-location-hashè¯»å–-å€¼"><a href="#ç‰¹æ€§4ï¼šwindow-location-hashè¯»å–-å€¼" class="headerlink" title="ç‰¹æ€§4ï¼šwindow.location.hashè¯»å–#å€¼"></a>ç‰¹æ€§4ï¼šwindow.location.hashè¯»å–#å€¼</h3><pre><code>window.location.hash è¿™ä¸ªå±æ€§å¯è¯»å¯å†™ã€‚è¯»å–æ—¶ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­ç½‘é¡µçŠ¶æ€æ˜¯å¦æ”¹å˜ï¼›å†™å…¥æ—¶ï¼Œåˆ™ä¼šåœ¨ä¸é‡è½½ç½‘é¡µçš„å‰æä¸‹ï¼Œåˆ›é€ ä¸€æ¡è®¿é—®å†å²è®°å½•ã€‚</code></pre><h3 id="ç‰¹æ€§5ï¼šonhashchangeäº‹ä»¶-H5æ–°å¢"><a href="#ç‰¹æ€§5ï¼šonhashchangeäº‹ä»¶-H5æ–°å¢" class="headerlink" title="ç‰¹æ€§5ï¼šonhashchangeäº‹ä»¶ H5æ–°å¢"></a>ç‰¹æ€§5ï¼šonhashchangeäº‹ä»¶ H5æ–°å¢</h3><p>â€‹    è¿™æ˜¯ä¸€ä¸ªHTML 5æ–°å¢çš„äº‹ä»¶ï¼Œå½“#å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ã€‚IE8+ã€Firefox 3.6+ã€Chrome 5+ã€Safari 4.0+æ”¯æŒè¯¥äº‹ä»¶ã€‚</p>
<p>ã€€ã€€å®ƒçš„ä½¿ç”¨æ–¹æ³•æœ‰ä¸‰ç§ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><code class="hljs html">window.onhashchange = func; <br><span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">onhashchange</span>=<span class="hljs-string">"func();"</span>&gt;</span> <br>window.addEventListener("hashchange"ï¼Œ func, false);<br></code></pre></td></tr></table></figure>



<p>å¯¹äºä¸æ”¯æŒonhashchangeçš„æµè§ˆå™¨ï¼Œå¯ä»¥ç”¨setIntervalç›‘æ§location.hashçš„å˜åŒ–ã€‚</p>
<h3 id="ç‰¹æ€§6ï¼šGoogleæŠ“å–-çš„æœºåˆ¶"><a href="#ç‰¹æ€§6ï¼šGoogleæŠ“å–-çš„æœºåˆ¶" class="headerlink" title="ç‰¹æ€§6ï¼šGoogleæŠ“å–#çš„æœºåˆ¶"></a>ç‰¹æ€§6ï¼šGoogleæŠ“å–#çš„æœºåˆ¶</h3><p>â€‹    é»˜è®¤æƒ…å†µä¸‹ï¼ŒGoogleçš„ç½‘ç»œèœ˜è››å¿½è§†URLçš„#éƒ¨åˆ†ã€‚ä½†æ˜¯ï¼ŒGoogleè¿˜è§„å®šï¼Œå¦‚æœä½ å¸Œæœ›Ajaxç”Ÿæˆçš„å†…å®¹è¢«æµè§ˆå¼•æ“è¯»å–ï¼Œé‚£ä¹ˆURLä¸­å¯ä»¥ä½¿ç”¨â€#!â€ï¼ŒGoogleä¼šè‡ªåŠ¨å°†å…¶åé¢çš„å†…å®¹è½¬æˆæŸ¥è¯¢å­—ç¬¦ä¸²escaped_fragmentçš„å€¼ã€‚</p>
<p>ã€€ã€€æ¯”å¦‚ï¼ŒGoogleå‘ç°æ–°ç‰ˆTwitterçš„URLï¼š<a href="http://twitter.com/#!/username" target="_blank" rel="noopener">http://twitter.com/#!/username</a></p>
<p>ã€€ã€€å°±ä¼šè‡ªåŠ¨æŠ“å–å¦ä¸€ä¸ªURLï¼š<a href="http://twitter.com/?escaped_fragment=/username" target="_blank" rel="noopener">http://twitter.com/?escaped_fragment=/username</a> </p>
<p>ã€€ã€€é€šè¿‡è¿™ç§æœºåˆ¶ï¼ŒGoogleå°±å¯ä»¥ç´¢å¼•åŠ¨æ€çš„Ajaxå†…å®¹ã€‚</p>
<p>ç¾¤è®¨è®ºï¼š</p>
<p>URLä¸­çš„#åªæ˜¯ä½œä¸ºä¸€ä¸ªåˆ†è§£ç¬¦ï¼Œ#åé¢çš„å†…å®¹ï¼ŒæœåŠ¡å™¨ä¸ä¼šå¤„ç†ï¼Œä½†æ˜¯æµè§ˆå™¨é¡µé¢èƒ½è·å–åˆ°ï¼Œä½†æ˜¯æ‹¿åˆ°è¿™ä¸ªå€¼å¹²å•¥ç”¨ï¼Œå°±çœ‹æ€ä¹ˆå¤„ç†äº†ï¼Œæ¯”å¦‚ç°åœ¨H5åšçš„SPAï¼Œå°±æ˜¯é #åé¢çš„å†…å®¹ä½œä¸ºå‚æ•°ï¼Œæ¥å¤„ç†å‰ç«¯è·¯ç”±ã€‚</p>
<h2 id="ç½‘ç»œç›¸åº”çš„å¸¸è§çŠ¶æ€"><a href="#ç½‘ç»œç›¸åº”çš„å¸¸è§çŠ¶æ€" class="headerlink" title="ç½‘ç»œç›¸åº”çš„å¸¸è§çŠ¶æ€"></a>ç½‘ç»œç›¸åº”çš„å¸¸è§çŠ¶æ€</h2><h3 id="1xxæ¶ˆæ¯"><a href="#1xxæ¶ˆæ¯" class="headerlink" title="1xxæ¶ˆæ¯"></a>1xxæ¶ˆæ¯</h3><p>â€‹    è¿™ä¸€ç±»å‹çš„çŠ¶æ€ç ï¼Œä»£è¡¨è¯·æ±‚å·²è¢«æ¥å—ï¼Œéœ€è¦ç»§ç»­å¤„ç†ã€‚è¿™ç±»å“åº”æ˜¯ä¸´æ—¶å“åº”ï¼ŒåªåŒ…å«çŠ¶æ€è¡Œå’ŒæŸäº›å¯é€‰çš„å“åº”å¤´ä¿¡æ¯ï¼Œå¹¶ä»¥ç©ºè¡Œç»“æŸã€‚ç”±äºHTTP/1.0åè®®ä¸­æ²¡æœ‰å®šä¹‰ä»»ä½•1xxçŠ¶æ€ç ï¼Œæ‰€ä»¥é™¤éåœ¨æŸäº›è¯•éªŒæ¡ä»¶ä¸‹ï¼ŒæœåŠ¡å™¨ç¦æ­¢å‘æ­¤ç±»å®¢æˆ·ç«¯å‘é€1xxå“åº”ã€‚è¿™äº›çŠ¶æ€ç ä»£è¡¨çš„å“åº”éƒ½æ˜¯ä¿¡æ¯æ€§çš„ï¼Œæ ‡ç¤ºå®¢æˆ·åº”è¯¥é‡‡å–çš„å…¶ä»–è¡ŒåŠ¨ã€‚</p>
<h4 id="100-Continue"><a href="#100-Continue" class="headerlink" title="100 Continue"></a>100 Continue</h4><p>â€‹    å®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘é€è¯·æ±‚ã€‚è¿™ä¸ªä¸´æ—¶å“åº”æ˜¯ç”¨æ¥é€šçŸ¥å®¢æˆ·ç«¯å®ƒçš„éƒ¨åˆ†è¯·æ±‚å·²ç»è¢«æœåŠ¡å™¨æ¥æ”¶ï¼Œä¸”ä»æœªè¢«æ‹’ç»ã€‚å®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘é€è¯·æ±‚çš„å‰©ä½™éƒ¨åˆ†ï¼Œæˆ–è€…å¦‚æœè¯·æ±‚å·²ç»å®Œæˆï¼Œå¿½ç•¥è¿™ä¸ªå“åº”ã€‚æœåŠ¡å™¨å¿…é¡»åœ¨è¯·æ±‚å®Œæˆåå‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæœ€ç»ˆå“åº”ã€‚</p>
<h4 id="101-Switching-Protocols"><a href="#101-Switching-Protocols" class="headerlink" title="101 Switching Protocols"></a>101 Switching Protocols</h4><p>â€‹    æœåŠ¡å™¨å·²ç»ç†è§£äº†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œå¹¶å°†é€šè¿‡Upgradeæ¶ˆæ¯å¤´é€šçŸ¥å®¢æˆ·ç«¯é‡‡ç”¨ä¸åŒçš„åè®®æ¥å®Œæˆè¿™ä¸ªè¯·æ±‚ã€‚åœ¨å‘é€å®Œè¿™ä¸ªå“åº”æœ€åçš„ç©ºè¡Œåï¼ŒæœåŠ¡å™¨å°†ä¼šåˆ‡æ¢åˆ°åœ¨Upgradeæ¶ˆæ¯å¤´ä¸­å®šä¹‰çš„é‚£äº›åè®®ã€‚: åªæœ‰åœ¨åˆ‡æ¢æ–°çš„åè®®æ›´æœ‰å¥½å¤„çš„æ—¶å€™æ‰åº”è¯¥é‡‡å–ç±»ä¼¼æªæ–½ã€‚ä¾‹å¦‚ï¼Œåˆ‡æ¢åˆ°æ–°çš„HTTPç‰ˆæœ¬æ¯”æ—§ç‰ˆæœ¬æ›´æœ‰ä¼˜åŠ¿ï¼Œæˆ–è€…åˆ‡æ¢åˆ°ä¸€ä¸ªå®æ—¶ä¸”åŒæ­¥çš„åè®®ä»¥ä¼ é€åˆ©ç”¨æ­¤ç±»ç‰¹æ€§çš„èµ„æºã€‚</p>
<h4 id="102-Processing"><a href="#102-Processing" class="headerlink" title="102 Processing"></a>102 Processing</h4><p>â€‹    ç”±WebDAVï¼ˆRFC 2518ï¼‰æ‰©å±•çš„çŠ¶æ€ç ï¼Œä»£è¡¨å¤„ç†å°†è¢«ç»§ç»­æ‰§è¡Œã€‚</p>
<h3 id="2xxæˆåŠŸ"><a href="#2xxæˆåŠŸ" class="headerlink" title="2xxæˆåŠŸ"></a>2xxæˆåŠŸ</h3><p>â€‹    è¿™ä¸€ç±»å‹çš„çŠ¶æ€ç ï¼Œä»£è¡¨è¯·æ±‚å·²æˆåŠŸè¢«æœåŠ¡å™¨æ¥æ”¶ã€ç†è§£ã€å¹¶æ¥å—ã€‚</p>
<h4 id="200-OK"><a href="#200-OK" class="headerlink" title="200 OK"></a>200 OK</h4><p>â€‹    è¯·æ±‚å·²æˆåŠŸï¼Œè¯·æ±‚æ‰€å¸Œæœ›çš„å“åº”å¤´æˆ–æ•°æ®ä½“å°†éšæ­¤å“åº”è¿”å›ã€‚</p>
<h4 id="201-Created"><a href="#201-Created" class="headerlink" title="201 Created"></a>201 Created</h4><p>â€‹    è¯·æ±‚å·²ç»è¢«å®ç°ï¼Œè€Œä¸”æœ‰ä¸€ä¸ªæ–°çš„èµ„æºå·²ç»ä¾æ®è¯·æ±‚çš„éœ€è¦è€Œåˆ›å»ºï¼Œä¸”å…¶URIå·²ç»éšLocationå¤´ä¿¡æ¯è¿”å›ã€‚å‡å¦‚éœ€è¦çš„èµ„æºæ— æ³•åŠæ—¶åˆ›å»ºçš„è¯ï¼Œåº”å½“è¿”å›â€™202 Acceptedâ€™ã€‚</p>
<h4 id="202-Accepted"><a href="#202-Accepted" class="headerlink" title="202 Accepted"></a>202 Accepted</h4><p>â€‹    æœåŠ¡å™¨å·²æ¥å—è¯·æ±‚ï¼Œä½†å°šæœªå¤„ç†ã€‚æ­£å¦‚å®ƒå¯èƒ½è¢«æ‹’ç»ä¸€æ ·ï¼Œæœ€ç»ˆè¯¥è¯·æ±‚å¯èƒ½ä¼šä¹Ÿå¯èƒ½ä¸ä¼šè¢«æ‰§è¡Œã€‚åœ¨å¼‚æ­¥æ“ä½œçš„åœºåˆä¸‹ï¼Œæ²¡æœ‰æ¯”å‘é€è¿™ä¸ªçŠ¶æ€ç æ›´æ–¹ä¾¿çš„åšæ³•äº†ã€‚:è¿”å›202çŠ¶æ€ç çš„å“åº”çš„ç›®çš„æ˜¯å…è®¸æœåŠ¡å™¨æ¥å—å…¶ä»–è¿‡ç¨‹çš„è¯·æ±‚ï¼ˆä¾‹å¦‚æŸä¸ªæ¯å¤©åªæ‰§è¡Œä¸€æ¬¡çš„åŸºäºæ‰¹å¤„ç†çš„æ“ä½œï¼‰ï¼Œè€Œä¸å¿…è®©å®¢æˆ·ç«¯ä¸€ç›´ä¿æŒä¸æœåŠ¡å™¨çš„è¿æ¥ç›´åˆ°æ‰¹å¤„ç†æ“ä½œå…¨éƒ¨å®Œæˆã€‚åœ¨æ¥å—è¯·æ±‚å¤„ç†å¹¶è¿”å›202çŠ¶æ€ç çš„å“åº”åº”å½“åœ¨è¿”å›çš„å®ä½“ä¸­åŒ…å«ä¸€äº›æŒ‡ç¤ºå¤„ç†å½“å‰çŠ¶æ€çš„ä¿¡æ¯ï¼Œä»¥åŠæŒ‡å‘å¤„ç†çŠ¶æ€ç›‘è§†å™¨æˆ–çŠ¶æ€é¢„æµ‹çš„æŒ‡é’ˆï¼Œä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿä¼°è®¡æ“ä½œæ˜¯å¦å·²ç»å®Œæˆã€‚</p>
<h4 id="203-Non-Authoritative-Information"><a href="#203-Non-Authoritative-Information" class="headerlink" title="203 Non-Authoritative Information"></a>203 Non-Authoritative Information</h4><p>â€‹    æœåŠ¡å™¨å·²æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†è¿”å›çš„å®ä½“å¤´éƒ¨å…ƒä¿¡æ¯ä¸æ˜¯åœ¨åŸå§‹æœåŠ¡å™¨ä¸Šæœ‰æ•ˆçš„ç¡®å®šé›†åˆï¼Œè€Œæ˜¯æ¥è‡ªæœ¬åœ°æˆ–è€…ç¬¬ä¸‰æ–¹çš„æ‹·è´ã€‚å½“å‰çš„ä¿¡æ¯å¯èƒ½æ˜¯åŸå§‹ç‰ˆæœ¬çš„å­é›†æˆ–è€…è¶… é›†ã€‚ä¾‹å¦‚ï¼ŒåŒ…å«èµ„æºçš„å…ƒæ•°æ®å¯èƒ½å¯¼è‡´åŸå§‹æœåŠ¡å™¨çŸ¥é“å…ƒä¿¡æ¯çš„è¶…é›†ã€‚ä½¿ç”¨æ­¤çŠ¶æ€ç ä¸æ˜¯å¿…é¡»çš„ï¼Œè€Œä¸”åªæœ‰åœ¨å“åº”ä¸ä½¿ç”¨æ­¤çŠ¶æ€ç ä¾¿ä¼šè¿”å›200 OKçš„æƒ…å†µä¸‹æ‰æ˜¯åˆé€‚çš„ã€‚</p>
<h4 id="204-No-Content"><a href="#204-No-Content" class="headerlink" title="204 No Content"></a>204 No Content</h4><p>â€‹    æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä½†ä¸éœ€è¦è¿”å›ä»»ä½•å®ä½“å†…å®¹ï¼Œå¹¶ä¸”å¸Œæœ›è¿”å›æ›´æ–°äº†çš„å…ƒä¿¡æ¯ã€‚å“åº”å¯èƒ½é€šè¿‡å®ä½“å¤´éƒ¨çš„å½¢å¼ï¼Œè¿”å›æ–°çš„æˆ–æ›´æ–°åçš„å…ƒä¿¡æ¯ã€‚å¦‚æœå­˜åœ¨è¿™äº›å¤´éƒ¨ä¿¡æ¯ï¼Œåˆ™åº”å½“ä¸æ‰€è¯·æ±‚çš„å˜é‡ç›¸å‘¼åº”ã€‚</p>
<p>â€‹    å¦‚æœå®¢æˆ·ç«¯æ˜¯æµè§ˆå™¨çš„è¯ï¼Œé‚£ä¹ˆç”¨æˆ·æµè§ˆå™¨åº”ä¿ç•™å‘é€äº†è¯¥è¯·æ±‚çš„é¡µé¢ï¼Œè€Œä¸äº§ç”Ÿä»»ä½•æ–‡æ¡£è§†å›¾ä¸Šçš„å˜åŒ–ï¼Œå³ä½¿æŒ‰ç…§è§„èŒƒæ–°çš„æˆ–æ›´æ–°åçš„å…ƒä¿¡æ¯åº”å½“è¢«åº”ç”¨åˆ°ç”¨æˆ·æµè§ˆå™¨æ´»åŠ¨è§†å›¾ä¸­çš„æ–‡æ¡£ã€‚</p>
<p>â€‹    ç”±äº204å“åº”è¢«ç¦æ­¢åŒ…å«ä»»ä½•æ¶ˆæ¯ä½“ï¼Œå› æ­¤å®ƒå§‹ç»ˆä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚</p>
<h4 id="205-Reset-Content"><a href="#205-Reset-Content" class="headerlink" title="205 Reset Content"></a>205 Reset Content</h4><p>â€‹    æœåŠ¡å™¨æˆåŠŸå¤„ç†äº†è¯·æ±‚ï¼Œä¸”æ²¡æœ‰è¿”å›ä»»ä½•å†…å®¹ã€‚ä½†æ˜¯ä¸204å“åº”ä¸åŒï¼Œè¿”å›æ­¤çŠ¶æ€ç çš„å“åº”è¦æ±‚è¯·æ±‚è€…é‡ç½®æ–‡æ¡£è§†å›¾ã€‚è¯¥å“åº”ä¸»è¦æ˜¯è¢«ç”¨äºæ¥å—ç”¨æˆ·è¾“å…¥åï¼Œç«‹å³é‡ç½®è¡¨å•ï¼Œä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿè½»æ¾åœ°å¼€å§‹å¦ä¸€æ¬¡è¾“å…¥ã€‚</p>
<pre><code>ä¸204å“åº”ä¸€æ ·ï¼Œè¯¥å“åº”ä¹Ÿè¢«ç¦æ­¢åŒ…å«ä»»ä½•æ¶ˆæ¯ä½“ï¼Œä¸”ä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“æŸã€‚</code></pre><h4 id="206-Partial-Content"><a href="#206-Partial-Content" class="headerlink" title="206 Partial Content"></a>206 Partial Content</h4><p>â€‹    æœåŠ¡å™¨å·²ç»æˆåŠŸå¤„ç†äº†éƒ¨åˆ†GETè¯·æ±‚ã€‚ç±»ä¼¼äºFlashGetæˆ–è€…è¿…é›·è¿™ç±»çš„HTTP ä¸‹è½½å·¥å…·éƒ½æ˜¯ä½¿ç”¨æ­¤ç±»å“åº”å®ç°æ–­ç‚¹ç»­ä¼ æˆ–è€…å°†ä¸€ä¸ªå¤§æ–‡æ¡£åˆ†è§£ä¸ºå¤šä¸ªä¸‹è½½æ®µåŒæ—¶ä¸‹è½½ã€‚</p>
<p>â€‹    è¯¥è¯·æ±‚å¿…é¡»åŒ…å«Rangeå¤´ä¿¡æ¯æ¥æŒ‡ç¤ºå®¢æˆ·ç«¯å¸Œæœ›å¾—åˆ°çš„å†…å®¹èŒƒå›´ï¼Œå¹¶ä¸”å¯èƒ½åŒ…å«If-Rangeæ¥ä½œä¸ºè¯·æ±‚æ¡ä»¶ã€‚</p>
<p>â€‹    å“åº”å¿…é¡»åŒ…å«å¦‚ä¸‹çš„å¤´éƒ¨åŸŸï¼š</p>
<blockquote>
<p>Content-Rangeç”¨ä»¥æŒ‡ç¤ºæœ¬æ¬¡å“åº”ä¸­è¿”å›çš„å†…å®¹çš„èŒƒå›´ï¼›å¦‚æœæ˜¯Content-Typeä¸ºmultipart/byterangesçš„å¤šæ®µä¸‹è½½ï¼Œåˆ™æ¯ä¸€multipartæ®µä¸­éƒ½åº”åŒ…å«Content-RangeåŸŸç”¨ä»¥æŒ‡ç¤ºæœ¬æ®µçš„å†…å®¹èŒƒå›´ã€‚å‡å¦‚å“åº”ä¸­åŒ…å«Content-Lengthï¼Œé‚£ä¹ˆå®ƒçš„æ•°å€¼å¿…é¡»åŒ¹é…å®ƒè¿”å›çš„å†…å®¹èŒƒå›´çš„çœŸå®å­—èŠ‚æ•°ã€‚</p>
<p>Date</p>
<p>ETagå’Œï¼æˆ–Content-Locationï¼Œå‡å¦‚åŒæ ·çš„è¯·æ±‚æœ¬åº”è¯¥è¿”å›200å“åº”ã€‚</p>
<p>Expires, Cache-Controlï¼Œå’Œï¼æˆ–Varyï¼Œå‡å¦‚å…¶å€¼å¯èƒ½ä¸ä¹‹å‰ç›¸åŒå˜é‡çš„å…¶ä»–å“åº”å¯¹åº”çš„å€¼ä¸åŒçš„è¯ã€‚</p>
</blockquote>
<p>â€‹    å‡å¦‚æœ¬å“åº”è¯·æ±‚ä½¿ç”¨äº†If-Rangeå¼ºç¼“å­˜éªŒè¯ï¼Œé‚£ä¹ˆæœ¬æ¬¡å“åº”ä¸åº”è¯¥åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›å‡å¦‚æœ¬å“åº”çš„è¯·æ±‚ä½¿ç”¨äº†If-Rangeå¼±ç¼“å­˜éªŒè¯ï¼Œé‚£ä¹ˆæœ¬æ¬¡å“åº”ç¦æ­¢åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›è¿™é¿å…äº†ç¼“å­˜çš„å®ä½“å†…å®¹å’Œæ›´æ–°äº†çš„å®ä½“å¤´ä¿¡æ¯ä¹‹é—´çš„ä¸ä¸€è‡´ã€‚å¦åˆ™ï¼Œæœ¬å“åº”å°±åº”å½“åŒ…å«æ‰€æœ‰æœ¬åº”è¯¥è¿”å›200å“åº”ä¸­åº”å½“è¿”å›çš„æ‰€æœ‰å®ä½“å¤´éƒ¨åŸŸã€‚</p>
<p>â€‹    å‡å¦‚ETagæˆ–Last-Modifiedå¤´éƒ¨ä¸èƒ½ç²¾ç¡®åŒ¹é…çš„è¯ï¼Œåˆ™å®¢æˆ·ç«¯ç¼“å­˜åº”ç¦æ­¢å°†206å“åº”è¿”å›çš„å†…å®¹ä¸ä¹‹å‰ä»»ä½•ç¼“å­˜è¿‡çš„å†…å®¹ç»„åˆåœ¨ä¸€èµ·ã€‚</p>
<p>â€‹    ä»»ä½•ä¸æ”¯æŒRangeä»¥åŠContent-Rangeå¤´çš„ç¼“å­˜éƒ½ç¦æ­¢ç¼“å­˜206å“åº”è¿”å›çš„å†…å®¹ã€‚</p>
<p>207 Multi-Status</p>
<p>â€‹    ç”±WebDAV(RFC 2518)æ‰©å±•çš„çŠ¶æ€ç ï¼Œä»£è¡¨ä¹‹åçš„æ¶ˆæ¯ä½“å°†æ˜¯ä¸€ä¸ªXMLæ¶ˆæ¯ï¼Œå¹¶ä¸”å¯èƒ½ä¾ç…§ä¹‹å‰å­è¯·æ±‚æ•°é‡çš„ä¸åŒï¼ŒåŒ…å«ä¸€ç³»åˆ—ç‹¬ç«‹çš„å“åº”ä»£ç ã€‚</p>
<h3 id="3xxé‡å®šå‘"><a href="#3xxé‡å®šå‘" class="headerlink" title="3xxé‡å®šå‘"></a>3xxé‡å®šå‘</h3><p>â€‹    è¿™ç±»çŠ¶æ€ç ä»£è¡¨éœ€è¦å®¢æˆ·ç«¯é‡‡å–è¿›ä¸€æ­¥çš„æ“ä½œæ‰èƒ½å®Œæˆè¯·æ±‚ã€‚é€šå¸¸ï¼Œè¿™äº›çŠ¶æ€ç ç”¨æ¥é‡å®šå‘ï¼Œåç»­çš„è¯·æ±‚åœ°å€ï¼ˆé‡å®šå‘ç›®æ ‡ï¼‰åœ¨æœ¬æ¬¡å“åº”çš„LocationåŸŸä¸­æŒ‡æ˜ã€‚</p>
<p>â€‹    å½“ä¸”ä»…å½“åç»­çš„è¯·æ±‚æ‰€ä½¿ç”¨çš„æ–¹æ³•æ˜¯GETæˆ–è€…HEADæ—¶ï¼Œç”¨æˆ·æµè§ˆå™¨æ‰å¯ä»¥åœ¨æ²¡æœ‰ç”¨æˆ·ä»‹å…¥çš„æƒ…å†µä¸‹è‡ªåŠ¨æäº¤æ‰€éœ€è¦çš„åç»­è¯·æ±‚ã€‚å®¢æˆ·ç«¯åº”å½“è‡ªåŠ¨ç›‘æµ‹æ— é™å¾ªç¯é‡å®šå‘ï¼ˆä¾‹å¦‚ï¼šAâ†’Bâ†’Câ†’â€¦â€¦â†’Aæˆ–Aâ†’Aï¼‰ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å¤§é‡ä¸å¿…è¦çš„èµ„æºæ¶ˆè€—ã€‚æŒ‰ç…§HTTP/1.0ç‰ˆè§„èŒƒçš„å»ºè®®ï¼Œæµè§ˆå™¨ä¸åº”è‡ªåŠ¨è®¿é—®è¶…è¿‡5æ¬¡çš„é‡å®šå‘ã€‚</p>
<h4 id="300-Multiple-Choices"><a href="#300-Multiple-Choices" class="headerlink" title="300 Multiple Choices"></a>300 Multiple Choices</h4><p>â€‹    è¢«è¯·æ±‚çš„èµ„æºæœ‰ä¸€ç³»åˆ—å¯ä¾›é€‰æ‹©çš„å›é¦ˆä¿¡æ¯ï¼Œæ¯ä¸ªéƒ½æœ‰è‡ªå·±ç‰¹å®šçš„åœ°å€å’Œæµè§ˆå™¨é©±åŠ¨çš„å•†è®®ä¿¡æ¯ã€‚ç”¨æˆ·æˆ–æµè§ˆå™¨èƒ½å¤Ÿè‡ªè¡Œé€‰æ‹©ä¸€ä¸ªé¦–é€‰çš„åœ°å€è¿›è¡Œé‡å®šå‘ã€‚</p>
<p>â€‹    é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™è¯¥å“åº”åº”å½“åŒ…æ‹¬ä¸€ä¸ªèµ„æºç‰¹æ€§åŠåœ°å€çš„åˆ—è¡¨çš„å®ä½“ï¼Œä»¥ä¾¿ç”¨æˆ·æˆ–æµè§ˆå™¨ä»ä¸­é€‰æ‹©æœ€åˆé€‚çš„é‡å®šå‘åœ°å€ã€‚è¿™ä¸ªå®ä½“çš„æ ¼å¼ç”±Content-Typeå®šä¹‰çš„æ ¼å¼æ‰€å†³å®šã€‚æµè§ˆå™¨å¯èƒ½æ ¹æ®å“åº”çš„æ ¼å¼ä»¥åŠæµè§ˆå™¨è‡ªèº«èƒ½åŠ›ï¼Œè‡ªåŠ¨ä½œå‡ºæœ€åˆé€‚çš„é€‰æ‹©ã€‚å½“ç„¶ï¼ŒRFC 2616è§„èŒƒå¹¶æ²¡æœ‰è§„å®šè¿™æ ·çš„è‡ªåŠ¨é€‰æ‹©è¯¥å¦‚ä½•è¿›è¡Œã€‚</p>
<p>â€‹    å¦‚æœæœåŠ¡å™¨æœ¬èº«å·²ç»æœ‰äº†é¦–é€‰çš„å›é¦ˆé€‰æ‹©ï¼Œé‚£ä¹ˆåœ¨Locationä¸­åº”å½“æŒ‡æ˜è¿™ä¸ªå›é¦ˆçš„URIï¼›æµè§ˆå™¨å¯èƒ½ä¼šå°†è¿™ä¸ªLocationå€¼ä½œä¸ºè‡ªåŠ¨é‡å®šå‘çš„åœ°å€ã€‚æ­¤å¤–ï¼Œé™¤éé¢å¤–æŒ‡å®šï¼Œå¦åˆ™è¿™ä¸ªå“åº”ä¹Ÿæ˜¯å¯ç¼“å­˜çš„ã€‚</p>
<h4 id="301-Moved-Permanently"><a href="#301-Moved-Permanently" class="headerlink" title="301 Moved Permanently"></a>301 Moved Permanently</h4><p>â€‹    è¢«è¯·æ±‚çš„èµ„æºå·²æ°¸ä¹…ç§»åŠ¨åˆ°æ–°ä½ç½®ï¼Œå¹¶ä¸”å°†æ¥ä»»ä½•å¯¹æ­¤èµ„æºçš„å¼•ç”¨éƒ½åº”è¯¥ä½¿ç”¨æœ¬å“åº”è¿”å›çš„è‹¥å¹²ä¸ªURIä¹‹ä¸€ã€‚å¦‚æœå¯èƒ½ï¼Œæ‹¥æœ‰é“¾æ¥ç¼–è¾‘åŠŸèƒ½çš„å®¢æˆ·ç«¯åº”å½“è‡ªåŠ¨æŠŠè¯·æ±‚çš„åœ°å€ä¿®æ”¹ä¸ºä»æœåŠ¡å™¨åé¦ˆå›æ¥çš„åœ°å€ã€‚é™¤éé¢å¤–æŒ‡å®šï¼Œå¦åˆ™è¿™ä¸ªå“åº”ä¹Ÿæ˜¯å¯ç¼“å­˜çš„ã€‚</p>
<p>â€‹    æ–°çš„æ°¸ä¹…æ€§çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚</p>
<p>â€‹    å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªGETæˆ–è€…HEADè¯·æ±‚ï¼Œå› æ­¤æµè§ˆå™¨ç¦æ­¢è‡ªåŠ¨è¿›è¡Œé‡å®šå‘ï¼Œé™¤éå¾—åˆ°ç”¨æˆ·çš„ç¡®è®¤ï¼Œå› ä¸ºè¯·æ±‚çš„æ¡ä»¶å¯èƒ½å› æ­¤å‘ç”Ÿå˜åŒ–ã€‚</p>
<p>â€‹    æ³¨æ„ï¼šå¯¹äºæŸäº›ä½¿ç”¨HTTP/1.0åè®®çš„æµè§ˆå™¨ï¼Œå½“å®ƒä»¬å‘é€çš„POSTè¯·æ±‚å¾—åˆ°äº†ä¸€ä¸ª301å“åº”çš„è¯ï¼Œæ¥ä¸‹æ¥çš„é‡å®šå‘è¯·æ±‚å°†ä¼šå˜æˆGETæ–¹å¼ã€‚</p>
<h4 id="302-Found"><a href="#302-Found" class="headerlink" title="302 Found"></a>302 Found</h4><p>â€‹    è¯·æ±‚çš„èµ„æºç°åœ¨ä¸´æ—¶ä»ä¸åŒçš„URIå“åº”è¯·æ±‚ã€‚ç”±äºè¿™æ ·çš„é‡å®šå‘æ˜¯ä¸´æ—¶çš„ï¼Œå®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘åŸæœ‰åœ°å€å‘é€ä»¥åçš„è¯·æ±‚ã€‚åªæœ‰åœ¨Cache-Controlæˆ–Expiresä¸­è¿›è¡Œäº†æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå“åº”æ‰æ˜¯å¯ç¼“å­˜çš„ã€‚</p>
<p>â€‹    æ–°çš„ä¸´æ—¶æ€§çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚</p>
<p>â€‹    å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªGETæˆ–è€…HEADè¯·æ±‚ï¼Œé‚£ä¹ˆæµè§ˆå™¨ç¦æ­¢è‡ªåŠ¨è¿›è¡Œé‡å®šå‘ï¼Œé™¤éå¾—åˆ°ç”¨æˆ·çš„ç¡®è®¤ï¼Œå› ä¸ºè¯·æ±‚çš„æ¡ä»¶å¯èƒ½å› æ­¤å‘ç”Ÿå˜åŒ–ã€‚</p>
<p>â€‹    æ³¨æ„ï¼šè™½ç„¶RFC 1945å’ŒRFC 2068è§„èŒƒä¸å…è®¸å®¢æˆ·ç«¯åœ¨é‡å®šå‘æ—¶æ”¹å˜è¯·æ±‚çš„æ–¹æ³•ï¼Œä½†æ˜¯å¾ˆå¤šç°å­˜çš„æµè§ˆå™¨å°†302å“åº”è§†ä½œä¸º303å“åº”ï¼Œå¹¶ä¸”ä½¿ç”¨GETæ–¹å¼è®¿é—®åœ¨Locationä¸­è§„å®šçš„URIï¼Œè€Œæ— è§†åŸå…ˆè¯·æ±‚çš„æ–¹æ³•ã€‚çŠ¶æ€ç 303å’Œ307è¢«æ·»åŠ äº†è¿›æ¥ï¼Œç”¨ä»¥æ˜ç¡®æœåŠ¡å™¨æœŸå¾…å®¢æˆ·ç«¯è¿›è¡Œä½•ç§ååº”ã€‚</p>
<h4 id="303-See-Other"><a href="#303-See-Other" class="headerlink" title="303 See Other"></a>303 See Other</h4><p>â€‹    å¯¹åº”å½“å‰è¯·æ±‚çš„å“åº”å¯ä»¥åœ¨å¦ä¸€ä¸ªURIä¸Šè¢«æ‰¾åˆ°ï¼Œè€Œä¸”å®¢æˆ·ç«¯åº”å½“é‡‡ç”¨GETçš„æ–¹å¼è®¿é—®é‚£ä¸ªèµ„æºã€‚è¿™ä¸ªæ–¹æ³•çš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†å…è®¸ç”±è„šæœ¬æ¿€æ´»çš„POSTè¯·æ±‚è¾“å‡ºé‡å®šå‘åˆ°ä¸€ä¸ªæ–°çš„èµ„æºã€‚è¿™ä¸ªæ–°çš„URIä¸æ˜¯åŸå§‹èµ„æºçš„æ›¿ä»£å¼•ç”¨ã€‚åŒæ—¶ï¼Œ303å“åº”ç¦æ­¢è¢«ç¼“å­˜ã€‚å½“ç„¶ï¼Œç¬¬äºŒä¸ªè¯·æ±‚ï¼ˆé‡å®šå‘ï¼‰å¯èƒ½è¢«ç¼“å­˜ã€‚</p>
<p>â€‹    æ–°çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚</p>
<p>â€‹    æ³¨æ„ï¼šè®¸å¤šHTTP/1.1ç‰ˆä»¥å‰çš„æµè§ˆå™¨ä¸èƒ½æ­£ç¡®ç†è§£303çŠ¶æ€ã€‚å¦‚æœéœ€è¦è€ƒè™‘ä¸è¿™äº›æµè§ˆå™¨ä¹‹é—´çš„äº’åŠ¨ï¼Œ302çŠ¶æ€ç åº”è¯¥å¯ä»¥èƒœä»»ï¼Œå› ä¸ºå¤§å¤šæ•°çš„æµè§ˆå™¨å¤„ç†302å“åº”æ—¶çš„æ–¹å¼æ°æ°å°±æ˜¯ä¸Šè¿°è§„èŒƒè¦æ±‚å®¢æˆ·ç«¯å¤„ç†303å“åº”æ—¶åº”å½“åšçš„ã€‚</p>
<h4 id="304-Not-Modified"><a href="#304-Not-Modified" class="headerlink" title="304 Not Modified"></a>304 Not Modified</h4><p>â€‹    å¦‚æœå®¢æˆ·ç«¯å‘é€äº†ä¸€ä¸ªå¸¦æ¡ä»¶çš„GETè¯·æ±‚ä¸”è¯¥è¯·æ±‚å·²è¢«å…è®¸ï¼Œè€Œæ–‡æ¡£çš„å†…å®¹ï¼ˆè‡ªä¸Šæ¬¡è®¿é—®ä»¥æ¥æˆ–è€…æ ¹æ®è¯·æ±‚çš„æ¡ä»¶ï¼‰å¹¶æ²¡æœ‰æ”¹å˜ï¼Œåˆ™æœåŠ¡å™¨åº”å½“è¿”å›è¿™ä¸ªçŠ¶æ€ç ã€‚304å“åº”ç¦æ­¢åŒ…å«æ¶ˆæ¯ä½“ï¼Œå› æ­¤å§‹ç»ˆä»¥æ¶ˆæ¯å¤´åçš„ç¬¬ä¸€ä¸ªç©ºè¡Œç»“å°¾ã€‚</p>
<p>â€‹    è¯¥å“åº”å¿…é¡»åŒ…å«ä»¥ä¸‹çš„å¤´ä¿¡æ¯ï¼š</p>
<blockquote>
<p>Dateï¼Œé™¤éè¿™ä¸ªæœåŠ¡å™¨æ²¡æœ‰æ—¶é’Ÿã€‚å‡å¦‚æ²¡æœ‰æ—¶é’Ÿçš„æœåŠ¡å™¨ä¹Ÿéµå®ˆè¿™äº›è§„åˆ™ï¼Œé‚£ä¹ˆä»£ç†æœåŠ¡å™¨ä»¥åŠå®¢æˆ·ç«¯å¯ä»¥è‡ªè¡Œå°†Dateå­—æ®µæ·»åŠ åˆ°æ¥æ”¶åˆ°çš„å“åº”å¤´ä¸­å»ï¼ˆæ­£å¦‚RFC 2068ä¸­è§„å®šçš„ä¸€æ ·ï¼‰ï¼Œç¼“å­˜æœºåˆ¶å°†ä¼šæ­£å¸¸å·¥ä½œã€‚</p>
<p>ETagå’Œï¼æˆ–Content-Locationï¼Œå‡å¦‚åŒæ ·çš„è¯·æ±‚æœ¬åº”è¿”å›200å“åº”ã€‚</p>
<p>Expires, Cache-Controlï¼Œå’Œï¼æˆ–Varyï¼Œå‡å¦‚å…¶å€¼å¯èƒ½ä¸ä¹‹å‰ç›¸åŒå˜é‡çš„å…¶ä»–å“åº”å¯¹åº”çš„å€¼ä¸åŒçš„è¯ã€‚</p>
</blockquote>
<p>â€‹    å‡å¦‚æœ¬å“åº”è¯·æ±‚ä½¿ç”¨äº†å¼ºç¼“å­˜éªŒè¯ï¼Œé‚£ä¹ˆæœ¬æ¬¡å“åº”ä¸åº”è¯¥åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›å¦åˆ™ï¼ˆä¾‹å¦‚ï¼ŒæŸä¸ªå¸¦æ¡ä»¶çš„GETè¯·æ±‚ä½¿ç”¨äº†å¼±ç¼“å­˜éªŒè¯ï¼‰ï¼Œæœ¬æ¬¡å“åº”ç¦æ­¢åŒ…å«å…¶ä»–å®ä½“å¤´ï¼›è¿™é¿å…äº†ç¼“å­˜äº†çš„å®ä½“å†…å®¹å’Œæ›´æ–°äº†çš„å®ä½“å¤´ä¿¡æ¯ä¹‹é—´çš„ä¸ä¸€è‡´ã€‚</p>
<p>â€‹    å‡å¦‚æŸä¸ª304å“åº”æŒ‡æ˜äº†å½“å‰æŸä¸ªå®ä½“æ²¡æœ‰ç¼“å­˜ï¼Œé‚£ä¹ˆç¼“å­˜ç³»ç»Ÿå¿…é¡»å¿½è§†è¿™ä¸ªå“åº”ï¼Œå¹¶ä¸”é‡å¤å‘é€ä¸åŒ…å«é™åˆ¶æ¡ä»¶çš„è¯·æ±‚ã€‚</p>
<p>â€‹    å‡å¦‚æ¥æ”¶åˆ°ä¸€ä¸ªè¦æ±‚æ›´æ–°æŸä¸ªç¼“å­˜æ¡ç›®çš„304å“åº”ï¼Œé‚£ä¹ˆç¼“å­˜ç³»ç»Ÿå¿…é¡»æ›´æ–°æ•´ä¸ªæ¡ç›®ä»¥åæ˜ æ‰€æœ‰åœ¨å“åº”ä¸­è¢«æ›´æ–°çš„å­—æ®µçš„å€¼ã€‚</p>
<h4 id="305-Use-Proxy"><a href="#305-Use-Proxy" class="headerlink" title="305 Use Proxy"></a>305 Use Proxy</h4><p>â€‹    è¢«è¯·æ±‚çš„èµ„æºå¿…é¡»é€šè¿‡æŒ‡å®šçš„ä»£ç†æ‰èƒ½è¢«è®¿é—®ã€‚LocationåŸŸä¸­å°†ç»™å‡ºæŒ‡å®šçš„ä»£ç†æ‰€åœ¨çš„URIä¿¡æ¯ï¼Œæ¥æ”¶è€…éœ€è¦é‡å¤å‘é€ä¸€ä¸ªå•ç‹¬çš„è¯·æ±‚ï¼Œé€šè¿‡è¿™ä¸ªä»£ç†æ‰èƒ½è®¿é—®ç›¸åº”èµ„æºã€‚åªæœ‰åŸå§‹æœåŠ¡å™¨æ‰èƒ½åˆ›å»º305å“åº”ã€‚</p>
<p>â€‹    æ³¨æ„ï¼šRFC 2068ä¸­æ²¡æœ‰æ˜ç¡®305å“åº”æ˜¯ä¸ºäº†é‡å®šå‘ä¸€ä¸ªå•ç‹¬çš„è¯·æ±‚ï¼Œè€Œä¸”åªèƒ½è¢«åŸå§‹æœåŠ¡å™¨åˆ›å»ºã€‚å¿½è§†è¿™äº›é™åˆ¶å¯èƒ½å¯¼è‡´ä¸¥é‡çš„å®‰å…¨åæœã€‚</p>
<h4 id="306-Switch-Proxy"><a href="#306-Switch-Proxy" class="headerlink" title="306 Switch Proxy"></a>306 Switch Proxy</h4><p>â€‹    åœ¨æœ€æ–°ç‰ˆçš„è§„èŒƒä¸­ï¼Œ306çŠ¶æ€ç å·²ç»ä¸å†è¢«ä½¿ç”¨ã€‚</p>
<h4 id="307-Temporary-Redirect"><a href="#307-Temporary-Redirect" class="headerlink" title="307 Temporary Redirect"></a>307 Temporary Redirect</h4><p>â€‹    è¯·æ±‚çš„èµ„æºç°åœ¨ä¸´æ—¶ä»ä¸åŒçš„URIå“åº”è¯·æ±‚ã€‚ç”±äºè¿™æ ·çš„é‡å®šå‘æ˜¯ä¸´æ—¶çš„ï¼Œå®¢æˆ·ç«¯åº”å½“ç»§ç»­å‘åŸæœ‰åœ°å€å‘é€ä»¥åçš„è¯·æ±‚ã€‚åªæœ‰åœ¨Cache-Controlæˆ–Expiresä¸­è¿›è¡Œäº†æŒ‡å®šçš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªå“åº”æ‰æ˜¯å¯ç¼“å­˜çš„ã€‚</p>
<p>â€‹    æ–°çš„ä¸´æ—¶æ€§çš„URIåº”å½“åœ¨å“åº”çš„LocationåŸŸä¸­è¿”å›ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™å“åº”çš„å®ä½“ä¸­åº”å½“åŒ…å«æŒ‡å‘æ–°çš„URIçš„è¶…é“¾æ¥åŠç®€çŸ­è¯´æ˜ã€‚å› ä¸ºéƒ¨åˆ†æµè§ˆå™¨ä¸èƒ½è¯†åˆ«307å“åº”ï¼Œå› æ­¤éœ€è¦æ·»åŠ ä¸Šè¿°å¿…è¦ä¿¡æ¯ä»¥ä¾¿ç”¨æˆ·èƒ½å¤Ÿç†è§£å¹¶å‘æ–°çš„URIå‘å‡ºè®¿é—®è¯·æ±‚ã€‚</p>
<p>â€‹    å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªGETæˆ–è€…HEADè¯·æ±‚ï¼Œé‚£ä¹ˆæµè§ˆå™¨ç¦æ­¢è‡ªåŠ¨è¿›è¡Œé‡å®šå‘ï¼Œé™¤éå¾—åˆ°ç”¨æˆ·çš„ç¡®è®¤ï¼Œå› ä¸ºè¯·æ±‚çš„æ¡ä»¶å¯èƒ½å› æ­¤å‘ç”Ÿå˜åŒ–ã€‚</p>
<h3 id="4xxå®¢æˆ·ç«¯é”™è¯¯"><a href="#4xxå®¢æˆ·ç«¯é”™è¯¯" class="headerlink" title="4xxå®¢æˆ·ç«¯é”™è¯¯"></a>4xxå®¢æˆ·ç«¯é”™è¯¯</h3><p>â€‹    è¿™ç±»çš„çŠ¶æ€ç ä»£è¡¨äº†å®¢æˆ·ç«¯çœ‹èµ·æ¥å¯èƒ½å‘ç”Ÿäº†é”™è¯¯ï¼Œå¦¨ç¢äº†æœåŠ¡å™¨çš„å¤„ç†ã€‚é™¤éå“åº”çš„æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™æœåŠ¡å™¨å°±åº”è¯¥è¿”å›ä¸€ä¸ªè§£é‡Šå½“å‰é”™è¯¯çŠ¶å†µçš„å®ä½“ï¼Œä»¥åŠè¿™æ˜¯ä¸´æ—¶çš„è¿˜æ˜¯æ°¸ä¹…æ€§çš„çŠ¶å†µã€‚è¿™äº›çŠ¶æ€ç é€‚ç”¨äºä»»ä½•è¯·æ±‚æ–¹æ³•ã€‚æµè§ˆå™¨åº”å½“å‘ç”¨æˆ·æ˜¾ç¤ºä»»ä½•åŒ…å«åœ¨æ­¤ç±»é”™è¯¯å“åº”ä¸­çš„å®ä½“å†…å®¹ã€‚</p>
<p>â€‹    å¦‚æœé”™è¯¯å‘ç”Ÿæ—¶å®¢æˆ·ç«¯æ­£åœ¨ä¼ é€æ•°æ®ï¼Œé‚£ä¹ˆä½¿ç”¨TCPçš„æœåŠ¡å™¨å®ç°åº”å½“ä»”ç»†ç¡®ä¿åœ¨å…³é—­å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ä¹‹å‰ï¼Œå®¢æˆ·ç«¯å·²ç»æ”¶åˆ°äº†åŒ…å«é”™è¯¯ä¿¡æ¯çš„æ•°æ®åŒ…ã€‚å¦‚æœå®¢æˆ·ç«¯åœ¨æ”¶åˆ°é”™è¯¯ä¿¡æ¯åç»§ç»­å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼ŒæœåŠ¡å™¨çš„TCPæ ˆå°†å‘å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªé‡ç½®æ•°æ®åŒ…ï¼Œä»¥æ¸…é™¤è¯¥å®¢æˆ·ç«¯æ‰€æœ‰è¿˜æœªè¯†åˆ«çš„è¾“å…¥ç¼“å†²ï¼Œä»¥å…è¿™äº›æ•°æ®è¢«æœåŠ¡å™¨ä¸Šçš„åº”ç”¨ç¨‹åºè¯»å–å¹¶å¹²æ‰°åè€…ã€‚</p>
<h4 id="400-Bad-Request"><a href="#400-Bad-Request" class="headerlink" title="400 Bad Request"></a>400 Bad Request</h4><p>â€‹    ç”±äºåŒ…å«è¯­æ³•é”™è¯¯ï¼Œå½“å‰è¯·æ±‚æ— æ³•è¢«æœåŠ¡å™¨ç†è§£ã€‚é™¤éè¿›è¡Œä¿®æ”¹ï¼Œå¦åˆ™å®¢æˆ·ç«¯ä¸åº”è¯¥é‡å¤æäº¤è¿™ä¸ªè¯·æ±‚ã€‚</p>
<h4 id="401-Unauthorized"><a href="#401-Unauthorized" class="headerlink" title="401 Unauthorized"></a>401 Unauthorized</h4><p>â€‹    å½“å‰è¯·æ±‚éœ€è¦ç”¨æˆ·éªŒè¯ã€‚è¯¥å“åº”å¿…é¡»åŒ…å«ä¸€ä¸ªé€‚ç”¨äºè¢«è¯·æ±‚èµ„æºçš„WWW-Authenticateä¿¡æ¯å¤´ç”¨ä»¥è¯¢é—®ç”¨æˆ·ä¿¡æ¯ã€‚å®¢æˆ·ç«¯å¯ä»¥é‡å¤æäº¤ä¸€ä¸ªåŒ…å«æ°å½“çš„Authorizationå¤´ä¿¡æ¯çš„è¯·æ±‚ã€‚å¦‚æœå½“å‰è¯·æ±‚å·²ç»åŒ…å«äº†Authorizationè¯ä¹¦ï¼Œé‚£ä¹ˆ401å“åº”ä»£è¡¨ç€æœåŠ¡å™¨éªŒè¯å·²ç»æ‹’ç»äº†é‚£äº›è¯ä¹¦ã€‚å¦‚æœ401å“åº”åŒ…å«äº†ä¸å‰ä¸€ä¸ªå“åº”ç›¸åŒçš„èº«ä»½éªŒè¯è¯¢é—®ï¼Œä¸”æµè§ˆå™¨å·²ç»è‡³å°‘å°è¯•äº†ä¸€æ¬¡éªŒè¯ï¼Œé‚£ä¹ˆæµè§ˆå™¨åº”å½“å‘ç”¨æˆ·å±•ç¤ºå“åº”ä¸­åŒ…å«çš„å®ä½“ä¿¡æ¯ï¼Œå› ä¸ºè¿™ä¸ªå®ä½“ä¿¡æ¯ä¸­å¯èƒ½åŒ…å«äº†ç›¸å…³è¯Šæ–­ä¿¡æ¯ã€‚å‚è§RFC 2617ã€‚</p>
<h4 id="402-Payment-Required"><a href="#402-Payment-Required" class="headerlink" title="402 Payment Required"></a>402 Payment Required</h4><p>â€‹    è¯¥çŠ¶æ€ç æ˜¯ä¸ºäº†å°†æ¥å¯èƒ½çš„éœ€æ±‚è€Œé¢„ç•™çš„ã€‚</p>
<h4 id="403-Forbidden"><a href="#403-Forbidden" class="headerlink" title="403 Forbidden"></a>403 Forbidden</h4><p>â€‹    æœåŠ¡å™¨å·²ç»ç†è§£è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æ‰§è¡Œå®ƒã€‚ä¸401å“åº”ä¸åŒçš„æ˜¯ï¼Œèº«ä»½éªŒè¯å¹¶ä¸èƒ½æä¾›ä»»ä½•å¸®åŠ©ï¼Œè€Œä¸”è¿™ä¸ªè¯·æ±‚ä¹Ÿä¸åº”è¯¥è¢«é‡å¤æäº¤ã€‚å¦‚æœè¿™ä¸æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œè€Œä¸”æœåŠ¡å™¨å¸Œæœ›èƒ½å¤Ÿè®²æ¸…æ¥šä¸ºä½•è¯·æ±‚ä¸èƒ½è¢«æ‰§è¡Œï¼Œé‚£ä¹ˆå°±åº”è¯¥åœ¨å®ä½“å†…æè¿°æ‹’ç»çš„åŸå› ã€‚å½“ç„¶æœåŠ¡å™¨ä¹Ÿå¯ä»¥è¿”å›ä¸€ä¸ª404å“åº”ï¼Œå‡å¦‚å®ƒä¸å¸Œæœ›è®©å®¢æˆ·ç«¯è·å¾—ä»»ä½•ä¿¡æ¯ã€‚</p>
<h4 id="404-Not-Found"><a href="#404-Not-Found" class="headerlink" title="404 Not Found"></a>404 Not Found</h4><p>â€‹    è¯·æ±‚å¤±è´¥ï¼Œè¯·æ±‚æ‰€å¸Œæœ›å¾—åˆ°çš„èµ„æºæœªè¢«åœ¨æœåŠ¡å™¨ä¸Šå‘ç°ã€‚æ²¡æœ‰ä¿¡æ¯èƒ½å¤Ÿå‘Šè¯‰ç”¨æˆ·è¿™ä¸ªçŠ¶å†µåˆ°åº•æ˜¯æš‚æ—¶çš„è¿˜æ˜¯æ°¸ä¹…çš„ã€‚å‡å¦‚æœåŠ¡å™¨çŸ¥é“æƒ…å†µçš„è¯ï¼Œåº”å½“ä½¿ç”¨410çŠ¶æ€ç æ¥å‘ŠçŸ¥æ—§èµ„æºå› ä¸ºæŸäº›å†…éƒ¨çš„é…ç½®æœºåˆ¶é—®é¢˜ï¼Œå·²ç»æ°¸ä¹…çš„ä¸å¯ç”¨ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å¯ä»¥è·³è½¬çš„åœ°å€ã€‚404è¿™ä¸ªçŠ¶æ€ç è¢«å¹¿æ³›åº”ç”¨äºå½“æœåŠ¡å™¨ä¸æƒ³æ­ç¤ºåˆ°åº•ä¸ºä½•è¯·æ±‚è¢«æ‹’ç»æˆ–è€…æ²¡æœ‰å…¶ä»–é€‚åˆçš„å“åº”å¯ç”¨çš„æƒ…å†µä¸‹ã€‚</p>
<h4 id="405-Method-Not-Allowed"><a href="#405-Method-Not-Allowed" class="headerlink" title="405 Method Not Allowed"></a>405 Method Not Allowed</h4><p>â€‹    è¯·æ±‚è¡Œä¸­æŒ‡å®šçš„è¯·æ±‚æ–¹æ³•ä¸èƒ½è¢«ç”¨äºè¯·æ±‚ç›¸åº”çš„èµ„æºã€‚è¯¥å“åº”å¿…é¡»è¿”å›ä¸€ä¸ªAllowå¤´ä¿¡æ¯ç”¨ä»¥è¡¨ç¤ºå‡ºå½“å‰èµ„æºèƒ½å¤Ÿæ¥å—çš„è¯·æ±‚æ–¹æ³•çš„åˆ—è¡¨ã€‚</p>
<p>â€‹    é‰´äºPUTï¼ŒDELETEæ–¹æ³•ä¼šå¯¹æœåŠ¡å™¨ä¸Šçš„èµ„æºè¿›è¡Œå†™æ“ä½œï¼Œå› è€Œç»å¤§éƒ¨åˆ†çš„ç½‘é¡µæœåŠ¡å™¨éƒ½ä¸æ”¯æŒæˆ–è€…åœ¨é»˜è®¤é…ç½®ä¸‹ä¸å…è®¸ä¸Šè¿°è¯·æ±‚æ–¹æ³•ï¼Œå¯¹äºæ­¤ç±»è¯·æ±‚å‡ä¼šè¿”å›405é”™è¯¯ã€‚</p>
<h4 id="406-Not-Acceptable"><a href="#406-Not-Acceptable" class="headerlink" title="406 Not Acceptable"></a>406 Not Acceptable</h4><p>â€‹    è¯·æ±‚çš„èµ„æºçš„å†…å®¹ç‰¹æ€§æ— æ³•æ»¡è¶³è¯·æ±‚å¤´ä¸­çš„æ¡ä»¶ï¼Œå› è€Œæ— æ³•ç”Ÿæˆå“åº”å®ä½“ã€‚</p>
<p>â€‹    é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™è¯¥å“åº”å°±åº”å½“è¿”å›ä¸€ä¸ªåŒ…å«å¯ä»¥è®©ç”¨æˆ·æˆ–è€…æµè§ˆå™¨ä»ä¸­é€‰æ‹©æœ€åˆé€‚çš„å®ä½“ç‰¹æ€§ä»¥åŠåœ°å€åˆ—è¡¨çš„å®ä½“ã€‚å®ä½“çš„æ ¼å¼ç”±Content-Typeå¤´ä¸­å®šä¹‰çš„åª’ä½“ç±»å‹å†³å®šã€‚æµè§ˆå™¨å¯ä»¥æ ¹æ®æ ¼å¼åŠè‡ªèº«èƒ½åŠ›è‡ªè¡Œä½œå‡ºæœ€ä½³é€‰æ‹©ã€‚ä½†æ˜¯ï¼Œè§„èŒƒä¸­å¹¶æ²¡æœ‰å®šä¹‰ä»»ä½•ä½œå‡ºæ­¤ç±»è‡ªåŠ¨é€‰æ‹©çš„æ ‡å‡†ã€‚</p>
<h4 id="407-Proxy-Authentication-Required"><a href="#407-Proxy-Authentication-Required" class="headerlink" title="407 Proxy Authentication Required"></a>407 Proxy Authentication Required</h4><p>â€‹    ä¸401å“åº”ç±»ä¼¼ï¼Œåªä¸è¿‡å®¢æˆ·ç«¯å¿…é¡»åœ¨ä»£ç†æœåŠ¡å™¨ä¸Šè¿›è¡Œèº«ä»½éªŒè¯ã€‚ä»£ç†æœåŠ¡å™¨å¿…é¡»è¿”å›ä¸€ä¸ªProxy-Authenticateç”¨ä»¥è¿›è¡Œèº«ä»½è¯¢é—®ã€‚å®¢æˆ·ç«¯å¯ä»¥è¿”å›ä¸€ä¸ªProxy-Authorizationä¿¡æ¯å¤´ç”¨ä»¥éªŒè¯ã€‚å‚è§RFC 2617ã€‚</p>
<h4 id="408-Request-Timeout"><a href="#408-Request-Timeout" class="headerlink" title="408 Request Timeout"></a>408 Request Timeout</h4><p>â€‹    è¯·æ±‚è¶…æ—¶ã€‚å®¢æˆ·ç«¯æ²¡æœ‰åœ¨æœåŠ¡å™¨é¢„å¤‡ç­‰å¾…çš„æ—¶é—´å†…å®Œæˆä¸€ä¸ªè¯·æ±‚çš„å‘é€ã€‚å®¢æˆ·ç«¯å¯ä»¥éšæ—¶å†æ¬¡æäº¤è¿™ä¸€è¯·æ±‚è€Œæ— éœ€è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚</p>
<h4 id="409-Conflict"><a href="#409-Conflict" class="headerlink" title="409 Conflict"></a>409 Conflict</h4><p>â€‹    ç”±äºå’Œè¢«è¯·æ±‚çš„èµ„æºçš„å½“å‰çŠ¶æ€ä¹‹é—´å­˜åœ¨å†²çªï¼Œè¯·æ±‚æ— æ³•å®Œæˆã€‚è¿™ä¸ªä»£ç åªå…è®¸ç”¨åœ¨è¿™æ ·çš„æƒ…å†µä¸‹æ‰èƒ½è¢«ä½¿ç”¨ï¼šç”¨æˆ·è¢«è®¤ä¸ºèƒ½å¤Ÿè§£å†³å†²çªï¼Œå¹¶ä¸”ä¼šé‡æ–°æäº¤æ–°çš„è¯·æ±‚ã€‚è¯¥å“åº”åº”å½“åŒ…å«è¶³å¤Ÿçš„ä¿¡æ¯ä»¥ä¾¿ç”¨æˆ·å‘ç°å†²çªçš„æºå¤´ã€‚</p>
<p>â€‹    å†²çªé€šå¸¸å‘ç”Ÿäºå¯¹PUTè¯·æ±‚çš„å¤„ç†ä¸­ã€‚ä¾‹å¦‚ï¼Œåœ¨é‡‡ç”¨ç‰ˆæœ¬æ£€æŸ¥çš„ç¯å¢ƒä¸‹ï¼ŒæŸæ¬¡PUTæäº¤çš„å¯¹ç‰¹å®šèµ„æºçš„ä¿®æ”¹è¯·æ±‚æ‰€é™„å¸¦çš„ç‰ˆæœ¬ä¿¡æ¯ä¸ä¹‹å‰çš„æŸä¸ªï¼ˆç¬¬ä¸‰æ–¹ï¼‰è¯·æ±‚å‘å†²çªï¼Œé‚£ä¹ˆæ­¤æ—¶æœåŠ¡å™¨å°±åº”è¯¥è¿”å›ä¸€ä¸ª409é”™è¯¯ï¼Œå‘ŠçŸ¥ç”¨æˆ·è¯·æ±‚æ— æ³•å®Œæˆã€‚æ­¤æ—¶ï¼Œå“åº”å®ä½“ä¸­å¾ˆå¯èƒ½ä¼šåŒ…å«ä¸¤ä¸ªå†²çªç‰ˆæœ¬ä¹‹é—´çš„å·®å¼‚æ¯”è¾ƒï¼Œä»¥ä¾¿ç”¨æˆ·é‡æ–°æäº¤å½’å¹¶ä»¥åçš„æ–°ç‰ˆæœ¬ã€‚</p>
<h4 id="410-Gone"><a href="#410-Gone" class="headerlink" title="410 Gone"></a>410 Gone</h4><p>â€‹    è¢«è¯·æ±‚çš„èµ„æºåœ¨æœåŠ¡å™¨ä¸Šå·²ç»ä¸å†å¯ç”¨ï¼Œè€Œä¸”æ²¡æœ‰ä»»ä½•å·²çŸ¥çš„è½¬å‘åœ°å€ã€‚è¿™æ ·çš„çŠ¶å†µåº”å½“è¢«è®¤ä¸ºæ˜¯æ°¸ä¹…æ€§çš„ã€‚å¦‚æœå¯èƒ½ï¼Œæ‹¥æœ‰é“¾æ¥ç¼–è¾‘åŠŸèƒ½çš„å®¢æˆ·ç«¯åº”å½“åœ¨è·å¾—ç”¨æˆ·è®¸å¯ååˆ é™¤æ‰€æœ‰æŒ‡å‘è¿™ä¸ªåœ°å€çš„å¼•ç”¨ã€‚å¦‚æœæœåŠ¡å™¨ä¸çŸ¥é“æˆ–è€…æ— æ³•ç¡®å®šè¿™ä¸ªçŠ¶å†µæ˜¯å¦æ˜¯æ°¸ä¹…çš„ï¼Œé‚£ä¹ˆå°±åº”è¯¥ä½¿ç”¨404çŠ¶æ€ç ã€‚é™¤éé¢å¤–è¯´æ˜ï¼Œå¦åˆ™è¿™ä¸ªå“åº”æ˜¯å¯ç¼“å­˜çš„ã€‚</p>
<p>â€‹    410å“åº”çš„ç›®çš„ä¸»è¦æ˜¯å¸®åŠ©ç½‘ç«™ç®¡ç†å‘˜ç»´æŠ¤ç½‘ç«™ï¼Œé€šçŸ¥ç”¨æˆ·è¯¥èµ„æºå·²ç»ä¸å†å¯ç”¨ï¼Œå¹¶ä¸”æœåŠ¡å™¨æ‹¥æœ‰è€…å¸Œæœ›æ‰€æœ‰æŒ‡å‘è¿™ä¸ªèµ„æºçš„è¿œç«¯è¿æ¥ä¹Ÿè¢«åˆ é™¤ã€‚è¿™ç±»äº‹ä»¶åœ¨é™æ—¶ã€å¢å€¼æœåŠ¡ä¸­å¾ˆæ™®éã€‚åŒæ ·ï¼Œ410å“åº”ä¹Ÿè¢«ç”¨äºé€šçŸ¥å®¢æˆ·ç«¯åœ¨å½“å‰æœåŠ¡å™¨ç«™ç‚¹ä¸Šï¼ŒåŸæœ¬å±äºæŸä¸ªä¸ªäººçš„èµ„æºå·²ç»ä¸å†å¯ç”¨ã€‚å½“ç„¶ï¼Œæ˜¯å¦éœ€è¦æŠŠæ‰€æœ‰æ°¸ä¹…ä¸å¯ç”¨çš„èµ„æºæ ‡è®°ä¸ºâ€™410 Goneâ€™ï¼Œä»¥åŠæ˜¯å¦éœ€è¦ä¿æŒæ­¤æ ‡è®°å¤šé•¿æ—¶é—´ï¼Œå®Œå…¨å–å†³äºæœåŠ¡å™¨æ‹¥æœ‰è€…ã€‚</p>
<h4 id="411-Length-Required"><a href="#411-Length-Required" class="headerlink" title="411 Length Required"></a>411 Length Required</h4><p>â€‹    æœåŠ¡å™¨æ‹’ç»åœ¨æ²¡æœ‰å®šä¹‰Content-Lengthå¤´çš„æƒ…å†µä¸‹æ¥å—è¯·æ±‚ã€‚åœ¨æ·»åŠ äº†è¡¨æ˜è¯·æ±‚æ¶ˆæ¯ä½“é•¿åº¦çš„æœ‰æ•ˆContent-Lengthå¤´ä¹‹åï¼Œå®¢æˆ·ç«¯å¯ä»¥å†æ¬¡æäº¤è¯¥è¯·æ±‚ã€‚</p>
<h4 id="412-Precondition-Failed"><a href="#412-Precondition-Failed" class="headerlink" title="412 Precondition Failed"></a>412 Precondition Failed</h4><p>â€‹    æœåŠ¡å™¨åœ¨éªŒè¯åœ¨è¯·æ±‚çš„å¤´å­—æ®µä¸­ç»™å‡ºå…ˆå†³æ¡ä»¶æ—¶ï¼Œæ²¡èƒ½æ»¡è¶³å…¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªã€‚è¿™ä¸ªçŠ¶æ€ç å…è®¸å®¢æˆ·ç«¯åœ¨è·å–èµ„æºæ—¶åœ¨è¯·æ±‚çš„å…ƒä¿¡æ¯ï¼ˆè¯·æ±‚å¤´å­—æ®µæ•°æ®ï¼‰ä¸­è®¾ç½®å…ˆå†³æ¡ä»¶ï¼Œä»¥æ­¤é¿å…è¯¥è¯·æ±‚æ–¹æ³•è¢«åº”ç”¨åˆ°å…¶å¸Œæœ›çš„å†…å®¹ä»¥å¤–çš„èµ„æºä¸Šã€‚</p>
<h4 id="413-Request-Entity-Too-Large"><a href="#413-Request-Entity-Too-Large" class="headerlink" title="413 Request Entity Too Large"></a>413 Request Entity Too Large</h4><p>â€‹    æœåŠ¡å™¨æ‹’ç»å¤„ç†å½“å‰è¯·æ±‚ï¼Œå› ä¸ºè¯¥è¯·æ±‚æäº¤çš„å®ä½“æ•°æ®å¤§å°è¶…è¿‡äº†æœåŠ¡å™¨æ„¿æ„æˆ–è€…èƒ½å¤Ÿå¤„ç†çš„èŒƒå›´ã€‚æ­¤ç§æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨å¯ä»¥å…³é—­è¿æ¥ä»¥å…å®¢æˆ·ç«¯ç»§ç»­å‘é€æ­¤è¯·æ±‚ã€‚</p>
<p>â€‹    å¦‚æœè¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„ï¼ŒæœåŠ¡å™¨åº”å½“è¿”å›ä¸€ä¸ªRetry-Afterçš„å“åº”å¤´ï¼Œä»¥å‘ŠçŸ¥å®¢æˆ·ç«¯å¯ä»¥åœ¨å¤šå°‘æ—¶é—´ä»¥åé‡æ–°å°è¯•ã€‚</p>
<h4 id="414-Request-URI-Too-Long"><a href="#414-Request-URI-Too-Long" class="headerlink" title="414 Request-URI Too Long"></a>414 Request-URI Too Long</h4><p>â€‹    è¯·æ±‚çš„URIé•¿åº¦è¶…è¿‡äº†æœåŠ¡å™¨èƒ½å¤Ÿè§£é‡Šçš„é•¿åº¦ï¼Œå› æ­¤æœåŠ¡å™¨æ‹’ç»å¯¹è¯¥è¯·æ±‚æä¾›æœåŠ¡ã€‚è¿™æ¯”è¾ƒå°‘è§ï¼Œé€šå¸¸çš„æƒ…å†µåŒ…æ‹¬ï¼š</p>
<p>â€‹        æœ¬åº”ä½¿ç”¨POSTæ–¹æ³•çš„è¡¨å•æäº¤å˜æˆäº†GETæ–¹æ³•ï¼Œå¯¼è‡´æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆQuery Stringï¼‰è¿‡é•¿ã€‚</p>
<p>â€‹        é‡å®šå‘URIâ€œé»‘æ´â€ï¼Œä¾‹å¦‚æ¯æ¬¡é‡å®šå‘æŠŠæ—§çš„URIä½œä¸ºæ–°çš„URIçš„ä¸€éƒ¨åˆ†ï¼Œå¯¼è‡´åœ¨è‹¥å¹²æ¬¡é‡å®šå‘åURIè¶…é•¿ã€‚</p>
<p>â€‹        å®¢æˆ·ç«¯æ­£åœ¨å°è¯•åˆ©ç”¨æŸäº›æœåŠ¡å™¨ä¸­å­˜åœ¨çš„å®‰å…¨æ¼æ´æ”»å‡»æœåŠ¡å™¨ã€‚è¿™ç±»æœåŠ¡å™¨ä½¿ç”¨å›ºå®šé•¿åº¦çš„ç¼“å†²è¯»å–æˆ–æ“ä½œè¯·æ±‚çš„URIï¼Œå½“GETåçš„å‚æ•°è¶…è¿‡æŸä¸ªæ•°å€¼åï¼Œå¯èƒ½ä¼šäº§ç”Ÿç¼“å†²åŒºæº¢å‡ºï¼Œå¯¼è‡´ä»»æ„ä»£ç è¢«æ‰§è¡Œ[1]ã€‚æ²¡æœ‰æ­¤ç±»æ¼æ´çš„æœåŠ¡å™¨ï¼Œåº”å½“è¿”å›414çŠ¶æ€ç ã€‚</p>
<h4 id="415-Unsupported-Media-Type"><a href="#415-Unsupported-Media-Type" class="headerlink" title="415 Unsupported Media Type"></a>415 Unsupported Media Type</h4><p>â€‹    å¯¹äºå½“å‰è¯·æ±‚çš„æ–¹æ³•å’Œæ‰€è¯·æ±‚çš„èµ„æºï¼Œè¯·æ±‚ä¸­æäº¤çš„å®ä½“å¹¶ä¸æ˜¯æœåŠ¡å™¨ä¸­æ‰€æ”¯æŒçš„æ ¼å¼ï¼Œå› æ­¤è¯·æ±‚è¢«æ‹’ç»ã€‚</p>
<p>416 Requested Range Not Satisfiable</p>
<p>â€‹    å¦‚æœè¯·æ±‚ä¸­åŒ…å«äº†Rangeè¯·æ±‚å¤´ï¼Œå¹¶ä¸”Rangeä¸­æŒ‡å®šçš„ä»»ä½•æ•°æ®èŒƒå›´éƒ½ä¸å½“å‰èµ„æºçš„å¯ç”¨èŒƒå›´ä¸é‡åˆï¼ŒåŒæ—¶è¯·æ±‚ä¸­åˆæ²¡æœ‰å®šä¹‰If-Rangeè¯·æ±‚å¤´ï¼Œé‚£ä¹ˆæœåŠ¡å™¨å°±åº”å½“è¿”å›416çŠ¶æ€ç ã€‚</p>
<p>â€‹    å‡å¦‚Rangeä½¿ç”¨çš„æ˜¯å­—èŠ‚èŒƒå›´ï¼Œé‚£ä¹ˆè¿™ç§æƒ…å†µå°±æ˜¯æŒ‡è¯·æ±‚æŒ‡å®šçš„æ‰€æœ‰æ•°æ®èŒƒå›´çš„é¦–å­—èŠ‚ä½ç½®éƒ½è¶…è¿‡äº†å½“å‰èµ„æºçš„é•¿åº¦ã€‚æœåŠ¡å™¨ä¹Ÿåº”å½“åœ¨è¿”å›416çŠ¶æ€ç çš„åŒæ—¶ï¼ŒåŒ…å«ä¸€ä¸ªContent-Rangeå®ä½“å¤´ï¼Œç”¨ä»¥æŒ‡æ˜å½“å‰èµ„æºçš„é•¿åº¦ã€‚è¿™ä¸ªå“åº”ä¹Ÿè¢«ç¦æ­¢ä½¿ç”¨multipart/byterangesä½œä¸ºå…¶Content-Typeã€‚</p>
<h4 id="417-Expectation-Failed"><a href="#417-Expectation-Failed" class="headerlink" title="417 Expectation Failed"></a>417 Expectation Failed</h4><p>â€‹    åœ¨è¯·æ±‚å¤´Expectä¸­æŒ‡å®šçš„é¢„æœŸå†…å®¹æ— æ³•è¢«æœåŠ¡å™¨æ»¡è¶³ï¼Œæˆ–è€…è¿™ä¸ªæœåŠ¡å™¨æ˜¯ä¸€ä¸ªä»£ç†æœåŠ¡å™¨ï¼Œå®ƒæœ‰æ˜æ˜¾çš„è¯æ®è¯æ˜åœ¨å½“å‰è·¯ç”±çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼ŒExpectçš„å†…å®¹æ— æ³•è¢«æ»¡è¶³ã€‚</p>
<h4 id="418-Iâ€™m-a-teapot"><a href="#418-Iâ€™m-a-teapot" class="headerlink" title="418 Iâ€™m a teapot"></a>418 Iâ€™m a teapot</h4><p>â€‹    æœ¬æ“ä½œç æ˜¯åœ¨1998å¹´ä½œä¸ºIETFçš„ä¼ ç»Ÿæ„šäººèŠ‚ç¬‘è¯, åœ¨RFC 2324è¶…æ–‡æœ¬å’–å•¡å£¶æ§åˆ¶åè®®ä¸­å®šä¹‰çš„ï¼Œå¹¶ä¸éœ€è¦åœ¨çœŸå®çš„HTTPæœåŠ¡å™¨ä¸­å®šä¹‰ã€‚</p>
<h4 id="421-There-are-too-many-connections-from-your-internet-address"><a href="#421-There-are-too-many-connections-from-your-internet-address" class="headerlink" title="421 There are too many connections from your internet address"></a>421 There are too many connections from your internet address</h4><p>â€‹    ä»å½“å‰å®¢æˆ·ç«¯æ‰€åœ¨çš„IPåœ°å€åˆ°æœåŠ¡å™¨çš„è¿æ¥æ•°è¶…è¿‡äº†æœåŠ¡å™¨è®¸å¯çš„æœ€å¤§èŒƒå›´ã€‚é€šå¸¸ï¼Œè¿™é‡Œçš„IPåœ°å€æŒ‡çš„æ˜¯ä»æœåŠ¡å™¨ä¸Šçœ‹åˆ°çš„å®¢æˆ·ç«¯åœ°å€ï¼ˆæ¯”å¦‚ç”¨æˆ·çš„ç½‘å…³æˆ–è€…ä»£ç†æœåŠ¡å™¨åœ°å€ï¼‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿æ¥æ•°çš„è®¡ç®—å¯èƒ½æ¶‰åŠåˆ°ä¸æ­¢ä¸€ä¸ªç»ˆç«¯ç”¨æˆ·ã€‚</p>
<h4 id="422-Unprocessable-Entity"><a href="#422-Unprocessable-Entity" class="headerlink" title="422 Unprocessable Entity"></a>422 Unprocessable Entity</h4><p>â€‹    è¯·æ±‚æ ¼å¼æ­£ç¡®ï¼Œä½†æ˜¯ç”±äºå«æœ‰è¯­ä¹‰é”™è¯¯ï¼Œæ— æ³•å“åº”ã€‚ï¼ˆRFC 4918 WebDAVï¼‰</p>
<h4 id="423-Locked"><a href="#423-Locked" class="headerlink" title="423 Locked"></a>423 Locked</h4><p>â€‹    å½“å‰èµ„æºè¢«é”å®šã€‚ï¼ˆRFC 4918 WebDAVï¼‰</p>
<h4 id="424-Failed-Dependency"><a href="#424-Failed-Dependency" class="headerlink" title="424 Failed Dependency"></a>424 Failed Dependency</h4><p>â€‹    ç”±äºä¹‹å‰çš„æŸä¸ªè¯·æ±‚å‘ç”Ÿçš„é”™è¯¯ï¼Œå¯¼è‡´å½“å‰è¯·æ±‚å¤±è´¥ï¼Œä¾‹å¦‚PROPPATCHã€‚ï¼ˆRFC 4918 WebDAVï¼‰</p>
<h4 id="425-Unordered-Collection"><a href="#425-Unordered-Collection" class="headerlink" title="425 Unordered Collection"></a>425 Unordered Collection</h4><p>â€‹    åœ¨WebDav Advanced Collectionsè‰æ¡ˆä¸­å®šä¹‰ï¼Œä½†æ˜¯æœªå‡ºç°åœ¨ã€ŠWebDAVé¡ºåºé›†åè®®ã€‹ï¼ˆRFC 3658ï¼‰ä¸­ã€‚</p>
<h4 id="426-Upgrade-Required"><a href="#426-Upgrade-Required" class="headerlink" title="426 Upgrade Required"></a>426 Upgrade Required</h4><p>â€‹    å®¢æˆ·ç«¯åº”å½“åˆ‡æ¢åˆ°TLS/1.0ã€‚ï¼ˆRFC 2817ï¼‰</p>
<h4 id="449-Retry-With"><a href="#449-Retry-With" class="headerlink" title="449 Retry With"></a>449 Retry With</h4><p>â€‹    ç”±å¾®è½¯æ‰©å±•ï¼Œä»£è¡¨è¯·æ±‚åº”å½“åœ¨æ‰§è¡Œå®Œé€‚å½“çš„æ“ä½œåè¿›è¡Œé‡è¯•ã€‚</p>
<h3 id="5xxæœåŠ¡å™¨é”™è¯¯"><a href="#5xxæœåŠ¡å™¨é”™è¯¯" class="headerlink" title="5xxæœåŠ¡å™¨é”™è¯¯"></a>5xxæœåŠ¡å™¨é”™è¯¯</h3><p>â€‹    è¿™ç±»çŠ¶æ€ç ä»£è¡¨äº†æœåŠ¡å™¨åœ¨å¤„ç†è¯·æ±‚çš„è¿‡ç¨‹ä¸­æœ‰é”™è¯¯æˆ–è€…å¼‚å¸¸çŠ¶æ€å‘ç”Ÿï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯æœåŠ¡å™¨æ„è¯†åˆ°ä»¥å½“å‰çš„è½¯ç¡¬ä»¶èµ„æºæ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ã€‚é™¤éè¿™æ˜¯ä¸€ä¸ªHEADè¯·æ±‚ï¼Œå¦åˆ™æœåŠ¡å™¨åº”å½“åŒ…å«ä¸€ä¸ªè§£é‡Šå½“å‰é”™è¯¯çŠ¶æ€ä»¥åŠè¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„è¿˜æ˜¯æ°¸ä¹…çš„è§£é‡Šä¿¡æ¯å®ä½“ã€‚æµè§ˆå™¨åº”å½“å‘ç”¨æˆ·å±•ç¤ºä»»ä½•åœ¨å½“å‰å“åº”ä¸­è¢«åŒ…å«çš„å®ä½“ã€‚</p>
<p>â€‹    è¿™äº›çŠ¶æ€ç é€‚ç”¨äºä»»ä½•å“åº”æ–¹æ³•ã€‚</p>
<h4 id="500-Internal-Server-Error"><a href="#500-Internal-Server-Error" class="headerlink" title="500 Internal Server Error"></a>500 Internal Server Error</h4><p>â€‹    æœåŠ¡å™¨é‡åˆ°äº†ä¸€ä¸ªæœªæ›¾é¢„æ–™çš„çŠ¶å†µï¼Œå¯¼è‡´äº†å®ƒæ— æ³•å®Œæˆå¯¹è¯·æ±‚çš„å¤„ç†ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¿™ä¸ªé—®é¢˜éƒ½ä¼šåœ¨æœåŠ¡å™¨çš„ç¨‹åºç å‡ºé”™æ—¶å‡ºç°ã€‚</p>
<h4 id="501-Not-Implemented"><a href="#501-Not-Implemented" class="headerlink" title="501 Not Implemented"></a>501 Not Implemented</h4><p>â€‹    æœåŠ¡å™¨ä¸æ”¯æŒå½“å‰è¯·æ±‚æ‰€éœ€è¦çš„æŸä¸ªåŠŸèƒ½ã€‚å½“æœåŠ¡å™¨æ— æ³•è¯†åˆ«è¯·æ±‚çš„æ–¹æ³•ï¼Œå¹¶ä¸”æ— æ³•æ”¯æŒå…¶å¯¹ä»»ä½•èµ„æºçš„è¯·æ±‚ã€‚</p>
<h4 id="502-Bad-Gateway"><a href="#502-Bad-Gateway" class="headerlink" title="502 Bad Gateway"></a>502 Bad Gateway</h4><p>â€‹    ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œä»ä¸Šæ¸¸æœåŠ¡å™¨æ¥æ”¶åˆ°æ— æ•ˆçš„å“åº”ã€‚</p>
<h4 id="503-Service-Unavailable"><a href="#503-Service-Unavailable" class="headerlink" title="503 Service Unavailable"></a>503 Service Unavailable</h4><p>â€‹    ç”±äºä¸´æ—¶çš„æœåŠ¡å™¨ç»´æŠ¤æˆ–è€…è¿‡è½½ï¼ŒæœåŠ¡å™¨å½“å‰æ— æ³•å¤„ç†è¯·æ±‚ã€‚è¿™ä¸ªçŠ¶å†µæ˜¯ä¸´æ—¶çš„ï¼Œå¹¶ä¸”å°†åœ¨ä¸€æ®µæ—¶é—´ä»¥åæ¢å¤ã€‚å¦‚æœèƒ½å¤Ÿé¢„è®¡å»¶è¿Ÿæ—¶é—´ï¼Œé‚£ä¹ˆå“åº”ä¸­å¯ä»¥åŒ…å«ä¸€ä¸ªRetry-Afterå¤´ç”¨ä»¥æ ‡æ˜è¿™ä¸ªå»¶è¿Ÿæ—¶é—´ã€‚å¦‚æœæ²¡æœ‰ç»™å‡ºè¿™ä¸ªRetry-Afterä¿¡æ¯ï¼Œé‚£ä¹ˆå®¢æˆ·ç«¯åº”å½“ä»¥å¤„ç†500å“åº”çš„æ–¹å¼å¤„ç†å®ƒã€‚</p>
<h4 id="504-Gateway-Timeout"><a href="#504-Gateway-Timeout" class="headerlink" title="504 Gateway Timeout"></a>504 Gateway Timeout</h4><p>â€‹    ä½œä¸ºç½‘å…³æˆ–è€…ä»£ç†å·¥ä½œçš„æœåŠ¡å™¨å°è¯•æ‰§è¡Œè¯·æ±‚æ—¶ï¼Œæœªèƒ½åŠæ—¶ä»ä¸Šæ¸¸æœåŠ¡å™¨ï¼ˆURIæ ‡è¯†å‡ºçš„æœåŠ¡å™¨ï¼Œä¾‹å¦‚HTTPã€FTPã€LDAPï¼‰æˆ–è€…è¾…åŠ©æœåŠ¡å™¨ï¼ˆä¾‹å¦‚DNSï¼‰æ”¶åˆ°å“åº”ã€‚</p>
<p>â€‹    æ³¨æ„ï¼šæŸäº›ä»£ç†æœåŠ¡å™¨åœ¨DNSæŸ¥è¯¢è¶…æ—¶æ—¶ä¼šè¿”å›400æˆ–è€…500é”™è¯¯</p>
<h4 id="505-HTTP-Version-Not-Supported"><a href="#505-HTTP-Version-Not-Supported" class="headerlink" title="505 HTTP Version Not Supported"></a>505 HTTP Version Not Supported</h4><p>â€‹    æœåŠ¡å™¨ä¸æ”¯æŒï¼Œæˆ–è€…æ‹’ç»æ”¯æŒåœ¨è¯·æ±‚ä¸­ä½¿ç”¨çš„HTTPç‰ˆæœ¬ã€‚è¿™æš—ç¤ºç€æœåŠ¡å™¨ä¸èƒ½æˆ–ä¸æ„¿ä½¿ç”¨ä¸å®¢æˆ·ç«¯ç›¸åŒçš„ç‰ˆæœ¬ã€‚å“åº”ä¸­åº”å½“åŒ…å«ä¸€ä¸ªæè¿°äº†ä¸ºä½•ç‰ˆæœ¬ä¸è¢«æ”¯æŒä»¥åŠæœåŠ¡å™¨æ”¯æŒå“ªäº›åè®®çš„å®ä½“ã€‚</p>
<h4 id="506-Variant-Also-Negotiates"><a href="#506-Variant-Also-Negotiates" class="headerlink" title="506 Variant Also Negotiates"></a>506 Variant Also Negotiates</h4><p>â€‹    ç”±ã€Šé€æ˜å†…å®¹åå•†åè®®ã€‹ï¼ˆRFC 2295ï¼‰æ‰©å±•ï¼Œä»£è¡¨æœåŠ¡å™¨å­˜åœ¨å†…éƒ¨é…ç½®é”™è¯¯ï¼šè¢«è¯·æ±‚çš„åå•†å˜å…ƒèµ„æºè¢«é…ç½®ä¸ºåœ¨é€æ˜å†…å®¹åå•†ä¸­ä½¿ç”¨è‡ªå·±ï¼Œå› æ­¤åœ¨ä¸€ä¸ªåå•†å¤„ç†ä¸­ä¸æ˜¯ä¸€ä¸ªåˆé€‚çš„é‡ç‚¹ã€‚</p>
<h4 id="507-Insufficient-Storage"><a href="#507-Insufficient-Storage" class="headerlink" title="507 Insufficient Storage"></a>507 Insufficient Storage</h4><p>â€‹    æœåŠ¡å™¨æ— æ³•å­˜å‚¨å®Œæˆè¯·æ±‚æ‰€å¿…é¡»çš„å†…å®¹ã€‚è¿™ä¸ªçŠ¶å†µè¢«è®¤ä¸ºæ˜¯ä¸´æ—¶çš„ã€‚WebDAVï¼ˆRFC 4918ï¼‰</p>
<h4 id="509-Bandwidth-Limit-Exceeded"><a href="#509-Bandwidth-Limit-Exceeded" class="headerlink" title="509 Bandwidth Limit Exceeded"></a>509 Bandwidth Limit Exceeded</h4><p>â€‹    æœåŠ¡å™¨è¾¾åˆ°å¸¦å®½é™åˆ¶ã€‚è¿™ä¸æ˜¯ä¸€ä¸ªå®˜æ–¹çš„çŠ¶æ€ç ï¼Œä½†æ˜¯ä»è¢«å¹¿æ³›ä½¿ç”¨ã€‚</p>
<h4 id="510-Not-Extended"><a href="#510-Not-Extended" class="headerlink" title="510 Not Extended"></a>510 Not Extended</h4><p>â€‹    è·å–èµ„æºæ‰€éœ€è¦çš„ç­–ç•¥å¹¶æ²¡æœ‰æ²¡æ»¡è¶³ã€‚</p>
]]></content>
  </entry>
  <entry>
    <title>GCD (Grand Central Dispatch)</title>
    <url>/2016/01/13/GCD%EF%BC%88Grand%20Central%20Dispatch%EF%BC%89/</url>
    <content><![CDATA[<p>è½¬è½½è‡ª <a href="https://github.com/ming1016" target="_blank" rel="noopener">æˆ´é“­è€å¸ˆ</a></p>
<p>æ–‡ä¸­è¾ƒè¯¦ç»†ä»‹ç»GCDé˜Ÿåˆ—ï¼Œå„ç§GCDä½¿ç”¨æ–¹æ³•ï¼Œå®ä¾‹å¦‚ä½•ä½¿ç”¨Dispatch Sourceç›‘å¬ç³»ç»Ÿåº•å±‚å¯¹è±¡ï¼Œåˆ†æä¸åŒé”çš„æ€§èƒ½å¯¹æ¯”ï¼Œå®ä¾‹GCDæ­»é”æƒ…å†µã€‚ </p>
<p>æ–‡ä¸­çš„Demoåœ¨è¿™é‡Œ <a href="https://github.com/ming1016/GCDDemo" target="_blank" rel="noopener">https://github.com/ming1016/GCDDemo</a> å¯¹ç€æ–‡ç« è¯•ç€æ¥è°ƒdemoä½“ä¼šæ›´æ·±å“¦ï¼Œç»†ç»†åš¼æ¶ˆåŒ–å¥½ğŸ¤“</p>
<a id="more"></a>



<blockquote>
<p>å®˜æ–¹æ–‡æ¡£ï¼š</p>
<p><a href="https://developer.apple.com/library/prerelease/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/" target="_blank" rel="noopener">https://developer.apple.com/library/prerelease/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/</a></p>
<p>GCDå±äºç³»ç»Ÿçº§çš„çº¿ç¨‹ç®¡ç†ï¼Œåœ¨Dispatch queueä¸­æ‰§è¡Œéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡æ€§èƒ½éå¸¸çš„é«˜ã€‚ GCDè¿™å—å·²ç»å¼€æºï¼Œåœ°å€<a href="http://libdispatch.macosforge.org" target="_blank" rel="noopener">http://libdispatch.macosforge.org</a>ã€‚</p>
<p><strong>GCDä¸­çš„FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰é˜Ÿåˆ—ç§°ä¸ºdispatch queueï¼Œç”¨æ¥ä¿è¯å…ˆè¿›æ¥çš„ä»»åŠ¡å…ˆå¾—åˆ°æ‰§è¡Œã€‚</strong></p>
</blockquote>
<h2 id="GCDæ¦‚è¦"><a href="#GCDæ¦‚è¦" class="headerlink" title="GCDæ¦‚è¦"></a>GCDæ¦‚è¦</h2><ol>
<li><p>å’Œoperation queueä¸€æ ·éƒ½æ˜¯åŸºäºé˜Ÿåˆ—çš„å¹¶å‘ç¼–ç¨‹APIï¼Œä»–ä»¬é€šè¿‡é›†ä¸­ç®¡ç†å¤§å®¶ååŒä½¿ç”¨çš„çº¿ç¨‹æ± ã€‚</p>
</li>
<li><p><strong>å…¬å¼€çš„5ä¸ªä¸åŒé˜Ÿåˆ—</strong>ï¼šè¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸­çš„main queueï¼Œ3ä¸ªä¸åŒä¼˜å…ˆçº§çš„åå°é˜Ÿåˆ—ï¼ˆHigh Priority Queueï¼ŒDefault Priority Queueï¼ŒLow Priority Queueï¼‰ï¼Œä»¥åŠä¸€ä¸ªä¼˜å…ˆçº§æ›´ä½çš„åå°é˜Ÿåˆ—Background Priority Queueï¼ˆç”¨äºI/Oï¼‰ã€‚</p>
</li>
<li><p>å¯åˆ›å»ºè‡ªå®šä¹‰é˜Ÿåˆ—ï¼š<strong>ä¸²è¡Œ</strong>æˆ–<strong>å¹¶åˆ—</strong>é˜Ÿåˆ—ã€‚<strong>è‡ªå®šä¹‰ä¸€èˆ¬æ”¾åœ¨Default Priority Queueå’ŒMain Queueé‡Œ</strong>ã€‚</p>
</li>
<li><p>æ“ä½œæ˜¯åœ¨å¤šçº¿ç¨‹ä¸Šè¿˜æ˜¯å•çº¿ç¨‹ä¸»è¦æ˜¯çœ‹é˜Ÿåˆ—çš„ç±»å‹å’Œæ‰§è¡Œæ–¹æ³•ï¼Œ<strong>å¹¶è¡Œé˜Ÿåˆ—å¼‚æ­¥æ‰§è¡Œæ‰èƒ½åœ¨å¤šçº¿ç¨‹ï¼Œå¹¶è¡Œé˜Ÿåˆ—åŒæ­¥æ‰§è¡Œå°±åªä¼šåœ¨ä¸»çº¿ç¨‹æ‰§è¡Œäº†</strong>ã€‚</p>
</li>
</ol>
<h3 id="åŸºæœ¬æ¦‚å¿µ"><a href="#åŸºæœ¬æ¦‚å¿µ" class="headerlink" title="åŸºæœ¬æ¦‚å¿µ"></a>åŸºæœ¬æ¦‚å¿µ</h3><h4 id="ä¸€ã€-ç³»ç»Ÿæ ‡å‡†ä¸¤ä¸ªé˜Ÿåˆ—"><a href="#ä¸€ã€-ç³»ç»Ÿæ ‡å‡†ä¸¤ä¸ªé˜Ÿåˆ—" class="headerlink" title="ä¸€ã€ ç³»ç»Ÿæ ‡å‡†ä¸¤ä¸ªé˜Ÿåˆ—"></a>ä¸€ã€ ç³»ç»Ÿæ ‡å‡†ä¸¤ä¸ªé˜Ÿåˆ—</h4><p>â€‹    //å…¨å±€é˜Ÿåˆ—ï¼Œä¸€ä¸ªå¹¶è¡Œçš„é˜Ÿåˆ—</p>
<p>â€‹    <code>dispatch_get_global_queue</code></p>
<p>â€‹    //ä¸»é˜Ÿåˆ—ï¼Œä¸»çº¿ç¨‹ä¸­çš„å”¯ä¸€é˜Ÿåˆ—ï¼Œä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—</p>
<p>â€‹    <code>dispatch_get_main_queue</code></p>
<h4 id="äºŒã€è‡ªå®šä¹‰é˜Ÿåˆ—"><a href="#äºŒã€è‡ªå®šä¹‰é˜Ÿåˆ—" class="headerlink" title="äºŒã€è‡ªå®šä¹‰é˜Ÿåˆ—"></a>äºŒã€è‡ªå®šä¹‰é˜Ÿåˆ—</h4><p>â€‹    //ä¸²è¡Œé˜Ÿåˆ—</p>
<p>â€‹    <code>dispatch_queue_create(&quot;com.starming.serialqueue&quot;, DISPATCH_QUEUE_SERIAL)</code></p>
<p>â€‹    //å¹¶è¡Œé˜Ÿåˆ—</p>
<p>â€‹    <code>dispatch_queue_create(&quot;com.starming.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT)</code></p>
<h4 id="ä¸‰ã€åŒæ­¥å¼‚æ­¥çº¿ç¨‹åˆ›å»º"><a href="#ä¸‰ã€åŒæ­¥å¼‚æ­¥çº¿ç¨‹åˆ›å»º" class="headerlink" title="ä¸‰ã€åŒæ­¥å¼‚æ­¥çº¿ç¨‹åˆ›å»º"></a>ä¸‰ã€åŒæ­¥å¼‚æ­¥çº¿ç¨‹åˆ›å»º</h4><p>â€‹    //åŒæ­¥çº¿ç¨‹</p>
<p>â€‹    <code>dispatch_sync(..., ^(block))</code></p>
<p>â€‹    //å¼‚æ­¥çº¿ç¨‹</p>
<p>â€‹    <code>dispatch_async(..., ^(block))</code></p>
<h2 id="é˜Ÿåˆ—ï¼ˆdispatch-queueï¼‰"><a href="#é˜Ÿåˆ—ï¼ˆdispatch-queueï¼‰" class="headerlink" title="é˜Ÿåˆ—ï¼ˆdispatch queueï¼‰"></a>é˜Ÿåˆ—ï¼ˆdispatch queueï¼‰</h2><h3 id="åŸºæœ¬ç”¨æ³•"><a href="#åŸºæœ¬ç”¨æ³•" class="headerlink" title="åŸºæœ¬ç”¨æ³•"></a>åŸºæœ¬ç”¨æ³•</h3><h4 id="ä¸€ã€dispatch-get-global-queue"><a href="#ä¸€ã€dispatch-get-global-queue" class="headerlink" title="ä¸€ã€dispatch_get_global_queue"></a>ä¸€ã€dispatch_get_global_queue</h4><ol>
<li>Serialï¼šåˆå«private dispatch queuesï¼ŒåŒæ—¶åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ã€‚Serial queueå¸¸ç”¨äºåŒæ­¥è®¿é—®ç‰¹å®šçš„èµ„æºæˆ–æ•°æ®ã€‚ å½“ä½ åˆ›å»ºå¤šä¸ªSerial queueæ—¶ï¼Œè™½ç„¶å„è‡ªæ˜¯åŒæ­¥ï¼Œä½†serial queueä¹‹é—´æ˜¯å¹¶å‘æ‰§è¡Œã€‚ </li>
<li>Main dispatch queueï¼š<strong>å…¨å±€å¯ç”¨çš„serial queue</strong>ï¼Œåœ¨åº”ç”¨ç¨‹åº<strong>ä¸»çº¿ç¨‹ä¸Š</strong>æ‰§è¡Œä»»åŠ¡ã€‚</li>
<li>Concurrentï¼šåˆå«global dispatch queueï¼Œå¯ä»¥å¹¶å‘çš„æ‰§è¡Œå¤šä¸ªä»»åŠ¡ï¼Œ<strong>ä½†æ‰§è¡Œå®Œæˆé¡ºåºæ˜¯éšæœºçš„</strong>ã€‚ç³»ç»Ÿæä¾›å››ä¸ªå…¨å±€å¹¶å‘é˜Ÿåˆ—ï¼Œè¿™å››ä¸ªé˜Ÿåˆ—æœ‰è¿™å¯¹åº”çš„ä¼˜å…ˆçº§ï¼Œ<strong>ç”¨æˆ·æ˜¯ä¸èƒ½å¤Ÿåˆ›å»ºå…¨å±€é˜Ÿåˆ—çš„ï¼Œåªèƒ½è·å–</strong>ã€‚ </li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">dipatch_queue_t queue;<br>queue &#x3D; dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH,0);<br></code></pre></td></tr></table></figure>



<h4 id="äºŒã€dispatch-queue-create"><a href="#äºŒã€dispatch-queue-create" class="headerlink" title="äºŒã€dispatch_queue_create"></a>äºŒã€dispatch_queue_create</h4><ol>
<li>user create queueï¼šåˆ›å»ºè‡ªå·±å®šä¹‰çš„é˜Ÿåˆ—ï¼Œå¯ä»¥ç”¨dispatch_queue_createå‡½æ•°ã€‚</li>
<li>å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªè‡ªå®šä¹‰çš„é˜Ÿåˆ—åï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯é˜Ÿåˆ—ç±»å‹ï¼Œé»˜è®¤NULLæˆ–è€… DISPATCH_QUEUE_SERIAL çš„æ˜¯ä¸²è¡Œï¼Œå‚æ•°ä¸º DISPATCH_QUEUE_CONCURRENT ä¸ºå¹¶è¡Œé˜Ÿåˆ—ã€‚</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">dispatch_queue_t queue;<br>queue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;, DISPATCH_QUEUE_CONCURRENT);<br></code></pre></td></tr></table></figure>



<h4 id="ä¸‰ã€é˜Ÿåˆ—ä¼˜å…ˆçº§"><a href="#ä¸‰ã€é˜Ÿåˆ—ä¼˜å…ˆçº§" class="headerlink" title="ä¸‰ã€é˜Ÿåˆ—ä¼˜å…ˆçº§"></a>ä¸‰ã€é˜Ÿåˆ—ä¼˜å…ˆçº§</h4><ol>
<li>è‡ªå®šä¹‰é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ï¼šå¯ä»¥é€šè¿‡dipatch_queue_attr_make_with_qos_classæˆ–dispatch_set_target_queueæ–¹æ³•è®¾ç½®é˜Ÿåˆ—çš„ä¼˜å…ˆçº§</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">&#x2F;&#x2F;dipatch_queue_attr_make_with_qos_class<br>dispatch_queue_attr_t attr &#x3D; dispatch_queue_attr_make_with_qos_class(DISPATCH_QUEUE_SERIAL, <br>                                                                     QOS_CLASS_UTILITY, -1);<br>dispatch_queue_t queue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.qosqueue&quot;, attr);<br><br>&#x2F;&#x2F;dispatch_set_target_queue<br>dispatch_queue_t queue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.settargetqueue&quot;,<br>                                               NULL); &#x2F;&#x2F;éœ€è¦è®¾ç½®ä¼˜å…ˆçº§çš„queue<br>dispatch_queue_t referQueue &#x3D; dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, <br>                                                        0); &#x2F;&#x2F;å‚è€ƒä¼˜å…ˆçº§<br>dispatch_set_target_queue(queue, referQueue); &#x2F;&#x2F;è®¾ç½®queueå’ŒreferQueueçš„ä¼˜å…ˆçº§ä¸€æ ·<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>dispatch_set_target_queueï¼šå¯ä»¥è®¾ç½®ä¼˜å…ˆçº§ï¼Œä¹Ÿå¯ä»¥è®¾ç½®é˜Ÿåˆ—å±‚çº§ä½“ç³»ï¼Œæ¯”å¦‚è®©å¤šä¸ªä¸²è¡Œå’Œå¹¶è¡Œé˜Ÿåˆ—åœ¨ç»Ÿä¸€ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—é‡Œä¸²è¡Œæ‰§è¡Œï¼Œå¦‚ä¸‹</li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">dispatch_queue_t serialQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, <br>                                                     DISPATCH_QUEUE_SERIAL);<br>dispatch_queue_t firstQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.firstqueue&quot;, <br>                                                    DISPATCH_QUEUE_SERIAL);<br>dispatch_queue_t secondQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.secondqueue&quot;, <br>                                                     DISPATCH_QUEUE_CONCURRENT);<br><br>dispatch_set_target_queue(firstQueue, serialQueue);<br>dispatch_set_target_queue(secondQueue, serialQueue);<br><br>dispatch_async(firstQueue, ^&#123;<br>  NSLog(@&quot;1&quot;);<br>  [NSThread sleepForTimeInterval:3.f];<br>&#125;);<br><br>dispatch_async(secondQueue, ^&#123;<br>  NSLog(@&quot;2&quot;);<br>  [NSThread sleepForTimeInterval:2.f];<br>&#125;);<br><br>dispatch_async(secondQueue, ^&#123;<br>  NSLog(@&quot;3&quot;);<br>  [NSThread sleepForTimeInterval:1.f];<br>&#125;);<br></code></pre></td></tr></table></figure>



<h3 id="é˜Ÿåˆ—ç±»å‹"><a href="#é˜Ÿåˆ—ç±»å‹" class="headerlink" title="é˜Ÿåˆ—ç±»å‹"></a>é˜Ÿåˆ—ç±»å‹</h3><p><strong>é˜Ÿåˆ—é»˜è®¤æ˜¯ä¸²è¡Œçš„ï¼Œå¦‚æœè®¾ç½®è¯¥å‚æ•°ä¸ºNULLä¼šæŒ‰ä¸²è¡Œå¤„ç†ï¼Œåªèƒ½æ‰§è¡Œä¸€ä¸ªå•ç‹¬çš„blockï¼Œé˜Ÿåˆ—ä¹Ÿå¯ä»¥æ˜¯å¹¶è¡Œçš„ï¼ŒåŒä¸€æ—¶é—´æ‰§è¡Œå¤šä¸ªblock</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">- (id)init &#123;<br>  self &#x3D; [super init];<br>  if (self !&#x3D; nil) &#123;<br>    NSString *label &#x3D; [NSString stringWithFormat:@&quot;%@.isolation.%p&quot;, [self class], self];<br>    self.isolationQueue &#x3D; dispatch_queue_create([label UTF8String], 0);<br>    label &#x3D; [NSString stringWithFormat:@&quot;%@.work.%p&quot;, [self class], self];<br>    self.workQueue &#x3D; dispatch_queue_create([label UTF8String], 0);<br>  &#125;<br>  <br>  return self;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="ä¸€ã€5ç§é˜Ÿåˆ—"><a href="#ä¸€ã€5ç§é˜Ÿåˆ—" class="headerlink" title="ä¸€ã€5ç§é˜Ÿåˆ—"></a>ä¸€ã€5ç§é˜Ÿåˆ—</h4><p>ä¸»é˜Ÿåˆ—ï¼ˆmain queueï¼‰, å››ç§é€šç”¨è°ƒåº¦é˜Ÿåˆ—ï¼Œè‡ªå·±å®šåˆ¶çš„é˜Ÿåˆ—ã€‚å››ç§é€šç”¨è°ƒåº¦é˜Ÿåˆ—ä¸º ï¼š</p>
<ol>
<li><p><strong>QOS_CLASS_USER_INTERACTIVE</strong>ï¼šuser interactiveç­‰çº§è¡¨ç¤ºä»»åŠ¡éœ€è¦è¢«ç«‹å³æ‰§è¡Œæä¾›å¥½çš„ä½“éªŒï¼Œç”¨æ¥æ›´æ–°UIï¼Œå“åº”äº‹ä»¶ç­‰ã€‚è¿™ä¸ªç­‰çº§æœ€å¥½ä¿æŒå°è§„æ¨¡ã€‚ </p>
</li>
<li><p><strong>QOS_CLASS_USER_INITIATED</strong>ï¼šuser initiatedç­‰çº§è¡¨ç¤ºä»»åŠ¡ç”±UIå‘èµ·å¼‚æ­¥æ‰§è¡Œã€‚é€‚ç”¨åœºæ™¯æ˜¯éœ€è¦åŠæ—¶ç»“æœåŒæ—¶åˆå¯ä»¥ç»§ç»­äº¤äº’çš„æ—¶å€™ã€‚</p>
</li>
<li><p><strong>QOS_CLASS_UTILITY</strong>ï¼šutilityç­‰çº§è¡¨ç¤ºéœ€è¦é•¿æ—¶é—´è¿è¡Œçš„ä»»åŠ¡ï¼Œä¼´æœ‰ç”¨æˆ·å¯è§è¿›åº¦æŒ‡ç¤ºå™¨ã€‚ç»å¸¸ä¼šç”¨æ¥åšè®¡ç®—ï¼ŒI/Oï¼Œç½‘ç»œï¼ŒæŒç»­çš„æ•°æ®å¡«å……ç­‰ä»»åŠ¡ã€‚è¿™ä¸ªä»»åŠ¡èŠ‚èƒ½ã€‚ </p>
</li>
<li><p><strong>QOS_CLASS_BACKGROUND</strong>ï¼šbackgroundç­‰çº§è¡¨ç¤ºç”¨æˆ·ä¸ä¼šå¯Ÿè§‰çš„ä»»åŠ¡ï¼Œä½¿ç”¨å®ƒæ¥å¤„ç†é¢„åŠ è½½ï¼Œ æˆ–è€…ä¸éœ€è¦ç”¨æˆ·äº¤äº’å’Œå¯¹æ—¶é—´ä¸æ•æ„Ÿçš„ä»»åŠ¡ã€‚ </p>
</li>
</ol>
<p><strong>ç¤ºä¾‹ï¼šåå°åŠ è½½æ˜¾ç¤ºå›¾ç‰‡</strong></p>
<figure class="highlight swift"><table><tr><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">override</span> <span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">viewDidLoad</span><span class="hljs-params">()</span></span> &#123;<br>  <span class="hljs-keyword">super</span>.viewDidLoad()<br>  dispatch_async(dispatch_get_global_queue(<span class="hljs-type">Int</span>(<span class="hljs-type">QOS_CLASS_USER_INITIATED</span>.value), <span class="hljs-number">0</span>)) &#123;<br>	<span class="hljs-comment">// å°†å·¥ä½œä»ä¸»çº¿ç¨‹è½¬ç§»åˆ°å…¨å±€é˜Ÿåˆ—ä¸­ï¼Œè¿™æ˜¯dispatch_asyncè°ƒç”¨ï¼Œå¼‚æ­¥æäº¤ä¿è¯è°ƒç”¨çº¿ç¨‹ä¼šç»§ç»­æ‰§è¡Œä¸‹å»ï¼Œè¿™æ ·viewDidLoadåœ¨ä¸»çº¿ç¨‹ä¸Šèƒ½å¤Ÿæ›´æ—©å®Œæˆï¼Œ</span><br>    <span class="hljs-keyword">let</span> overlayImage = <span class="hljs-keyword">self</span>.faceOverlayImageFromImage(<span class="hljs-keyword">self</span>.image)<br>		dispatch_async(dispatch_get_main_queue()) &#123;<br>      <span class="hljs-comment">// æ–°å›¾å®Œæˆï¼ŒæŠŠä¸€ä¸ªé—­åŒ…åŠ å…¥ä¸»çº¿ç¨‹ç”¨æ¥æ›´æ–°UIImageViewï¼Œåªæœ‰åœ¨ä¸»çº¿ç¨‹èƒ½æ“ä½œUIKitã€‚</span><br>      <span class="hljs-keyword">self</span>.fadeInNewImage(overlayImage) <span class="hljs-comment">// æ›´æ–°UI</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="äºŒã€ä½•æ—¶ä½¿ç”¨ä½•ç§é˜Ÿåˆ—ç±»å‹"><a href="#äºŒã€ä½•æ—¶ä½¿ç”¨ä½•ç§é˜Ÿåˆ—ç±»å‹" class="headerlink" title="äºŒã€ä½•æ—¶ä½¿ç”¨ä½•ç§é˜Ÿåˆ—ç±»å‹"></a>äºŒã€ä½•æ—¶ä½¿ç”¨ä½•ç§é˜Ÿåˆ—ç±»å‹</h4><ol>
<li>ä¸»é˜Ÿåˆ—ï¼ˆé¡ºåºï¼‰ï¼š<strong>é˜Ÿåˆ—ä¸­æœ‰ä»»åŠ¡å®Œæˆéœ€è¦æ›´æ–°UIæ—¶ï¼Œdispatch_afteråœ¨è¿™ç§ç±»å‹ä¸­ä½¿ç”¨</strong>ã€‚</li>
<li>å¹¶å‘é˜Ÿåˆ—ï¼š<strong>ç”¨æ¥æ‰§è¡Œä¸UIæ— å…³çš„åå°ä»»åŠ¡</strong>ï¼Œdispatch_syncæ”¾åœ¨è¿™é‡Œï¼Œæ–¹ä¾¿ç­‰å¾…ä»»åŠ¡ï¼Œå®Œæˆè¿›è¡Œåç»­å¤„ç†æˆ–å’Œdispatch barrieråŒæ­¥ã€‚dispatch groupsæ”¾åœ¨è¿™é‡Œä¹Ÿä¸é”™ã€‚</li>
<li>è‡ªå®šä¹‰é¡ºåºé˜Ÿåˆ—ï¼šé¡ºåºæ‰§è¡Œåå°ä»»åŠ¡å¹¶è¿½è¸ªå®ƒæ—¶ã€‚è¿™æ ·åšåŒæ—¶åªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œå¯ä»¥é˜²æ­¢èµ„æºç«äº‰ã€‚dipatch barriersè§£å†³è¯»å†™é”é—®é¢˜çš„æ”¾åœ¨è¿™é‡Œå¤„ç†ã€‚dispatch groupsä¹Ÿæ˜¯æ”¾åœ¨è¿™é‡Œã€‚ </li>
</ol>
<h4 id="ä¸‰ã€QoSç­‰çº§å‚æ•°çš„å†™æ³•"><a href="#ä¸‰ã€QoSç­‰çº§å‚æ•°çš„å†™æ³•" class="headerlink" title="ä¸‰ã€QoSç­‰çº§å‚æ•°çš„å†™æ³•"></a>ä¸‰ã€QoSç­‰çº§å‚æ•°çš„å†™æ³•</h4><p>å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ç®€åŒ–QoSç­‰çº§å‚æ•°çš„å†™æ³• </p>
<figure class="highlight swift"><table><tr><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">var</span> <span class="hljs-type">GlobalMainQueue</span>: dispatch_queue_t &#123;<br>  <span class="hljs-keyword">return</span> dispatch_get_main_queue()<br>&#125;<br><br><span class="hljs-keyword">var</span> <span class="hljs-type">GlobalUserInteractiveQueue</span>: dispatch_queue_t &#123;<br>  <span class="hljs-keyword">return</span> dispatch_get_global_queue(<span class="hljs-type">Int</span>(<span class="hljs-type">QOS_CLASS_USER_INTERACTIVE</span>.value), <span class="hljs-number">0</span>)<br>&#125;<br><br><span class="hljs-keyword">var</span> <span class="hljs-type">GlobalUserInitiatedQueue</span>: dispatch_queue_t &#123;<br>  <span class="hljs-keyword">return</span> dispatch_get_global_queue(<span class="hljs-type">Int</span>(<span class="hljs-type">QOS_CLASS_USER_INITIATED</span>.value), <span class="hljs-number">0</span>)<br>&#125;<br><br><span class="hljs-keyword">var</span> <span class="hljs-type">GlobalUtilityQueue</span>: dispatch_queue_t &#123;<br>  <span class="hljs-keyword">return</span> dispatch_get_global_queue(<span class="hljs-type">Int</span>(<span class="hljs-type">QOS_CLASS_UTILITY</span>.value), <span class="hljs-number">0</span>)<br>&#125;<br><br><span class="hljs-keyword">var</span> <span class="hljs-type">GlobalBackgroundQueue</span>: dispatch_queue_t &#123;<br>  <span class="hljs-keyword">return</span> dispatch_get_global_queue(<span class="hljs-type">Int</span>(<span class="hljs-type">QOS_CLASS_BACKGROUND</span>.value), <span class="hljs-number">0</span>)<br>&#125;<br><br><span class="hljs-comment">//ä½¿ç”¨èµ·æ¥å°±æ˜¯è¿™æ ·ï¼Œæ˜“è¯»è€Œä¸”å®¹æ˜“çœ‹å‡ºåœ¨ä½¿ç”¨å“ªä¸ªé˜Ÿåˆ—</span><br>dispatch_async(<span class="hljs-type">GlobalUserInitiatedQueue</span>) &#123;<br>  <span class="hljs-keyword">let</span> overlayImage = <span class="hljs-keyword">self</span>.faceOverlayImageFromImage(<span class="hljs-keyword">self</span>.image)<br>  dispatch_async(<span class="hljs-type">GlobalMainQueue</span>) &#123;<br>    <span class="hljs-keyword">self</span>.fadeInNewImage(overlayImage)<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h2><h3 id="ç®€å•ä½¿ç”¨å’Œä»‹ç»"><a href="#ç®€å•ä½¿ç”¨å’Œä»‹ç»" class="headerlink" title="ç®€å•ä½¿ç”¨å’Œä»‹ç»"></a>ç®€å•ä½¿ç”¨å’Œä»‹ç»</h3><h4 id="ä¸€ã€dispatch-onceç”¨æ³•"><a href="#ä¸€ã€dispatch-onceç”¨æ³•" class="headerlink" title="ä¸€ã€dispatch_onceç”¨æ³•"></a>ä¸€ã€dispatch_onceç”¨æ³•</h4><p>â€‹    <strong>dispatch_once_t è¦æ˜¯å…¨å±€æˆ–staticå˜é‡ï¼Œä¿è¯dispatch_once_tåªæœ‰ä¸€ä»½å®ä¾‹</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">- (UIColor *)boringColor &#123;<br>  static UIColor *color;<br>  &#x2F;&#x2F;åªè¿è¡Œä¸€æ¬¡<br>  static dispatch_once_t onceToken;<br>  dispatch_once(&amp;onceToken, ^&#123;<br>    color &#x3D; [UIColor colorWithRed:0.380f green:0.376f blue:0.376f alpha:1.000f];<br>	&#125;);<br>  return color;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="äºŒã€dispatch-async"><a href="#äºŒã€dispatch-async" class="headerlink" title="äºŒã€dispatch_async"></a>äºŒã€dispatch_async</h4><p>â€‹    è®¾è®¡ä¸€ä¸ªå¼‚æ­¥çš„APIè°ƒç”¨dispatch_async()ï¼Œè¿™ä¸ªè°ƒç”¨æ”¾åœ¨APIçš„æ–¹æ³•æˆ–å‡½æ•°ä¸­åšã€‚è®©APIçš„ä½¿ç”¨è€…è®¾ç½®ä¸€ä¸ªå›è°ƒå¤„ç†é˜Ÿåˆ—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">- (void)processImage:(UIImage \*)image completionHandler:(void(^)(BOOL success))handler &#123;<br>  dispatch_async(self.isolationQueue, ^(void)&#123;<br>    &#x2F;&#x2F; do actual processing here<br>    dispatch_async(self.resultQueue, ^(void)&#123;<br>      handler(YES);<br>    &#125;);<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è±†ç“£ä¸­æ•°æ®åŠ è½½çš„æ—¶å€™ç”¨åˆ°çš„å°±æ˜¯è¿™ç§æ–¹æ³•ï¼Œæ•°æ®å¤„ç†ä¸­ä½¿ç”¨</p>
<p><strong>å¯ä»¥é¿å…ç•Œé¢ä¼šè¢«ä¸€äº›è€—æ—¶çš„æ“ä½œå¡æ­»ï¼Œæ¯”å¦‚è¯»å–ç½‘ç»œæ•°æ®ï¼Œå¤§æ•°æ®IOï¼Œè¿˜æœ‰å¤§é‡æ•°æ®çš„æ•°æ®åº“è¯»å†™ï¼Œè¿™æ—¶éœ€è¦åœ¨å¦ä¸€ä¸ªçº¿ç¨‹ä¸­å¤„ç†ï¼Œç„¶åé€šçŸ¥ä¸»çº¿ç¨‹æ›´æ–°ç•Œé¢ï¼ŒGCDä½¿ç”¨èµ·æ¥æ¯”NSThreadå’ŒNSOperationæ–¹æ³•è¦ç®€å•æ–¹ä¾¿ã€‚</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">&#x2F;&#x2F;ä»£ç æ¡†æ¶<br>dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;<br>  &#x2F;&#x2F; è€—æ—¶çš„æ“ä½œ<br>  dispatch_async(dispatch_get_main_queue(), ^&#123;<br>    &#x2F;&#x2F; æ›´æ–°ç•Œé¢<br>  &#125;);<br>&#125;);<br><br>&#x2F;&#x2F;ä¸‹è½½å›¾ç‰‡çš„ç¤ºä¾‹<br>dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;<br>  NSURL * url &#x3D; [NSURL URLWithString:@&quot;&lt;http:&#x2F;&#x2F;avatar.csdn.net&#x2F;2&#x2F;C&#x2F;D&#x2F;1_totogo2010.jpg&gt;&quot;];<br>  NSData * data &#x3D; [[NSData alloc]initWithContentsOfURL:url];<br>  UIImage *image &#x3D; [[UIImage alloc]initWithData:data];<br>  if (data !&#x3D; nil) &#123;<br>    dispatch_async(dispatch_get_main_queue(), ^&#123;<br>      self.imageView.image &#x3D; image;<br>    &#125;);<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>



<h4 id="ä¸‰ã€dispatch-afterå»¶åæ‰§è¡Œ"><a href="#ä¸‰ã€dispatch-afterå»¶åæ‰§è¡Œ" class="headerlink" title="ä¸‰ã€dispatch_afterå»¶åæ‰§è¡Œ"></a>ä¸‰ã€dispatch_afterå»¶åæ‰§è¡Œ</h4><p><strong>dispatch_afteråªæ˜¯å»¶æ—¶æäº¤blockï¼Œä¸æ˜¯å»¶æ—¶ç«‹åˆ»æ‰§è¡Œã€‚</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">- (void)foo &#123;<br>  double delayInSeconds &#x3D; 2.0;<br>  dispatch_time_t popTime &#x3D; dispatch_time(DISPATCH_TIME_NOW, <br>                                          (int64_t) (delayInSeconds * NSEC_PER_SEC));<br>  dispatch_after(popTime, dispatch_get_main_queue(), ^(void)&#123;<br>    [self bar];<br>  &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>èŒƒä¾‹ï¼Œå®ç°ä¸€ä¸ªæ¨è¿Ÿå‡ºç°å¼¹å‡ºæ¡†æç¤ºï¼Œæ¯”å¦‚è¯´æç¤ºç”¨æˆ·è¯„ä»·ç­‰åŠŸèƒ½ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">showOrHideNavPrompt</span><span class="hljs-params">()</span></span> &#123;<br>  <span class="hljs-keyword">let</span> delayInSeconds = <span class="hljs-number">1.0</span><br>  <span class="hljs-keyword">let</span> popTime = dispatch_time(<span class="hljs-type">DISPATCH_TIME_NOW</span>,<br>                              <span class="hljs-type">Int64</span>(delayInSeconds \* <span class="hljs-type">Double</span>(<span class="hljs-type">NSEC_PER_SEC</span>))) <span class="hljs-comment">// åœ¨è¿™é‡Œå£°æ˜æ¨è¿Ÿçš„æ—¶é—´</span><br>  dispatch_after(popTime, <span class="hljs-type">GlobalMainQueue</span>) &#123; <span class="hljs-comment">// ç­‰å¾…delayInSecondså°†é—­åŒ…å¼‚æ­¥åˆ°ä¸»é˜Ÿåˆ—</span><br>    <span class="hljs-keyword">let</span> <span class="hljs-built_in">count</span> = <span class="hljs-type">PhotoManager</span>.sharedManager.photos.<span class="hljs-built_in">count</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-built_in">count</span> &gt; <span class="hljs-number">0</span> &#123;<br>      <span class="hljs-keyword">self</span>.navigationItem.prompt = <span class="hljs-literal">nil</span><br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-keyword">self</span>.navigationItem.prompt = <span class="hljs-string">"Add photos with faces to Googlyify them!"</span><br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¾‹å­ä¸­çš„dispatch timeçš„å‚æ•°ï¼Œå¯ä»¥å…ˆçœ‹çœ‹å‡½æ•°åŸå‹ </p>
<p><code>dispatch_time_t dispatch_time ( dispatch_time_t when, int64_t delta );</code></p>
<p>ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºDISPATCH_TIME_NOWè¡¨ç¤ºå½“å‰ã€‚ç¬¬äºŒä¸ªå‚æ•°çš„deltaè¡¨ç¤ºçº³ç§’ï¼Œä¸€ç§’å¯¹åº”çš„çº³ç§’ä¸º1000000000ï¼Œç³»ç»Ÿæä¾›äº†ä¸€äº›å®æ¥ç®€åŒ– </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">#define NSEC_PER_SEC 1000000000ull &#x2F;&#x2F;æ¯ç§’æœ‰å¤šå°‘çº³ç§’<br>#define USEC_PER_SEC 1000000ull &#x2F;&#x2F;æ¯ç§’æœ‰å¤šå°‘æ¯«ç§’<br>#define NSEC_PER_USEC 1000ull &#x2F;&#x2F;æ¯æ¯«ç§’æœ‰å¤šå°‘çº³ç§’<br></code></pre></td></tr></table></figure>

<p>è¿™æ ·å¦‚æœè¦è¡¨ç¤ºä¸€ç§’å°±å¯ä»¥è¿™æ ·å†™ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">dispatch_time(DISPATCH_TIME_NOW, 1 * NSEC_PER_SEC);<br>dispatch_time(DISPATCH_TIME_NOW, 1000 * USEC_PER_SEC);<br>dispatch_time(DISPATCH_TIME_NOW, USEC_PER_SEC * NSEC_PER_USEC);<br></code></pre></td></tr></table></figure>



<h4 id="å››ã€dispatch-barrier-asyncä½¿ç”¨Barrier-Taskæ–¹æ³•"><a href="#å››ã€dispatch-barrier-asyncä½¿ç”¨Barrier-Taskæ–¹æ³•" class="headerlink" title="å››ã€dispatch_barrier_asyncä½¿ç”¨Barrier Taskæ–¹æ³•"></a>å››ã€dispatch_barrier_asyncä½¿ç”¨Barrier Taskæ–¹æ³•</h4><ol>
<li>Dispatch Barrierè§£å†³å¤šçº¿ç¨‹å¹¶å‘è¯»å†™åŒä¸€ä¸ªèµ„æºå‘ç”Ÿæ­»é”</li>
<li>Dispatch Barrierç¡®ä¿æäº¤çš„é—­åŒ…æ˜¯æŒ‡å®šé˜Ÿåˆ—ä¸­åœ¨ç‰¹å®šæ—¶æ®µå”¯ä¸€åœ¨æ‰§è¡Œçš„ä¸€ä¸ªã€‚ </li>
<li>åœ¨æ‰€æœ‰å…ˆäºDispatch Barrierçš„ä»»åŠ¡éƒ½å®Œæˆçš„æƒ…å†µä¸‹è¿™ä¸ªé—­åŒ…æ‰å¼€å§‹æ‰§è¡Œã€‚ </li>
<li>è½®åˆ°è¿™ä¸ªé—­åŒ…æ—¶barrierä¼šæ‰§è¡Œè¿™ä¸ªé—­åŒ…å¹¶ä¸”ç¡®ä¿é˜Ÿåˆ—åœ¨æ­¤è¿‡ç¨‹ä¸ä¼šæ‰§è¡Œå…¶å®ƒä»»åŠ¡ã€‚ </li>
<li>é—­åŒ…å®Œæˆå é˜Ÿåˆ—æ¢å¤ã€‚ </li>
<li><strong>éœ€è¦æ³¨æ„dispatch_barrier_asyncåªåœ¨è‡ªå·±åˆ›å»ºçš„é˜Ÿåˆ—ä¸Šæœ‰è¿™ç§ä½œç”¨ï¼Œåœ¨å…¨å±€å¹¶å‘é˜Ÿåˆ—å’Œä¸²è¡Œé˜Ÿåˆ—ä¸Šï¼Œæ•ˆæœå’Œ dispatch_syncä¸€æ ·</strong></li>
</ol>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">&#x2F;&#x2F;åˆ›å»ºé˜Ÿåˆ—<br>self.isolationQueue &#x3D; dispatch_queue_create([label UTF8String], DISPATCH_QUEUE_CONCURRENT);<br>&#x2F;&#x2F;æ”¹å˜setter<br>- (void)setCount:(NSUInteger)count forKey:(NSString \*)key &#123;<br>  key &#x3D; [key copy];<br>  &#x2F;&#x2F;ç¡®ä¿æ‰€æœ‰barrieréƒ½æ˜¯asyncå¼‚æ­¥çš„<br>  dispatch_barrier_async(self.isolationQueue, ^()&#123;<br>    if (count &#x3D;&#x3D; 0) &#123;<br>      [self.counts removeObjectForKey:key];<br>    &#125; else &#123;<br>      self.counts[key] &#x3D; @(count);<br>    &#125;<br>  &#125;);<br>&#125;<br><br>- (void)dispatchBarrierAsyncDemo &#123;<br>    &#x2F;&#x2F;é˜²æ­¢æ–‡ä»¶è¯»å†™å†²çªï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ï¼Œæ“ä½œéƒ½åœ¨è¿™ä¸ªé˜Ÿåˆ—ä¸­è¿›è¡Œï¼Œæ²¡æœ‰æ›´æ–°æ•°æ®è¯»ç”¨å¹¶è¡Œï¼Œå†™ç”¨ä¸²è¡Œã€‚<br>    dispatch_queue_t dataQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.dataqueue&quot;,<br>                                                       DISPATCH_QUEUE_CONCURRENT);<br>    dispatch_async(dataQueue, ^&#123;<br>      [NSThread sleepForTimeInterval:2.f];<br>      NSLog(@&quot;read data 1&quot;);<br>    &#125;);<br>  <br>    dispatch_async(dataQueue, ^&#123;<br>      NSLog(@&quot;read data 2&quot;);<br>    &#125;);<br>    &#x2F;&#x2F;ç­‰å¾…å‰é¢çš„éƒ½å®Œæˆï¼Œåœ¨æ‰§è¡Œbarrieråé¢çš„<br>    dispatch_barrier_async(dataQueue, ^&#123;<br>      NSLog(@&quot;write data 1&quot;);<br>      [NSThread sleepForTimeInterval:1];<br>    &#125;);<br><br>    dispatch_async(dataQueue, ^&#123;<br>      [NSThread sleepForTimeInterval:1.f];<br>      NSLog(@&quot;read data 3&quot;);<br>    &#125;);<br><br>    dispatch_async(dataQueue, ^&#123;<br>      NSLog(@&quot;read data 4&quot;);<br>    &#125;);<br>&#125;<br></code></pre></td></tr></table></figure>



<p><strong>swiftç¤ºä¾‹</strong></p>
<p>ä½¿ç”¨dispatch_queue_createåˆå§‹åŒ–ä¸€ä¸ªå¹¶å‘é˜Ÿåˆ—ã€‚ç¬¬ä¸€ä¸ªå‚æ•°éµå¾ª<strong>åå‘DNSå‘½åä¹ æƒ¯</strong>ï¼Œæ–¹ä¾¿æè¿°ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å‡ºæ˜¯å¹¶å‘è¿˜æ˜¯é¡ºåºã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">private</span> <span class="hljs-keyword">let</span> concurrentPhotoQueue = dispatch_queue_create(<span class="hljs-string">"com.raywenderlich.GooglyPuff.photoQueue"</span>, <span class="hljs-type">DISPATCH_QUEUE_CONCURRENT</span>)<br><br><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">addPhoto</span><span class="hljs-params">(photo: Photo)</span></span> &#123;<br>  dispatch_barrier_async(concurrentPhotoQueue) &#123;<br>    <span class="hljs-comment">// å°†å†™æ“ä½œåŠ å…¥åˆ°è‡ªå®šä¹‰çš„é˜Ÿåˆ—ã€‚å¼€å§‹æ‰§è¡Œæ—¶è¿™ä¸ªå°±æ˜¯é˜Ÿåˆ—ä¸­å”¯ä¸€çš„ä¸€ä¸ªåœ¨æ‰§è¡Œçš„ä»»åŠ¡ã€‚</span><br>    <span class="hljs-keyword">self</span>._photos.append(photo) <br>    <span class="hljs-comment">// barrierèƒ½å¤Ÿä¿éšœä¸ä¼šå’Œå…¶ä»–ä»»åŠ¡åŒæ—¶è¿›è¡Œã€‚</span><br>    dispatch_async(<span class="hljs-type">GlobalMainQueue</span>) &#123; <br>      <span class="hljs-comment">// æ¶‰åŠåˆ°UIæ‰€ä»¥è¿™ä¸ªé€šçŸ¥åº”è¯¥åœ¨ä¸»çº¿ç¨‹ä¸­ï¼Œæ‰€ä»¥åˆ†æ´¾å¦ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡åˆ°ä¸»é˜Ÿåˆ—ä¸­ã€‚</span><br>      <span class="hljs-keyword">self</span>.postContentAddedNotification()<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä¸Šé¢æ˜¯è§£å†³äº†å†™å¯èƒ½å‘ç”Ÿæ­»é”ï¼Œä¸‹é¢æ˜¯ä½¿ç”¨dispatch_syncè§£å†³è¯»æ—¶å¯èƒ½ä¼šå‘ç”Ÿçš„æ­»é”ã€‚</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><code class="hljs swift"><span class="hljs-keyword">var</span> photos: [<span class="hljs-type">Photo</span>] &#123;<br>  <span class="hljs-keyword">var</span> photosCopy: [<span class="hljs-type">Photo</span>]!<br>  dispatch_sync(concurrentPhotoQueue) &#123; <span class="hljs-comment">// åŒæ­¥è°ƒåº¦åˆ°concurrentPhotoQueueé˜Ÿåˆ—æ‰§è¡Œè¯»æ“ä½œ</span><br>    photosCopy = <span class="hljs-keyword">self</span>._photos <span class="hljs-comment">// ä¿å­˜</span><br>  &#125;<br>  <span class="hljs-keyword">return</span> photosCopy<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è¿™æ ·è¯»å†™é—®é¢˜éƒ½è§£å†³äº†ã€‚éƒ½ç”¨å¼‚æ­¥å¤„ç†é¿å…æ­»é”ï¼Œå¼‚æ­¥çš„ç¼ºç‚¹åœ¨äºè°ƒè¯•ä¸æ–¹ä¾¿ï¼Œä½†æ˜¯æ¯”èµ·åŒæ­¥å®¹æ˜“äº§ç”Ÿæ­»é”è¿™ä¸ªå‰¯ä½œç”¨è¿˜ç®—å°çš„ã€‚</p>
<h4 id="äº”ã€dispatch-applyè¿›è¡Œå¿«é€Ÿè¿­ä»£"><a href="#äº”ã€dispatch-applyè¿›è¡Œå¿«é€Ÿè¿­ä»£" class="headerlink" title="äº”ã€dispatch_applyè¿›è¡Œå¿«é€Ÿè¿­ä»£"></a>äº”ã€dispatch_applyè¿›è¡Œå¿«é€Ÿè¿­ä»£</h4><p>ç±»ä¼¼forå¾ªç¯ï¼Œä½†æ˜¯åœ¨å¹¶å‘é˜Ÿåˆ—çš„æƒ…å†µä¸‹dispatch_applyä¼šå¹¶å‘æ‰§è¡Œblockä»»åŠ¡ã€‚ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">for (size_t y &#x3D; 0; y &lt; height; ++y) &#123;<br>  for (size_t x &#x3D; 0; x &lt; width; ++x) &#123;<br>    &#x2F;&#x2F; Do something with x and y here<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å› ä¸ºå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œæ‰€ä»¥ä½¿ç”¨dispatch_applyå¯ä»¥è¿è¡Œçš„æ›´å¿« </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">- (void)dispatchApplyDemo &#123;<br>    dispatch_queue_t concurrentQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.concurre<br>    dispatch_apply(10, concurrentQueue, ^(size_t i) &#123;<br>        NSLog(@&quot;%zu&quot;,i);<br>    &#125;);<br>    NSLog(@&quot;The end&quot;);**<br>    &#x2F;&#x2F;è¿™é‡Œæœ‰ä¸ªéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œdispatch_applyè¿™ä¸ªæ˜¯ä¼šé˜»å¡ä¸»çº¿ç¨‹çš„ã€‚è¿™ä¸ªlogæ‰“å°ä¼šåœ¨dispatch_applyéƒ½ç»“æŸåæ‰å¼€å§‹æ‰§è¡Œ<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>dispatch_applyèƒ½é¿å…çº¿ç¨‹çˆ†ç‚¸ï¼Œå› ä¸ºGCDä¼šç®¡ç†å¹¶å‘</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">- (void)dealWiththreadWithMaybeExplode:(BOOL)explode &#123;<br>  dispatch_queue_t concurrentQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT);<br>  if (explode) &#123;<br>    &#x2F;&#x2F;æœ‰é—®é¢˜çš„æƒ…å†µï¼Œå¯èƒ½ä¼šæ­»é”<br>    for (int i &#x3D; 0; i &lt; 999 ; i++) &#123;<br>      dispatch_async(concurrentQueue, ^&#123;<br>        NSLog(@&quot;wrong %d&quot;,i);<br>        &#x2F;&#x2F;do something hard<br>      &#125;);<br>    &#125;<br>  &#125; else &#123;<br>    &#x2F;&#x2F;ä¼šä¼˜åŒ–å¾ˆå¤šï¼Œèƒ½å¤Ÿåˆ©ç”¨GCDç®¡ç†<br>    dispatch_apply(999, concurrentQueue, ^(size_t i)&#123;<br>      NSLog(@&quot;correct %zu&quot;,i);<br>      &#x2F;&#x2F;do something hard<br>    &#125;);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>swiftç¤ºä¾‹ï¼š </p>
<figure class="highlight swift"><table><tr><td class="code"><pre><code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">downloadPhotosWithCompletion</span><span class="hljs-params">(completion: BatchPhotoDownloadingCompletionClosure?)</span></span> &#123;<br>  <span class="hljs-keyword">var</span> storedError: <span class="hljs-type">NSError!</span><br>  <span class="hljs-keyword">var</span> downloadGroup = dispatch_group_create()<br>  <span class="hljs-keyword">let</span> addresses = [<span class="hljs-type">OverlyAttachedGirlfriendURLString</span>, <br>                   <span class="hljs-type">SuccessKidURLString</span>,<br>                   <span class="hljs-type">LotsOfFacesURLString</span>]<br>  dispatch_apply(<span class="hljs-type">UInt</span>(addresses.<span class="hljs-built_in">count</span>), <span class="hljs-type">GlobalUserInitiatedQueue</span>) &#123;<br>    i <span class="hljs-keyword">in</span><br>    <span class="hljs-keyword">let</span> index = <span class="hljs-type">Int</span>(i)<br>    <span class="hljs-keyword">let</span> address = addresses[index]<br>    <span class="hljs-keyword">let</span> url = <span class="hljs-type">NSURL</span>(string: address)<br>    dispatch_group_enter(downloadGroup)<br>    <span class="hljs-keyword">let</span> photo = <span class="hljs-type">DownloadPhoto</span>(url: url!) &#123;<br>      image, error <span class="hljs-keyword">in</span> <br>      <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error = error &#123;<br>        storedError = error<br>      &#125;<br>      dispatch_group_leave(downloadGroup)<br>    &#125;<br>    <span class="hljs-type">PhotoManager</span>.sharedManager.addPhoto(photo)<br>  &#125;<br>  dispatch_group_notify(downloadGroup, <span class="hljs-type">GlobalMainQueue</span>) &#123;<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> completion = completion &#123;<br>      completion(error: storedError)<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="å…­ã€Blockç»„åˆDispatch-groups"><a href="#å…­ã€Blockç»„åˆDispatch-groups" class="headerlink" title="å…­ã€Blockç»„åˆDispatch_groups"></a>å…­ã€Blockç»„åˆDispatch_groups</h4><p>dispatch groupsæ˜¯ä¸“é—¨ç”¨æ¥ç›‘è§†å¤šä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚dispatch_group_tå®ä¾‹ç”¨æ¥è¿½è¸ªä¸åŒé˜Ÿåˆ—ä¸­çš„ä¸åŒä»»åŠ¡ã€‚</p>
<p>å½“groupé‡Œæ‰€æœ‰äº‹ä»¶éƒ½å®ŒæˆGCD APIæœ‰ä¸¤ç§æ–¹å¼å‘é€é€šçŸ¥: </p>
<ul>
<li>ç¬¬ä¸€ç§æ˜¯dispatch_group_waitï¼Œä¼šé˜»å¡å½“å‰è¿›ç¨‹ï¼Œç­‰æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆæˆ–ç­‰å¾…è¶…æ—¶ã€‚ </li>
<li>ç¬¬äºŒç§æ–¹æ³•æ˜¯ä½¿ç”¨dispatch_group_notifyï¼Œå¼‚æ­¥æ‰§è¡Œé—­åŒ…ï¼Œä¸ä¼šé˜»å¡ã€‚ </li>
</ul>
<ol>
<li>ç¬¬ä¸€ç§ä½¿ç”¨dispatch_group_waitçš„swiftçš„ä¾‹å­ï¼š </li>
</ol>
<figure class="highlight swift"><table><tr><td class="code"><pre><code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">downloadPhotosWithCompletion</span><span class="hljs-params">(completion: BatchPhotoDownloadingCompletionClosure?)</span></span> &#123;<br>  dispatch_async(<span class="hljs-type">GlobalUserInitiatedQueue</span>) &#123;<br>    <span class="hljs-comment">// å› ä¸ºdispatch_group_waitä¼šç§Ÿå¡å½“å‰è¿›ç¨‹ï¼Œæ‰€ä»¥è¦ä½¿ç”¨dispatch_asyncå°†æ•´ä¸ªæ–¹æ³•è¦æ”¾åˆ°åå°é˜Ÿåˆ—æ‰èƒ½å¤Ÿä¿è¯ä¸»çº¿ç¨‹ä¸è¢«é˜»å¡</span><br>    <span class="hljs-keyword">var</span> storedError: <span class="hljs-type">NSError!</span><br>    <span class="hljs-keyword">var</span> downloadGroup = dispatch_group_create() <span class="hljs-comment">// åˆ›å»ºä¸€ä¸ªdispatch group</span><br>    <span class="hljs-keyword">let</span> addresses = [<span class="hljs-type">OverlyAttachedGirlfriendURLString</span>,<br>                     <span class="hljs-type">SuccessKidURLString</span>,<br>                     <span class="hljs-type">LotsOfFacesURLString</span>]<br>    <span class="hljs-keyword">for</span> address <span class="hljs-keyword">in</span> addresses &#123;<br>      <span class="hljs-keyword">let</span> url = <span class="hljs-type">NSURL</span>(string: address)<br>      dispatch_group_enter(downloadGroup)<br>        <span class="hljs-comment">// dispatch_group_enteræ˜¯é€šçŸ¥dispatch groupä»»åŠ¡å¼€å§‹äº†ï¼Œdispatch_group_enterå’Œdispatch_group_leaveæ˜¯æˆå¯¹è°ƒç”¨ï¼Œä¸ç„¶ç¨‹åºå°±å´©æºƒäº†ã€‚</span><br>      <span class="hljs-keyword">let</span> photo = <span class="hljs-type">DownloadPhoto</span>(url: url!) &#123;<br>        image, error <span class="hljs-keyword">in</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error = error &#123;<br>          storedError = error<br>        &#125;<br>        dispatch_group_leave(downloadGroup) <br>        <span class="hljs-comment">// ä¿æŒå’Œdispatch_group_enteré…å¯¹ã€‚é€šçŸ¥ä»»åŠ¡å·²ç»å®Œæˆ</span><br>      &#125;<br>      <span class="hljs-type">PhotoManager</span>.sharedManager.addPhoto(photo)<br>    &#125;<br>    dispatch_group_wait(downloadGroup, <span class="hljs-type">DISPATCH_TIME_FOREVER</span>)<br>    <span class="hljs-comment">// dispatch_group_waitç­‰å¾…æ‰€æœ‰ä»»åŠ¡éƒ½å®Œæˆç›´åˆ°è¶…æ—¶ã€‚å¦‚æœä»»åŠ¡å®Œæˆå‰å°±è¶…æ—¶äº†ï¼Œå‡½æ•°ä¼šè¿”å›ä¸€ä¸ªéé›¶å€¼ï¼Œå¯ä»¥é€šè¿‡è¿”å›å€¼åˆ¤æ–­æ˜¯å¦è¶…æ—¶ã€‚ä¹Ÿå¯ä»¥ç”¨DISPATCH_TIME_FOREVERè¡¨ç¤ºä¸€ç›´ç­‰ã€‚</span><br>    dispatch_async(<span class="hljs-type">GlobalMainQueue</span>) &#123;<br>      <span class="hljs-comment">// è¿™é‡Œå¯ä»¥ä¿è¯æ‰€æœ‰å›¾ç‰‡ä»»åŠ¡éƒ½å®Œæˆï¼Œç„¶ååœ¨main queueé‡ŒåŠ å…¥å®Œæˆåè¦å¤„ç†çš„é—­åŒ…ï¼Œä¼šåœ¨main queueé‡Œæ‰§è¡Œã€‚</span><br>      <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> completion = completion &#123; <span class="hljs-comment">// æ‰§è¡Œé—­åŒ…å†…å®¹</span><br>        completion(error: storedError)<br>      &#125;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>  ocä¾‹å­</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">- (void)dispatchGroupWaitDemo &#123;<br>  dispatch_queue_t concurrentQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT);<br>  dispatch_group_t group &#x3D; dispatch_group_create();<br>  &#x2F;&#x2F;åœ¨groupä¸­æ·»åŠ é˜Ÿåˆ—çš„block<br>  dispatch_group_async(group, concurrentQueue, ^&#123;<br>    [NSThread sleepForTimeInterval:2.f];<br>    NSLog(@&quot;1&quot;);<br>  &#125;);<br>  dispatch_group_async(group, concurrentQueue, ^&#123;<br>    NSLog(@&quot;2&quot;);<br>  &#125;);<br>  dispatch_group_wait(group, DISPATCH_TIME_FOREVER);<br>  NSLog(@&quot;go on&quot;);<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç¬¬äºŒç§ä½¿ç”¨dispatch_group_notifyçš„<strong>swift</strong>çš„ä¾‹å­ï¼š </li>
</ol>
<figure class="highlight swift"><table><tr><td class="code"><pre><code class="hljs swift"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">downloadPhotosWithCompletion</span><span class="hljs-params">(completion: BatchPhotoDownloadingCompletionClosure?)</span></span> &#123;<br><br>  <span class="hljs-comment">// ä¸ç”¨åŠ dispatch_asyncï¼Œå› ä¸ºæ²¡æœ‰é˜»å¡ä¸»è¿›ç¨‹</span><br>  <span class="hljs-keyword">var</span> storedError: <span class="hljs-type">NSError!</span><br>  <span class="hljs-keyword">var</span> downloadGroup = dispatch_group_create()<br>  <span class="hljs-keyword">for</span> address <span class="hljs-keyword">in</span> [<span class="hljs-type">OverlyAttachedGirlfriendURLString</span>,<br>                  <span class="hljs-type">SuccessKidURLString</span>,<br>                  <span class="hljs-type">LotsOfFacesURLString</span>] &#123;<br>    <span class="hljs-keyword">let</span> url = <span class="hljs-type">NSURL</span>(string: address)<br>    dispatch_group_enter(downloadGroup)<br>    <span class="hljs-keyword">let</span> photo = <span class="hljs-type">DownloadPhoto</span>(url: url!) &#123;<br>      image, error <span class="hljs-keyword">in</span><br>      <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> error = error &#123;<br>        storedError = error<br>      &#125;<br>      dispatch_group_leave(downloadGroup)<br>    &#125;<br>    <span class="hljs-type">PhotoManager</span>.sharedManager.addPhoto(photo)<br>  &#125;<br>  dispatch_group_notify(downloadGroup, <span class="hljs-type">GlobalMainQueue</span>) &#123;<br>    <span class="hljs-comment">// dispatch_group_notifyå’Œdispatch_group_waitçš„åŒºåˆ«å°±æ˜¯æ˜¯å¼‚æ­¥æ‰§è¡Œé—­åŒ…çš„ï¼Œå½“dispatch groupsä¸­æ²¡æœ‰å‰©ä½™çš„ä»»åŠ¡æ—¶é—­åŒ…æ‰æ‰§è¡Œã€‚è¿™é‡Œæ˜¯æŒ‡æ˜åœ¨ä¸»é˜Ÿåˆ—ä¸­æ‰§è¡Œã€‚</span><br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">let</span> completion = completion &#123;<br>      completion(error: storedError)<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ocä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">&#x2F;&#x2F;dispatch_group_notify<br>- (void)dispatchGroupNotifyDemo &#123;<br>  dispatch_queue_t concurrentQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT);<br><br>  dispatch_group_t group &#x3D; dispatch_group_create();<br>  dispatch_group_async(group, concurrentQueue, ^&#123;<br>    NSLog(@&quot;1&quot;);<br>  &#125;);<br>  dispatch_group_async(group, concurrentQueue, ^&#123;<br>    NSLog(@&quot;2&quot;);<br>  &#125;);<br>  dispatch_group_notify(group, dispatch_get_main_queue(), ^&#123;<br>    NSLog(@&quot;end&quot;);<br>  &#125;);<br>  NSLog(@&quot;can continue&quot;);<br>&#125;<br><br>&#x2F;&#x2F;dispatch_group_wait<br>- (void)dispatchGroupWaitDemo &#123;<br>  dispatch_queue_t concurrentQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT);<br>  dispatch_group_t group &#x3D; dispatch_group_create();<br>  &#x2F;&#x2F;åœ¨groupä¸­æ·»åŠ é˜Ÿåˆ—çš„block<br>  dispatch_group_async(group, concurrentQueue, ^&#123;<br>    [NSThread sleepForTimeInterval:2.f];<br>    NSLog(@&quot;1&quot;);<br>  &#125;);<br>  dispatch_group_async(group, concurrentQueue, ^&#123;<br>    NSLog(@&quot;2&quot;);<br>  &#125;);<br>  dispatch_group_wait(group, DISPATCH_TIME_FOREVER);<br>  NSLog(@&quot;can continue&quot;);<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>å¦‚ä½•å¯¹ç°æœ‰APIä½¿ç”¨dispatch_group_t </li>
</ol>
<p>ç»™Core Dataçš„-performBlock:æ·»åŠ groupsã€‚ç»„åˆå®Œæˆä»»åŠ¡åä½¿ç”¨dispatch_group_notifyæ¥è¿è¡Œä¸€ä¸ªblockå³å¯ã€‚ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">- (void)withGroup:(dispatch_group_t)group performBlock:(dispatch_block_t)block &#123;<br>  if (group &#x3D;&#x3D; NULL) &#123;<br>    [self performBlock:block];<br>  &#125; else &#123;<br>    dispatch_group_enter(group);<br>    [self performBlock:^()&#123;<br>      block();<br>      dispatch_group_leave(group);<br>    &#125;];<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>NSURLConnectionä¹Ÿå¯ä»¥è¿™æ ·åš</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c"><br>- (void)withGroup:(dispatch_group_t)group sendAsynchronousRequest:(NSURLRequest *)request<br>            queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler &#123;<br>    if (group &#x3D;&#x3D; NULL) &#123;<br>        [self sendAsynchronousRequest:request queue:queue completionHandler:handler];<br>    &#125; else &#123;<br>        dispatch_group_enter(group);<br>        [self sendAsynchronousRequest:request<br>                                queue:queue<br>                    completionHandler:^(NSURLResponse *response, NSData *data, NSError *error)&#123;<br>            handler(response, data, error);<br>            dispatch_group_leave(group);<br>        &#125;];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><code>æ³¨æ„äº‹é¡¹ï¼š</code> </p>
<ul>
<li>dispatch_group_async ç­‰ä»·äº dispatch_group_enter() å’Œ dispatch_group_leave() çš„ç»„åˆã€‚ </li>
<li>dispatch_group_enter() å¿…é¡»è¿è¡Œåœ¨ dispatch_group_leave() ä¹‹å‰ã€‚ </li>
<li>dispatch_group_enter() å’Œ dispatch_group_leave() éœ€è¦æˆå¯¹å‡ºç°çš„ </li>
</ul>
<h4 id="ä¸ƒã€Dispatch-Block"><a href="#ä¸ƒã€Dispatch-Block" class="headerlink" title="ä¸ƒã€Dispatch Block"></a>ä¸ƒã€Dispatch Block</h4><p>â€‹    é˜Ÿåˆ—æ‰§è¡Œä»»åŠ¡éƒ½æ˜¯blockçš„æ–¹å¼</p>
<ol>
<li><h5 id="dispatch-block-t-åˆ›å»ºblock"><a href="#dispatch-block-t-åˆ›å»ºblock" class="headerlink" title="dispatch_block_t åˆ›å»ºblock"></a>dispatch_block_t åˆ›å»ºblock</h5></li>
</ol>
<ul>
<li><pre><code class="objective-c">- (void)createDispatchBlock {
  //normal way
  dispatch_queue_t concurrentQueue = dispatch_queue_create(&quot;com.starming.gcddemo.concurrentqueue&quot;,DISPATCH_QUEUE_CONCURRENT);

  dispatch_block_t block = dispatch_block_create(0, ^{
    NSLog(@&quot;run block&quot;);
  });
  dispatch_async(concurrentQueue, block);
  //QOS way
  dispatch_block_t qosBlock = dispatch_block_create_with_qos_class(0, QOS_CLASS_USER_INITIATED, -1, ^{
    NSLog(@&quot;run qos block&quot;);
  });
  dispatch_async(concurrentQueue, qosBlock);
}
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain"><br><br><br>2. ##### dispatch_block_wait<br><br>   å¯ä»¥æ ¹æ®dispatch blockæ¥è®¾ç½®ç­‰å¾…æ—¶é—´ï¼Œå‚æ•°DISPATCH_TIME_FOREVERä¼šä¸€ç›´ç­‰å¾…blockç»“æŸ <br><br>- &#96;&#96;&#96;objective-c<br>  - (void)dispatchBlockWaitDemo &#123; <br>  dispatch_queue_t serialQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL);<br>  dispatch_block_t block &#x3D; dispatch_block_create(0, ^&#123;<br>    NSLog(@&quot;star&quot;);<br>    [NSThread sleepForTimeInterval:5.f];<br>    NSLog(@&quot;end&quot;);<br>  &#125;);<br>  dispatch_async(serialQueue, block);<br>  &#x2F;&#x2F;è®¾ç½®DISPATCH_TIME_FOREVERä¼šä¸€ç›´ç­‰åˆ°å‰é¢ä»»åŠ¡éƒ½å®Œæˆ<br>  dispatch_block_wait(block, DISPATCH_TIME_FOREVER);<br>  NSLog(@&quot;ok, now can go on&quot;);<br>  &#125;<br></code></pre></td></tr></table></figure>


</code></pre>
</li>
</ul>
<ol start="3">
<li><h5 id="dispatch-block-notify"><a href="#dispatch-block-notify" class="headerlink" title="dispatch_block_notify"></a>dispatch_block_notify</h5><p>å¯ä»¥ç›‘è§†æŒ‡å®šdispatch blockç»“æŸï¼Œç„¶åå†åŠ å…¥ä¸€ä¸ªblockåˆ°é˜Ÿåˆ—ä¸­ã€‚ </p>
<p>ä¸‰ä¸ªå‚æ•°åˆ†åˆ«ä¸ºï¼Œç¬¬ä¸€ä¸ªæ˜¯éœ€è¦ç›‘è§†çš„blockï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦æäº¤æ‰§è¡Œçš„é˜Ÿåˆ—ï¼Œç¬¬ä¸‰ä¸ªæ˜¯å¾…åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­çš„block </p>
</li>
</ol>
<ul>
<li><pre><code class="objective-c">- (void)dispatchBlockNotifyDemo {
  dispatch_queue_t serialQueue = dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL);
  dispatch_block_t firstBlock = dispatch_block_create(0, ^{
    NSLog(@&quot;first block start&quot;);
    [NSThread sleepForTimeInterval:2.f];
    NSLog(@&quot;first block end&quot;);
  });
  dispatch_async(serialQueue, firstBlock);
  dispatch_block_t secondBlock = dispatch_block_create(0, ^{
    NSLog(@&quot;second block run&quot;);
  });
  //first blockæ‰§è¡Œå®Œæ‰åœ¨serial queueä¸­æ‰§è¡Œsecond block
  dispatch_block_notify(firstBlock, serialQueue, secondBlock);
}
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs plain"><br>  <br><br>4. ##### dispatch_block_cancel<br><br>   iOS8åGCDæ”¯æŒå¯¹dispatch blockçš„å–æ¶ˆ <br><br>- &#96;&#96;&#96;objective-c<br>  - (void)dispatchBlockCancelDemo &#123;<br>    dispatch_queue_t serialQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL);<br>    dispatch_block_t firstBlock &#x3D; dispatch_block_create(0, ^&#123;<br>      NSLog(@&quot;first block start&quot;);<br>      [NSThread sleepForTimeInterval:2.f];<br>      NSLog(@&quot;first block end&quot;);<br>    &#125;);<br>    dispatch_block_t secondBlock &#x3D; dispatch_block_create(0, ^&#123;<br>      NSLog(@&quot;second block run&quot;);<br>    &#125;);<br>    dispatch_async(serialQueue, firstBlock);<br>    dispatch_async(serialQueue, secondBlock);<br>    &#x2F;&#x2F;å–æ¶ˆsecondBlock<br>    dispatch_block_cancel(secondBlock);<br>  &#125;<br></code></pre></td></tr></table></figure>


</code></pre>
</li>
</ul>
<ol start="5">
<li><h5 id="ä½¿ç”¨dispatch-block-objectï¼ˆè°ƒåº¦å—ï¼‰åœ¨ä»»åŠ¡æ‰§è¡Œå‰è¿›è¡Œå–æ¶ˆ"><a href="#ä½¿ç”¨dispatch-block-objectï¼ˆè°ƒåº¦å—ï¼‰åœ¨ä»»åŠ¡æ‰§è¡Œå‰è¿›è¡Œå–æ¶ˆ" class="headerlink" title="ä½¿ç”¨dispatch block objectï¼ˆè°ƒåº¦å—ï¼‰åœ¨ä»»åŠ¡æ‰§è¡Œå‰è¿›è¡Œå–æ¶ˆ"></a>ä½¿ç”¨dispatch block objectï¼ˆè°ƒåº¦å—ï¼‰åœ¨ä»»åŠ¡æ‰§è¡Œå‰è¿›è¡Œå–æ¶ˆ</h5><p>dispatch block objectå¯ä»¥ä¸ºé˜Ÿåˆ—ä¸­çš„å¯¹è±¡è®¾ç½® </p>
<p>ç¤ºä¾‹ï¼Œä¸‹è½½å›¾ç‰‡ä¸­é€”è¿›è¡Œå–æ¶ˆ </p>
</li>
</ol>
<ul>
<li><pre><code class="swift"><span class="function"><span class="keyword">func</span> <span class="title">downloadPhotosWithCompletion</span><span class="params">(completion: BatchPhotoDownloadingCompletionClosure?)</span></span> {

  <span class="keyword">var</span> storedError: <span class="type">NSError!</span>
  <span class="keyword">let</span> downloadGroup = dispatch_group_create()
  <span class="keyword">var</span> addresses = [<span class="type">OverlyAttachedGirlfriendURLString</span>,
                   <span class="type">SuccessKidURLString</span>,
                   <span class="type">LotsOfFacesURLString</span>]
  addresses += addresses + addresses <span class="comment">// æ‰©å±•addressæ•°ç»„ï¼Œå¤åˆ¶3ä»½</span>
  <span class="keyword">var</span> blocks: [dispatch_block_t] = [] <span class="comment">// ä¸€ä¸ªä¿å­˜blockçš„æ•°ç»„</span>
     <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span> ..&lt; addresses.<span class="built_in">count</span> {
    dispatch_group_enter(downloadGroup)
    <span class="keyword">let</span> block = dispatch_block_create(<span class="type">DISPATCH_BLOCK_INHERIT_QOS_CLASS</span>) {
      <span class="comment">// åˆ›å»ºä¸€ä¸ªblockï¼Œblockçš„æ ‡å¿—æ˜¯DISPATCH_BLOCK_INHERIT_QOS_CLASS</span>
      <span class="keyword">let</span> index = <span class="type">Int</span>(i)
      <span class="keyword">let</span> address = addresses[index]
      <span class="keyword">let</span> url = <span class="type">NSURL</span>(string: address)
      <span class="keyword">let</span> photo = <span class="type">DownloadPhoto</span>(url: url!) {
        image, error <span class="keyword">in</span>
        <span class="keyword">if</span> <span class="keyword">let</span> error = error {
          storedError = error
        }
        dispatch_group_leave(downloadGroup)
      }
      <span class="type">PhotoManager</span>.sharedManager.addPhoto(photo)
    }
    blocks.append(block)
    dispatch_async(<span class="type">GlobalMainQueue</span>, block)
    <span class="comment">// æŠŠè¿™ä¸ªblockæ”¾åˆ°GlobalMainQueueä¸Šå¼‚æ­¥è°ƒç”¨ã€‚å› ä¸ºå…¨å±€é˜Ÿåˆ—æ˜¯ä¸€ä¸ªé¡ºåºé˜Ÿåˆ—æ‰€ä»¥æ–¹ä¾¿å–æ¶ˆå¯¹è±¡blockï¼ŒåŒæ—¶å¯ä»¥ä¿è¯ä¸‹è½½ä»»åŠ¡åœ¨downloadPhotosWithCompletionè¿”å›åæ‰å¼€å§‹æ‰§è¡Œã€‚</span>
  }
  <span class="keyword">for</span> block <span class="keyword">in</span> blocks[<span class="number">3</span> ..&lt; blocks.<span class="built_in">count</span>] {
    <span class="keyword">let</span> cancel = arc4random_uniform(<span class="number">2</span>) <span class="comment">// éšæœºè¿”å›ä¸€ä¸ªæ•´æ•°ï¼Œä¼šè¿”å›0æˆ–1</span>
    <span class="keyword">if</span> cancel == <span class="number">1</span> {
      dispatch_block_cancel(block)
      <span class="comment">// å¦‚æœæ˜¯1å°±å–æ¶ˆblockï¼Œè¿™ä¸ªåªèƒ½å‘ç”Ÿåœ¨blockè¿˜åœ¨é˜Ÿåˆ—ä¸­å¹¶æ²¡æœ‰å¼€å§‹çš„æƒ…å†µä¸‹ã€‚å› ä¸ºæŠŠblockå·²ç»æ”¾åˆ°äº†GlobalMainQueueä¸­ï¼Œæ‰€ä»¥è¿™ä¸ªåœ°æ–¹ä¼šå…ˆæ‰§è¡Œï¼Œæ‰§è¡Œå®Œäº†æ‰ä¼šæ‰§è¡Œblockã€‚</span>
      <span class="comment">// å› ä¸ºå·²ç»dispatch_group_enteräº†ï¼Œæ‰€ä»¥å–æ¶ˆæ—¶ä¹Ÿè¦å°†å…¶éƒ½leaveæ‰ã€‚</span>
      dispatch_group_leave(downloadGroup)       
    }
  }
  dispatch_group_notify(downloadGroup, <span class="type">GlobalMainQueue</span>) {
    <span class="keyword">if</span> <span class="keyword">let</span> completion = completion {
      completion(error: storedError)
    }
  }
}
&lt;!--ï¿¼<span class="number">29</span>--&gt;</code></pre>
</li>
</ul>
<ul>
<li>dispatch_io_createï¼šåˆ›å»ºdispatch io ã€‚</li>
<li>dispatch_io_set_low_waterï¼šæŒ‡å®šåˆ‡å‰²æ–‡ä»¶å¤§å° ã€‚</li>
<li>dispatch_io_readï¼šè¯»å–åˆ‡å‰²çš„æ–‡ä»¶ç„¶ååˆå¹¶ã€‚ </li>
</ul>
<blockquote>
<p>è‹¹æœç³»ç»Ÿæ—¥å¿—APIé‡Œç”¨åˆ°äº†è¿™ä¸ªæŠ€æœ¯ï¼Œå¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ï¼š </p>
<p><a href="https://github.com/Apple-FOSS-Mirror/Libc/blob/2ca2ae74647714acfc18674c3114b1a5d3325d7d/gen/asl.c" target="_blank" rel="noopener">https://github.com/Apple-FOSS-Mirror/Libc/blob/2ca2ae74647714acfc18674c3114b1a5d3325d7d/gen/asl.c</a></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">pipe_q &#x3D; dispatch_queue_create(&quot;PipeQ&quot;, NULL);<br>&#x2F;&#x2F;åˆ›å»º<br>pipe_channel &#x3D; dispatch_io_create(DISPATCH_IO_STREAM, fd, pipe_q, ^(int err)&#123;<br>  close(fd);<br>&#125;);<br>*out_fd &#x3D; fdpair[1];<br><br>&#x2F;&#x2F;è®¾ç½®åˆ‡å‰²å¤§å°<br>dispatch_io_set_low_water(pipe_channel, SIZE_MAX);<br>dispatch_io_read(pipe_channel, 0, SIZE_MAX, pipe_q, ^(bool done, dispatch_data_t pipedata, int err) &#123;<br>  if (err &#x3D;&#x3D; 0) &#123;<br>    size_t len &#x3D; dispatch_data_get_size(pipedata);<br>    if (len &gt; 0) &#123;<br>      &#x2F;&#x2F;å¯¹æ¯æ¬¡åˆ‡å—æ•°æ®çš„å¤„ç†<br>      const char *bytes &#x3D; NULL;<br>      char *encoded;<br>      uint32_t eval;<br>      dispatch_data_t md &#x3D; dispatch_data_create_map(pipedata, <br>                                                    (const void **)&amp;bytes, <br>                                                    &amp;len);<br>      encoded &#x3D; asl_core_encode_buffer(bytes, len);<br>      asl_msg_set_key_val(aux, ASL_KEY_AUX_DATA, encoded);<br>      free(encoded);<br>      eval &#x3D; _asl_evaluate_send(NULL, (aslmsg)aux, -1);<br>      _asl_send_message(NULL, eval, aux, NULL);<br>      asl_msg_release(aux);<br>      dispatch_release(md);<br>    &#125;<br>  &#125;<br>  if (done) &#123;<br>    &#x2F;&#x2F;semaphore +1ä½¿å¾—ä¸éœ€è¦å†ç­‰å¾…ç»§ç»­æ‰§è¡Œä¸‹å»ã€‚<br>    dispatch_semaphore_signal(sem);<br>    dispatch_release(pipe_channel);<br>    dispatch_release(pipe_q);<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>



<h4 id="ä¹ã€Dispatch-Source-ç”¨GCDç›‘è§†è¿›ç¨‹"><a href="#ä¹ã€Dispatch-Source-ç”¨GCDç›‘è§†è¿›ç¨‹" class="headerlink" title="ä¹ã€Dispatch Source ç”¨GCDç›‘è§†è¿›ç¨‹"></a>ä¹ã€Dispatch Source ç”¨GCDç›‘è§†è¿›ç¨‹</h4><p>Dispatch Sourceç”¨äºç›‘å¬ç³»ç»Ÿçš„åº•å±‚å¯¹è±¡ï¼Œæ¯”å¦‚æ–‡ä»¶æè¿°ç¬¦ï¼ŒMachç«¯å£ï¼Œä¿¡å·é‡ç­‰ã€‚ä¸»è¦å¤„ç†çš„äº‹ä»¶å¦‚ä¸‹è¡¨ </p>
<table>
<thead>
<tr>
<th align="center">æ–¹æ³•</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">DISPATCH_SOURCE_TYPE_DATA_ADD</td>
<td align="center">æ•°æ®å¢åŠ </td>
</tr>
<tr>
<td align="center">DISPATCH_SOURCE_TYPE_DATA_OR</td>
<td align="center">æ•°æ®OR</td>
</tr>
<tr>
<td align="center">DISPATCH_SOURCE_TYPE_MACH_SEND</td>
<td align="center">Machç«¯å£å‘é€</td>
</tr>
<tr>
<td align="center">DISPATCH_SOURCE_TYPE_MACH_RECV</td>
<td align="center">Machç«¯å£æ¥æ”¶</td>
</tr>
<tr>
<td align="center">DISPATCH_SOURCE_TYPE_MEMORYPRESSURE</td>
<td align="center">å†…å­˜æƒ…å†µ</td>
</tr>
<tr>
<td align="center">DISPATCH_SOURCE_TYPE_PROC</td>
<td align="center">è¿›ç¨‹äº‹ä»¶</td>
</tr>
<tr>
<td align="center">DISPATCH_SOURCE_TYPE_READ</td>
<td align="center">è¯»æ•°æ®</td>
</tr>
<tr>
<td align="center">DISPATCH_SOURCE_TYPE_SIGNAL</td>
<td align="center">ä¿¡å·</td>
</tr>
<tr>
<td align="center">DISPATCH_SOURCE_TYPE_TIMER</td>
<td align="center">å®šæ—¶å™¨</td>
</tr>
<tr>
<td align="center">DISPATCH_SOURCE_TYPE_VNODE</td>
<td align="center">æ–‡ä»¶ç³»ç»Ÿå˜åŒ–</td>
</tr>
<tr>
<td align="center">DISPATCH_SOURCE_TYPE_WRITE</td>
<td align="center">æ–‡ä»¶å†™å…¥</td>
</tr>
</tbody></table>
<p>æ–¹æ³• </p>
<ul>
<li>dispatch_source_createï¼šåˆ›å»º dispatch source ï¼Œåˆ›å»ºåä¼šå¤„äºæŒ‚èµ·çŠ¶æ€è¿›è¡Œäº‹ä»¶æ¥æ”¶ï¼Œéœ€è¦è®¾ç½®äº‹ä»¶å¤„ç†handlerè¿›è¡Œäº‹ä»¶å¤„ç†ã€‚ </li>
<li>dispatch_source_set_event_handlerï¼šè®¾ç½®äº‹ä»¶å¤„ç† handler </li>
<li>dispatch_source_set_cancel_handlerï¼šäº‹ä»¶å–æ¶ˆhandlerï¼Œå°±æ˜¯åœ¨ dispatch source é‡Šæ”¾å‰åšäº›æ¸…ç†çš„äº‹ã€‚ </li>
<li>dispatch_source_cancelï¼šå…³é—­ dispatch sourceï¼Œè®¾ç½®çš„äº‹ä»¶å¤„ç† handler ä¸ä¼šè¢«æ‰§è¡Œï¼Œå·²ç»æ‰§è¡Œçš„äº‹ä»¶handlerä¸ä¼šå–æ¶ˆã€‚ </li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">NSRunningApplication *mail &#x3D; [NSRunningApplication runningApplicationsWithBundleIdentifier:@&quot;com.apple.mail&quot;];<br>if (mail &#x3D;&#x3D; nil) &#123;<br>  return;<br>&#125;<br><br>pid_t const pid &#x3D; mail.processIdentifier;<br>self.source &#x3D; dispatch_source_create(DISPATCH_SOURCE_TYPE_PROC, pid, <br>                                     DISPATCH_PROC_EXIT, <br>                                     DISPATCH_TARGET_QUEUE_DEFAULT);<br>dispatch_source_set_event_handler(self.source, ^()&#123;<br>  NSLog(@&quot;Mail quit.&quot;);<br>&#125;);<br><br>&#x2F;&#x2F;åœ¨äº‹ä»¶æºä¼ åˆ°ä½ çš„äº‹ä»¶å¤„ç†å‰éœ€è¦è°ƒç”¨dispatch_resume()è¿™ä¸ªæ–¹æ³•<br>dispatch_resume(self.source);<br></code></pre></td></tr></table></figure>



<p>ç›‘è§†æ–‡ä»¶å¤¹å†…æ–‡ä»¶å˜åŒ– </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">NSURL *directoryURL; &#x2F;&#x2F; assume this is set to a directory<br>int const fd &#x3D; open([[directoryURL path] fileSystemRepresentation], O_EVTONLY);<br>if (fd &lt; 0) &#123;<br>  char buffer[80];<br>	strerror_r(errno, buffer, sizeof(buffer));<br>	NSLog(@&quot;Unable to open &quot;%@&quot;: %s (%d)&quot;, [directoryURL path], buffer, errno);<br>	return;<br>&#125;<br><br>dispatch_source_t source &#x3D; dispatch_source_create(DISPATCH_SOURCE_TYPE_VNODE, <br>                                                  fd,<br>                                                  DISPATCH_VNODE_WRITE | <br>                                                  DISPATCH_VNODE_DELETE, <br>                                                  DISPATCH_TARGET_QUEUE_DEFAULT);<br><br>dispatch_source_set_event_handler(source, ^()&#123;<br>	unsigned long const data &#x3D; dispatch_source_get_data(source);<br>	if (data &amp; DISPATCH_VNODE_WRITE) &#123;<br>		NSLog(@&quot;The directory changed.&quot;);<br>	&#125;<br>	if (data &amp; DISPATCH_VNODE_DELETE) &#123;<br>		NSLog(@&quot;The directory has been deleted.&quot;);<br>	&#125;<br>&#125;);<br>dispatch_source_set_cancel_handler(source, ^()&#123;<br>	close(fd);<br>&#125;);<br><br>self.source &#x3D; source;<br>dispatch_resume(self.source);<br></code></pre></td></tr></table></figure>

<p><strong>è¿˜è¦æ³¨æ„éœ€è¦ç”¨DISPATCH_VNODE_DELETE å»æ£€æŸ¥ç›‘è§†çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹æ˜¯å¦è¢«åˆ é™¤ï¼Œå¦‚æœåˆ é™¤äº†å°±åœæ­¢ç›‘å¬</strong></p>
<p>NSTimeråœ¨ä¸»çº¿ç¨‹çš„runloopé‡Œä¼šåœ¨runloopåˆ‡æ¢å…¶å®ƒæ¨¡å¼æ—¶åœæ­¢ï¼Œè¿™æ—¶å°±éœ€è¦æ‰‹åŠ¨åœ¨å­çº¿ç¨‹å¼€å¯ä¸€ä¸ªæ¨¡å¼ä¸º NSRunLoopCommonModesçš„runloopï¼Œ å¦‚æœä¸æƒ³å¼€å¯ä¸€ä¸ªæ–°çš„runloopå¯ä»¥ç”¨ä¸è·Ÿrunloopå…³è”çš„dispatch source timerï¼Œå¦‚ä¸‹ã€‚ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">dispatch_source_t source &#x3D; dispatch_source_create(DISPATCH_SOURCE_TYPE_TIMER,<br>                                                  0, <br>                                                  0, <br>                                                  DISPATCH_TARGET_QUEUE_DEFAULT);<br><br>dispatch_source_set_event_handler(source, ^()&#123;<br>	NSLog(@&quot;Time flies.&quot;);<br>&#125;);<br><br>dispatch_time_t start<br>dispatch_source_set_timer(source, <br>                          DISPATCH_TIME_NOW, <br>                          5ull * NSEC_PER_SEC,<br>                          100ull * NSEC_PER_MSEC);<br><br>self.source &#x3D; source;<br>dispatch_resume(self.source);<br></code></pre></td></tr></table></figure>



<h4 id="åã€Dispatch-Semaphoreå’Œçš„ä»‹ç»"><a href="#åã€Dispatch-Semaphoreå’Œçš„ä»‹ç»" class="headerlink" title="åã€Dispatch Semaphoreå’Œçš„ä»‹ç»"></a>åã€Dispatch Semaphoreå’Œçš„ä»‹ç»</h4><p>å¦å¤–ä¸€ç§ä¿è¯åŒæ­¥çš„æ–¹æ³•ã€‚ä½¿ç”¨ dispatch_semaphore_signal åŠ 1 dispatch_semaphore_wait å‡1ï¼Œä¸º0æ—¶ç­‰å¾…çš„è®¾ç½®æ–¹å¼æ¥è¾¾åˆ°çº¿ç¨‹åŒæ­¥çš„ç›®çš„å’Œ åŒæ­¥é”ä¸€æ ·èƒ½å¤Ÿè§£å†³èµ„æºæŠ¢å çš„é—®é¢˜ã€‚ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">&#x2F;&#x2F;dispatch semaphore<br>- (void)dispatchSemaphoreDemo &#123;<br>  &#x2F;&#x2F;åˆ›å»ºsemaphore<br>	dispatch_semaphore_t semaphore &#x3D; dispatch_semaphore_create(0);<br>	dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;<br>	NSLog(@&quot;start&quot;);<br>	[NSThread sleepForTimeInterval:1.f];<br>	NSLog(@&quot;semaphore +1&quot;);<br>	dispatch_semaphore_signal(semaphore); &#x2F;&#x2F;+1 semaphore<br>    <br>	&#125;);<br>	dispatch_semaphore_wait(semaphore, DISPATCH_TIME_FOREVER);<br>	NSLog(@&quot;continue&quot;);<br>&#125;<br></code></pre></td></tr></table></figure>



<h4 id="åä¸€ã€é”"><a href="#åä¸€ã€é”" class="headerlink" title="åä¸€ã€é”"></a>åä¸€ã€é”</h4><p>è¿™é‡Œç®€å•ä»‹ç»ä¸‹iOSä¸­å¸¸ç”¨çš„å„ç§é”å’Œä»–ä»¬çš„æ€§èƒ½ã€‚ </p>
<ul>
<li>NSRecursiveLockï¼šé€’å½’é”ï¼Œå¯ä»¥åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸­åå¤è·å–é”ä¸ä¼šé€ æˆæ­»é”ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šè®°å½•è·å–é”å’Œé‡Šæ”¾é”çš„æ¬¡æ•°æ¥è¾¾åˆ°ä½•æ—¶é‡Šæ”¾çš„ä½œç”¨ã€‚ </li>
<li>NSDistributedLockï¼šåˆ†å¸ƒé”ï¼ŒåŸºäºæ–‡ä»¶æ–¹å¼çš„é”æœºåˆ¶ï¼Œå¯ä»¥è·¨è¿›ç¨‹è®¿é—®ã€‚ </li>
<li>NSConditionLockï¼šæ¡ä»¶é”ï¼Œç”¨æˆ·å®šä¹‰æ¡ä»¶ï¼Œç¡®ä¿ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è·å–æ»¡è¶³ä¸€å®šæ¡ä»¶çš„é”ã€‚ å› ä¸ºçº¿ç¨‹é—´ç«äº‰ä¼šæ¶‰åŠåˆ°æ¡ä»¶é”æ£€æµ‹ï¼Œç³»ç»Ÿè°ƒç”¨ä¸Šä¸‹åˆ‡æ¢é¢‘ç¹å¯¼è‡´è€—æ—¶æ˜¯å‡ ä¸ªé”é‡Œæœ€é•¿çš„ã€‚ </li>
<li>OSSpinLockï¼šè‡ªæ—‹é”ï¼Œä¸è¿›å…¥å†…æ ¸ï¼Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ€§èƒ½æœ€é«˜ï¼Œä½†æŠ¢å å¤šæ—¶ä¼šå ç”¨è¾ƒå¤šcpuï¼Œå¥½ç‚¹å¤šï¼Œè¿™æ—¶ä½¿ç”¨pthread_mutexè¾ƒå¥½ã€‚ </li>
<li>pthread_mutex_tï¼šåŒæ­¥é”åŸºäºCè¯­è¨€ï¼Œåº•å±‚apiæ€§èƒ½é«˜ï¼Œä½¿ç”¨æ–¹æ³•å’Œå…¶å®ƒçš„ç±»ä¼¼ã€‚ </li>
<li>@synchronizedï¼šæ›´åŠ ç®€å•ã€‚ </li>
</ul>
<h4 id="åäºŒã€dispatch-suspendå’Œdispatch-resumeæŒ‚èµ·å’Œæ¢å¤é˜Ÿåˆ—"><a href="#åäºŒã€dispatch-suspendå’Œdispatch-resumeæŒ‚èµ·å’Œæ¢å¤é˜Ÿåˆ—" class="headerlink" title="åäºŒã€dispatch_suspendå’Œdispatch_resumeæŒ‚èµ·å’Œæ¢å¤é˜Ÿåˆ—"></a>åäºŒã€dispatch_suspendå’Œdispatch_resumeæŒ‚èµ·å’Œæ¢å¤é˜Ÿåˆ—</h4><p>dispatch_suspendè¿™é‡ŒæŒ‚èµ·ä¸ä¼šæš‚åœæ­£åœ¨æ‰§è¡Œçš„blockï¼Œåªæ˜¯èƒ½å¤Ÿæš‚åœè¿˜æ²¡æ‰§è¡Œçš„blockã€‚ </p>
<h4 id="åä¸‰ã€dispatch-set-contextå’Œdispatch-get-context"><a href="#åä¸‰ã€dispatch-set-contextå’Œdispatch-get-context" class="headerlink" title="åä¸‰ã€dispatch_set_contextå’Œdispatch_get_context"></a>åä¸‰ã€dispatch_set_contextå’Œdispatch_get_context</h4><p>?</p>
<h2 id="GCDæ·±å…¥æ“ä½œ"><a href="#GCDæ·±å…¥æ“ä½œ" class="headerlink" title="GCDæ·±å…¥æ“ä½œ"></a>GCDæ·±å…¥æ“ä½œ</h2><ul>
<li>ç¼“å†²åŒºï¼šdispatch_data_t åŸºäºé›¶ç¢çš„å†…å­˜åŒºåŸŸï¼Œä½¿ç”¨ dispatch_data_apply æ¥éå†ï¼Œè¿˜å¯ä»¥ç”¨ dispatch_data_create_subrange æ¥åˆ›å»ºä¸€ä¸ªä¸åšä»»ä½•æ‹·è´çš„å­åŒºåŸŸ </li>
<li>I/Oè°ƒåº¦ï¼šä½¿ç”¨GCDæä¾›çš„dispatch_io_readï¼Œdispatch_io_writeå’Œdispatch_io_close </li>
<li>æµ‹è¯•ï¼šä½¿ç”¨ dispatch_benchmark å°å·¥å…· </li>
<li>åŸå­æ“ä½œï¼š libkern/OSAtomic.h é‡Œå¯ä»¥æŸ¥çœ‹é‚£äº›å‡½æ•°ï¼Œç”¨äºåº•å±‚å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚ </li>
</ul>
<h3 id="GCDæ­»é”"><a href="#GCDæ­»é”" class="headerlink" title="GCDæ­»é”"></a>GCDæ­»é”</h3><p>ä¸²è¡Œé˜Ÿåˆ—é‡Œé¢åŒæ­¥ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—å°±ä¼šæ­»é”ï¼Œè§£å†³çš„æ–¹æ³•å°±æ˜¯å°†åŒæ­¥çš„ä¸²è¡Œé˜Ÿåˆ—æ”¾åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹å°±èƒ½å¤Ÿè§£å†³ã€‚ </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">- (void)deadLockCase1 &#123;<br>	NSLog(@&quot;1&quot;);<br>	&#x2F;&#x2F;ä¸»é˜Ÿåˆ—çš„åŒæ­¥çº¿ç¨‹ï¼ŒæŒ‰ç…§FIFOçš„åŸåˆ™ï¼ˆå…ˆå…¥å…ˆå‡ºï¼‰ï¼Œ2æ’åœ¨3åé¢ä¼šç­‰3æ‰§è¡Œå®Œï¼Œä½†å› ä¸ºåŒæ­¥çº¿ç¨‹ï¼Œ3åˆè¦ç­‰2æ‰§è¡Œå®Œï¼Œç›¸äº’ç­‰å¾…æˆä¸ºæ­»é”ã€‚<br>	dispatch_sync(dispatch_get_main_queue(), ^&#123;<br>		NSLog(@&quot;2&quot;);<br>	&#125;);<br>	NSLog(@&quot;3&quot;);<br>&#125;<br><br>- (void)deadLockCase2 &#123;<br>	NSLog(@&quot;1&quot;);<br>	&#x2F;&#x2F;3ä¼šç­‰2ï¼Œå› ä¸º2åœ¨å…¨å±€å¹¶è¡Œé˜Ÿåˆ—é‡Œï¼Œä¸éœ€è¦ç­‰å¾…3ï¼Œè¿™æ ·2æ‰§è¡Œå®Œå›åˆ°ä¸»é˜Ÿåˆ—ï¼Œ3å°±å¼€å§‹æ‰§è¡Œ<br>	dispatch_sync(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0), ^&#123;<br>		NSLog(@&quot;2&quot;);<br>	&#125;);<br>	NSLog(@&quot;3&quot;);<br>&#125;<br><br>- (void)deadLockCase3 &#123;<br><br>	dispatch_queue_t serialQueue &#x3D; dispatch_queue_create(&quot;com.starming.gcddemo.serialqueue&quot;, DISPATCH_QUEUE_SERIAL);<br>  NSLog(@&quot;1&quot;);<br>	dispatch_async(serialQueue, ^&#123;<br>		NSLog(@&quot;2&quot;);<br>			&#x2F;&#x2F;ä¸²è¡Œé˜Ÿåˆ—é‡Œé¢åŒæ­¥ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—å°±ä¼šæ­»é”<br>		dispatch_sync(serialQueue, ^&#123;<br>			NSLog(@&quot;3&quot;);<br>		&#125;);<br>		NSLog(@&quot;4&quot;);<br>	&#125;);<br>	NSLog(@&quot;5&quot;);<br>&#125;<br><br>- (void)deadLockCase4 &#123;<br>	NSLog(@&quot;1&quot;);<br>	dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;<br>		NSLog(@&quot;2&quot;);<br>		&#x2F;&#x2F;å°†åŒæ­¥çš„ä¸²è¡Œé˜Ÿåˆ—æ”¾åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹å°±èƒ½å¤Ÿè§£å†³<br>		dispatch_sync(dispatch_get_main_queue(), ^&#123;<br>			NSLog(@&quot;3&quot;);<br>		&#125;);<br>    NSLog(@&quot;4&quot;);<br>	&#125;);<br>	NSLog(@&quot;5&quot;);<br>&#125;<br><br>- (void)deadLockCase5 &#123;<br>	dispatch_async(dispatch_get_global_queue(0, 0), ^&#123;<br>		NSLog(@&quot;1&quot;);<br>		&#x2F;&#x2F;å›åˆ°ä¸»çº¿ç¨‹å‘ç°æ­»å¾ªç¯åé¢å°±æ²¡æ³•æ‰§è¡Œäº†<br>		dispatch_sync(dispatch_get_main_queue(), ^&#123;<br>			NSLog(@&quot;2&quot;);<br>		&#125;);<br>		NSLog(@&quot;3&quot;);<br>	&#125;);<br>	NSLog(@&quot;4&quot;);<br>	&#x2F;&#x2F;æ­»å¾ªç¯<br>	while (1) &#123;<br>		&#x2F;&#x2F;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>



<h3 id="GCDå®é™…ä½¿ç”¨"><a href="#GCDå®é™…ä½¿ç”¨" class="headerlink" title="GCDå®é™…ä½¿ç”¨"></a>GCDå®é™…ä½¿ç”¨</h3><p>FMDBå¦‚ä½•ä½¿ç”¨ <strong>dispatch_queue_set_specific</strong> å’Œ <strong>dispatch_get_specific</strong> æ¥é˜²æ­¢æ­»é”ï¼Œä½œç”¨ç±»ä¼¼objc_setAssociatedObjectè·Ÿobjc_getAssociatedObject </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><code class="hljs objective-c">static const void * const kDispatchQueueSpecificKey &#x3D; &amp;kDispatchQueueSpecificKey;<br><br>&#x2F;&#x2F;åˆ›å»ºä¸²è¡Œé˜Ÿåˆ—ï¼Œæ‰€æœ‰æ•°æ®åº“çš„æ“ä½œéƒ½åœ¨è¿™ä¸ªé˜Ÿåˆ—é‡Œ<br>_queue &#x3D; dispatch_queue_create([[NSString stringWithFormat:@&quot;fmdb.%@&quot;, self] UTF8String],<br>                               NULL);<br><br>&#x2F;&#x2F;æ ‡è®°é˜Ÿåˆ—<br>dispatch_queue_set_specific(_queue, kDispatchQueueSpecificKey, (__bridge void *)self, NULL);<br><br>&#x2F;&#x2F;æ£€æŸ¥æ˜¯å¦æ˜¯åŒä¸€ä¸ªé˜Ÿåˆ—æ¥é¿å…æ­»é”çš„æ–¹æ³•<br>- (void)inDatabase:(void (^)(FMDatabase *db))block &#123;<br>	 FMDatabaseQueue *currentSyncQueue &#x3D; (__bridge id)dispatch_get_specific(kDispatchQueueSpecificKey);<br>	assert(currentSyncQueue !&#x3D; self &amp;&amp; &quot;inDatabase: was called reentrantly on the same queue,which would lead to a deadlock&quot;);<br>&#125;<br></code></pre></td></tr></table></figure>



<h2 id="iOSç³»ç»Ÿç‰ˆæœ¬æ–°ç‰¹æ€§"><a href="#iOSç³»ç»Ÿç‰ˆæœ¬æ–°ç‰¹æ€§" class="headerlink" title="iOSç³»ç»Ÿç‰ˆæœ¬æ–°ç‰¹æ€§"></a>iOSç³»ç»Ÿç‰ˆæœ¬æ–°ç‰¹æ€§</h2><h3 id="iOS8"><a href="#iOS8" class="headerlink" title="iOS8"></a>iOS8</h3><p>iOS8 æ–°åŠ äº†ä¸€ä¸ªåŠŸèƒ½å« Quality of Service(QoS)ï¼Œé‡Œé¢æä¾›äº†ä¸€ä¸‹å‡ ä¸ªæ›´å®¹æ˜“ç†è§£çš„æšä¸¾åæ¥ä½¿ç”¨user interactiveï¼Œuser initiatedï¼Œutilityå’Œbackgroundã€‚ä¸‹é¢çš„è¡¨åšäº†å¯¹æ¯” </p>
<table>
<thead>
<tr>
<th align="center">Global queue</th>
<th align="center">Corresponding QoS class</th>
<th align="center">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Main thread</td>
<td align="center">NSQualityOfServiceUserInteractive</td>
<td align="center">UIç›¸å…³ï¼Œäº¤äº’ç­‰</td>
</tr>
<tr>
<td align="center">DISPATCH_QUEUE_PRIORITY_HIGH</td>
<td align="center">NSQualityOfServiceUserInitiated</td>
<td align="center">ç”¨æˆ·å‘èµ·éœ€è¦é©¬ä¸Šå¾—åˆ°ç»“æœè¿›è¡Œåç»­ä»»åŠ¡</td>
</tr>
<tr>
<td align="center">DISPATCH_QUEUE_PRIORITY_DEFAULT</td>
<td align="center">NSQualityOfServiceDefault</td>
<td align="center">é»˜è®¤çš„ä¸åº”è¯¥ä½¿ç”¨è¿™ä¸ªè®¾ç½®ä»»åŠ¡</td>
</tr>
<tr>
<td align="center">DISPATCH_QUEUE_PRIORITY_LOW</td>
<td align="center">NSQualityOfServiceUtility</td>
<td align="center">èŠ±è´¹æ—¶é—´ç¨å¤šæ¯”å¦‚ä¸‹è½½ï¼Œéœ€è¦å‡ ç§’æˆ–å‡ åˆ†é’Ÿçš„</td>
</tr>
<tr>
<td align="center">DISPATCH_QUEUE_PRIORITY_BACKGROUND</td>
<td align="center">NSQualityOfServiceBackground</td>
<td align="center">ä¸å¯è§åœ¨åå°çš„æ“ä½œå¯èƒ½éœ€è¦å¥½å‡ åˆ†é’Ÿç”šè‡³å‡ å°æ—¶çš„</td>
</tr>
</tbody></table>
]]></content>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
</search>
